Metadata-Version: 2.4
Name: mcp-id-photo
Version: 1.0.1
Summary: MCPæœåŠ¡å™¨ï¼šè¯ä»¶ç…§ç”Ÿæˆå·¥å…·ï¼Œæä¾›AIè¯ä»¶ç…§ç”ŸæˆåŠŸèƒ½
Project-URL: Homepage, https://github.com/fengjinchao/mcp-image-super-resolution
Project-URL: Repository, https://github.com/fengjinchao/mcp-image-super-resolution
Project-URL: Documentation, https://github.com/fengjinchao/mcp-image-super-resolution#readme
Project-URL: Issues, https://github.com/fengjinchao/mcp-image-super-resolution/issues
Author-email: fengjinchao <fengjinchao@example.com>
License: MIT
Keywords: ai,aliyun,image,image-enhancement,mcp,super-resolution,upscale
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Topic :: Scientific/Engineering :: Image Processing
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.10
Requires-Dist: dashscope>=1.23.8
Requires-Dist: mcp[cli]>=1.0.0
Requires-Dist: pillow>=10.4.0
Description-Content-Type: text/markdown

# ç”Ÿæˆè¯ä»¶ç…§ MCP æœåŠ¡å™¨

åŸºäºé˜¿é‡Œäº‘ç™¾ç‚¼ DashScope çš„é€šä¹‰åƒé—®-å›¾åƒç¼–è¾‘ï¼Œæä¾›ä¸€ä¸ªå·¥å…·å³å¯ä¸€é”®ç”Ÿæˆå¹¶è£å‰ªæ ‡å‡†è¯ä»¶ç…§ï¼Œæ”¯æŒç™½/è“/çº¢èƒŒæ™¯ä¸å¸¸ç”¨å°ºå¯¸ï¼ˆä¸€å¯¸ã€äºŒå¯¸ï¼‰ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ å•ä¸€å·¥å…·ï¼š`make_id_photo` å®Œæˆç”Ÿæˆ â†’ è£å‰ª â†’ ä¿å­˜å…¨æµç¨‹
- ğŸ–¼ï¸ èƒŒæ™¯æ›¿æ¢ï¼šæ”¯æŒ `white` / `blue` / `red` ä¸‰ç§èƒŒæ™¯
- ğŸ“ è§„æ ¼æ”¯æŒï¼šä¸€å¯¸ï¼ˆ295Ã—413ï¼‰ã€äºŒå¯¸-æ ‡å‡†ï¼ˆ413Ã—531ï¼‰ã€äºŒå¯¸-å¤§ï¼ˆ413Ã—579ï¼‰æˆ–è‡ªå®šä¹‰å°ºå¯¸
- ğŸ’¾ è‡ªåŠ¨ä¿å­˜ï¼šé»˜è®¤ä¿å­˜åˆ°æ¡Œé¢ï¼›å¯æŒ‡å®šç›®å½•æˆ–æ–‡ä»¶è·¯å¾„
- âš¡ åŒæ­¥è¿”å›ï¼šç›´æ¥è¿”å›äº‘ç«¯å›¾ç‰‡åœ°å€ä¸æœ¬åœ°ä¿å­˜è·¯å¾„ï¼Œæ— éœ€ä»»åŠ¡æŸ¥è¯¢

## ğŸ”‘ é…ç½®ç™¾ç‚¼ API Key

DashScope ä½¿ç”¨åœ°åŸŸï¼šä¸­å›½å¤§é™†ï¼ˆåŒ—äº¬ï¼‰ã€‚è¯·åœ¨è¿è¡Œç¯å¢ƒè®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
export DASHSCOPE_API_KEY="ä½ çš„ç™¾ç‚¼ API Keyï¼ˆåŒ—äº¬åœ°åŸŸï¼‰"
```

Windows PowerShellï¼š

```powershell
$env:DASHSCOPE_API_KEY = "ä½ çš„ç™¾ç‚¼ API Keyï¼ˆåŒ—äº¬åœ°åŸŸï¼‰"
```

## ğŸš€ å¯åŠ¨æœåŠ¡

ç›´æ¥è¿è¡Œæ¨¡å—ï¼š

```bash
python -m mcp_id_photo.server
```

## ğŸ”§ åœ¨ MCP å®¢æˆ·ç«¯ä¸­é…ç½®

ä»¥ Claude Desktop / Cline / Kiro ä¸ºä¾‹ï¼š

```json
{
  "mcpServers": {
    "id-photo": {
      "command": "python",
      "args": ["-m", "mcp_id_photo.server"],
      "env": {
        "DASHSCOPE_API_KEY": "sk-xxx"
      },
      "disabled": false,
      "autoApprove": []
    }
  }
}
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å·¥å…·ï¼š`make_id_photo`

ç”Ÿæˆå¹¶ä¿å­˜æ ‡å‡†è¯ä»¶ç…§ï¼ˆåŒæ­¥ï¼‰ã€‚æµç¨‹ï¼š
1) ä½¿ç”¨ `image_url + bg` è°ƒç”¨é€šä¹‰åƒé—®-å›¾åƒç¼–è¾‘ç”Ÿæˆè¯ä»¶ç…§ï¼›
2) å°†ç»“æœæŒ‰ç›®æ ‡å°ºå¯¸è£å‰ªï¼šé»˜è®¤äºŒå¯¸-æ ‡å‡†ï¼ˆ413Ã—531ï¼‰ï¼Œè‹¥ä¼ å…¥ `spec` æˆ– `size` åˆ™æŒ‰å‚æ•°ï¼›
3) å°†æˆç‰‡ä¿å­˜åˆ°æ¡Œé¢æˆ– `output_path` æŒ‡å®šä½ç½®ï¼›è¿”å›ä¿å­˜è·¯å¾„ä¸å…ƒæ•°æ®ã€‚

#### å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `image_url` | string | âœ… | - | è¾“å…¥å›¾ç‰‡åœ°å€ï¼Œéœ€å…¬ç½‘å¯è®¿é—®çš„ `http/https` é“¾æ¥ |
| `output_path` | string | âŒ | æ¡Œé¢ | è¾“å‡ºç›®å½•æˆ–æœ€ç»ˆæ–‡ä»¶è·¯å¾„ï¼›ä¸ºç›®å½•æ—¶è‡ªåŠ¨å‘½åæ–‡ä»¶ |
| `bg` | enum | âŒ | `blue` | èƒŒæ™¯è‰²ï¼š`white`ã€`blue`ã€`red` |
| `spec` | enum | âŒ | - | è¯ä»¶ç…§è§„æ ¼ï¼š`ä¸€å¯¸`ã€`äºŒå¯¸-æ ‡å‡†`ã€`äºŒå¯¸-å¤§`ï¼ˆä¸ `size` äºŒé€‰ä¸€ï¼‰ |
| `size` | string | âŒ | - | è‡ªå®šä¹‰åƒç´ å°ºå¯¸ï¼Œæ ¼å¼å¦‚ `295*413`ã€`413x579`ï¼ˆä¸ `spec` äºŒé€‰ä¸€ï¼›ä¼˜å…ˆçº§ `size` > `spec`ï¼‰ |

è£å‰ªé»˜è®¤æ¯”ä¾‹ï¼ˆæ¨èï¼‰ï¼š
- å¤´é¡¶åˆ°ç”»é¢ä¸Šè¾¹è·çº¦ `12%`ï¼ˆ`top_margin_ratio = 0.12`ï¼‰
- å‚ç›´è£å‰ªé«˜åº¦çº¦ä¸ºä¸»ä½“åŒ…å›´ç›’çš„ `92%`ï¼ˆ`expand_ratio = 0.92`ï¼‰

#### è°ƒç”¨ç¤ºä¾‹

- ä½¿ç”¨é»˜è®¤è“åº•ä¸é»˜è®¤äºŒå¯¸æ ‡å‡†å°ºå¯¸å¹¶ä¿å­˜åˆ°æ¡Œé¢ï¼š

```
make_id_photo(image_url="https://example.com/portrait.jpg")
```

- æŒ‡å®šçº¢åº•ã€æŒ‡å®šè¾“å‡ºç›®å½•å¹¶è‡ªå®šä¹‰å°ºå¯¸ï¼š

```
make_id_photo(
  image_url="https://example.com/portrait.jpg",
  output_path="D:\\Output\\ID",
  bg="red",
  size="295x413"
)
```

- æŒ‡å®šè§„æ ¼ä¸ºä¸€å¯¸å¹¶ç›´æ¥ä¿å­˜åˆ°æŸä¸ªæ–‡ä»¶è·¯å¾„ï¼š

```
make_id_photo(
  image_url="https://example.com/a.png",
  output_path="D:\\Output\\my_id.png",
  spec="ä¸€å¯¸"
)
```

#### è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "file_path": "C:\\Users\\you\\Desktop\\id_photo_413x531_1730000000.png",
  "size_applied": "413x531",
  "bg": "blue",
  "spec": "äºŒå¯¸-æ ‡å‡†",
  "source_images": ["https://dashscope-result-.../xxx.png?Expires=..."],
  "behavior_notice": "é‡‡ç”¨åŒæ­¥ç”Ÿæˆï¼Œç»“æœå·²è£å‰ªå¹¶ä¿å­˜åˆ°æœ¬åœ°"
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. äº‘ç«¯è¿”å›çš„å›¾ç‰‡ URL é€šå¸¸æœ‰æœ‰æ•ˆæœŸï¼ˆçº¦ 24 å°æ—¶ï¼‰ï¼Œå¦‚éœ€é•¿æœŸä¿å­˜è¯·ä½¿ç”¨è¿”å›çš„æœ¬åœ°è·¯å¾„
2. è¯·ä½¿ç”¨ä¸­å›½å¤§é™†ï¼ˆåŒ—äº¬ï¼‰åœ°åŸŸçš„ç™¾ç‚¼ API Keyï¼Œå¦åˆ™å¯èƒ½æ— æ³•è°ƒç”¨
3. è¾“å…¥å›¾ç‰‡å»ºè®®äººåƒå±…ä¸­ã€æ­£é¢ã€èƒ¸éƒ¨ä»¥ä¸Šï¼›è¿‡æš—æˆ–è¿‡æ›ä¼šå½±å“æ•ˆæœ
4. è‹¥ä¸»ä½“ä¸èƒŒæ™¯å·®å¼‚è¾ƒå¼±å¯¼è‡´æ©è†œä¸ç¨³å®šï¼Œå·¥å…·å°†è‡ªåŠ¨å›é€€ä¸ºå±…ä¸­å¡«å……ï¼Œä»ä¿è¯å¾—åˆ°ç›®æ ‡å°ºå¯¸æˆç‰‡

## ğŸ› ï¸ æŠ€æœ¯å®ç°

- ä½¿ç”¨ DashScope é€šç”¨å›¾åƒç¼–è¾‘ï¼ˆ`qwen-image-edit-plus`ï¼‰REST æ¥å£ï¼š`/services/aigc/multimodal-generation/generation`
- è§£æç»“æœå›¾ç‰‡ URLï¼Œä¸‹è½½åˆ°å†…å­˜åä½¿ç”¨ `Pillow` è¿›è¡Œâ€œè¯ä»¶ç…§æ„å›¾è£å‰ªâ€ï¼Œå¤±è´¥æ—¶å›é€€ä¸ºâ€œå±…ä¸­å¡«å……â€
- è¾“å‡ºè·¯å¾„ï¼šä¼˜å…ˆ `output_path`ï¼›ä¸ºç©ºåˆ™é»˜è®¤æ¡Œé¢ï¼Œç›®å½•ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»º
- å‘½ååŒ…å«å°ºå¯¸ä¸æ—¶é—´æˆ³ï¼Œå¦‚ï¼š`id_photo_413x531_1730000000.png`

## ğŸ“š ç›¸å…³æ–‡æ¡£

- é€šç”¨å›¾åƒç¼–è¾‘ API å‚è€ƒï¼ˆç™¾ç‚¼æ§åˆ¶å°ï¼‰
- Model Context Protocol (MCP)

## ğŸ“„ è®¸å¯è¯

MIT License