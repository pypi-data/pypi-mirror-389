{"version":3,"file":"static/js/6265.de052815.chunk.js","mappings":"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","sources":["components/EditSection.tsx","components/ModelChangeNotification.tsx","components/Conversation.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { useChatContext } from '../context/ChatContext';\nimport { sendPayload } from \"../apis/chatApi\";\nimport { Message } from \"../utils/types\";\nimport { useFolderContext } from \"../context/FolderContext\";\nimport { Button, Tooltip, Input, Space } from \"antd\";\nimport { convertKeysToStrings } from '../utils/types';\nimport { EditOutlined, CheckOutlined, CloseOutlined, SaveOutlined } from \"@ant-design/icons\";\n\ninterface EditSectionProps {\n    index: number;\n    isInline?: boolean;\n}\n\nexport const EditSection: React.FC<EditSectionProps> = ({ index, isInline = false }) => {\n    const {\n        currentMessages,\n        currentConversationId,\n        addMessageToConversation,\n        setIsStreaming,\n        setConversations,\n        streamingConversations,\n        addStreamingConversation,\n        streamedContentMap,\n        setStreamedContentMap,\n        removeStreamingConversation,\n        editingMessageIndex,\n        setEditingMessageIndex\n    } = useChatContext();\n\n    const [editedMessage, setEditedMessage] = useState(currentMessages[index].content);\n    const { checkedKeys } = useFolderContext();\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n    const { TextArea } = Input;\n    const isEditing = editingMessageIndex === index;\n\n    // Focus the textarea when editing starts\n    useEffect(() => {\n        if (isEditing && textareaRef.current) {\n            setTimeout(() => {\n                if (textareaRef.current) {\n                    textareaRef.current.focus();\n                }\n            }, 100);\n        }\n    }, [isEditing]);\n\n    const handleEdit = () => {\n        setEditingMessageIndex(index);\n    };\n\n    const handleSave = () => {\n        // Update the conversation in the context with the edited message\n        setConversations(prev => prev.map(conv => {\n            if (conv.id === currentConversationId) {\n                const updatedMessages = conv.messages.map((msg, i) => {\n                    if (i === index) {\n                        return {\n                            ...msg,\n                            content: editedMessage,\n                            _timestamp: Date.now()  // Update timestamp to mark as modified\n                        };\n                    }\n                    return msg;\n                });\n                return { ...conv, messages: updatedMessages, _version: Date.now() };\n            }\n            return conv;\n        }));\n        setEditingMessageIndex(null);\n    };\n\n    const handleCancel = () => {\n        setEditingMessageIndex(null);\n        setEditedMessage(currentMessages[index].content);\n    };\n\n    const handleSubmit = async () => {\n        setEditingMessageIndex(null);\n\n        // Clear any existing streamed content\n        setStreamedContentMap(new Map());\n\n        // Create truncated message array up to and including edited message\n        const truncatedMessages = currentMessages.slice(0, index + 1);\n\n        // Update the edited message\n        truncatedMessages[index] = {\n            ...truncatedMessages[index],\n            content: editedMessage,\n            _timestamp: Date.now(),\n            // Add a marker to indicate this message was edited and truncated\n            _edited: true,\n            _truncatedAfter: true\n        };\n\n        // Set conversation to just the truncated messages\n        setConversations(prev => prev.map(conv =>\n            conv.id === currentConversationId\n                ? { ...conv, messages: truncatedMessages, _version: Date.now(), _editInProgress: true }\n                : conv\n        ));\n\n        addStreamingConversation(currentConversationId);\n        try {\n            const result = await sendPayload(\n                truncatedMessages,\n                editedMessage,\n                convertKeysToStrings(checkedKeys),\n                currentConversationId,\n                streamedContentMap,\n                setStreamedContentMap,\n                setIsStreaming,\n                removeStreamingConversation,\n                addMessageToConversation,\n                streamingConversations.has(currentConversationId)\n            );\n\n            // Get the final streamed content\n            const finalContent = result;\n\n            if (finalContent) {\n                const newAIMessage: Message = {\n                    content: finalContent,\n                    role: 'assistant'\n                };\n                addMessageToConversation(newAIMessage, currentConversationId);\n\n                // Clear the edit in progress flag after successfully adding the response\n                setConversations(prev => prev.map(conv =>\n                    conv.id === currentConversationId\n                        ? { ...conv, _editInProgress: false }\n                        : conv\n                ));\n            }\n        } catch (error) {\n            console.error('Error sending message:', error);\n            removeStreamingConversation(currentConversationId);\n        } finally {\n            setIsStreaming(false);\n        }\n    };\n\n    return (\n        <div>\n            {/* If this is the inline version and we're editing this message, don't render anything */}\n            {isInline && isEditing && (\n                null\n            )}\n\n            {/* If we're editing and this is NOT the inline version, show full edit interface */}\n            {isEditing && !isInline && (\n                <div style={{ width: '100%' }}>\n                    {/* Header row with sender and buttons */}\n                    <div style={{\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '8px',\n                        width: '100%'\n                    }}>\n                        <div className=\"message-sender\">You:</div>\n                        <Space>\n                            <Tooltip title=\"Cancel editing\">\n                                <Button icon={<CloseOutlined />} onClick={handleCancel} size=\"small\">\n                                    Cancel\n                                </Button>\n                            </Tooltip>\n                            <Tooltip title=\"Save changes to context\">\n                                <Button icon={<SaveOutlined />} onClick={handleSave} size=\"small\">\n                                    Save\n                                </Button>\n                            </Tooltip>\n                            <Tooltip title=\"Send to model, remove newer responses\">\n                                <Button icon={<CheckOutlined />} onClick={handleSubmit} size=\"small\" type=\"primary\">\n                                    Submit\n                                </Button>\n                            </Tooltip>\n                        </Space>\n                    </div>\n\n                    {/* Full-width textarea */}\n                    <TextArea\n                        ref={textareaRef}\n                        autoFocus\n                        style={{\n                            width: '100%',\n                            minHeight: '100px',\n                            resize: 'vertical'\n                        }}\n                        value={editedMessage}\n                        onChange={(e) => setEditedMessage(e.target.value)}\n                        autoSize={{\n                            minRows: 3,\n                            maxRows: 20\n                        }}\n                        placeholder=\"Edit your message...\"\n                    />\n                </div>\n            )}\n\n            {/* Show edit button if not editing and this is inline, OR if not editing and not inline */}\n            {!isEditing && (isInline || !isEditing) && (\n                <Tooltip title=\"Edit\">\n                    <Button icon={<EditOutlined />} onClick={handleEdit} />\n                </Tooltip>\n            )}\n        </div>\n    );\n};\n\n","import React, { memo } from 'react';\nimport { useTheme } from '../context/ThemeContext';\n\ninterface ModelChangeNotificationProps {\n  previousModel: string;\n  newModel: string;\n  changeKey?: string;\n  key?: string;\n}\n\nconst ModelChangeNotification: React.FC<ModelChangeNotificationProps> = memo(({ previousModel, newModel, changeKey }) => {\n  const { isDarkMode } = useTheme();\n\n  // Define colors that work well in both light and dark modes\n  const styles = {\n    container: {\n      padding: '12px 16px',\n      borderRadius: '8px',\n      backgroundColor: isDarkMode ? 'rgba(25, 118, 210, 0.15)' : 'rgba(25, 118, 210, 0.08)',\n      border: `1px solid ${isDarkMode ? '#2c6cb0' : '#90caf9'}`,\n      marginBottom: '12px',\n      marginTop: '4px',\n      display: 'flex',\n      alignItems: 'center',\n      boxShadow: isDarkMode ? '0 2px 8px rgba(0, 0, 0, 0.15)' : '0 1px 3px rgba(0, 0, 0, 0.1)'\n    },\n    icon: {\n      fontSize: '20px',\n      marginRight: '12px',\n      color: isDarkMode ? '#90caf9' : '#1976d2'\n    },\n    text: {\n      color: isDarkMode ? '#e3f2fd' : '#0d47a1',\n      fontWeight: 500,\n      fontSize: '14px'\n    },\n    modelName: {\n      fontWeight: 600,\n      color: isDarkMode ? '#bbdefb' : '#1565c0'\n    }\n  };\n\n  return (\n    <div style={styles.container}>\n      <span style={styles.icon}>ðŸ”„</span>\n      <span style={styles.text}>\n        Model changed from <span style={styles.modelName}>{previousModel}</span> to <span style={styles.modelName}>{newModel}</span>\n      </span>\n    </div>\n  );\n}, (prevProps, nextProps) => {\n  // Only re-render if the models actually change or if the changeKey is different\n  if (prevProps.changeKey && nextProps.changeKey && prevProps.changeKey !== nextProps.changeKey) {\n    return false; // Different changeKeys mean we should re-render\n  }\n  return prevProps.previousModel === nextProps.previousModel &&\n    prevProps.newModel === nextProps.newModel &&\n    prevProps.changeKey === nextProps.changeKey;\n});\n\nModelChangeNotification.displayName = 'ModelChangeNotification';\nexport default ModelChangeNotification;\n","import React, { useEffect, useRef, Suspense, memo, useCallback, useMemo } from \"react\";\nimport { FixedSizeList as List } from 'react-window';\nimport { useChatContext } from '../context/ChatContext';\nimport { EditSection } from \"./EditSection\";\nimport { Spin, Button, Tooltip } from 'antd';\nimport { RedoOutlined, SoundOutlined, MutedOutlined } from \"@ant-design/icons\";\nimport { sendPayload } from \"../apis/chatApi\";\n\nimport ModelChangeNotification from './ModelChangeNotification';\nimport { convertKeysToStrings } from \"../utils/types\";\nimport { useQuestionContext } from '../context/QuestionContext';\nimport { useFolderContext } from '../context/FolderContext';\nimport { isDebugLoggingEnabled, debugLog } from '../utils/logUtils';\n\n// Lazy load the MarkdownRenderer\nimport { MarkdownRenderer } from \"./MarkdownRenderer\";\n\ninterface ConversationProps {\n    enableCodeApply: boolean;\n}\n\nconst Conversation: React.FC<ConversationProps> = memo(({ enableCodeApply }) => {\n    const { currentMessages,\n        editingMessageIndex,\n        isTopToBottom,\n        isLoadingConversation,\n        addStreamingConversation,\n        streamingConversations,\n        currentConversationId,\n        setIsStreaming,\n        setStreamedContentMap,\n        isStreaming,\n        addMessageToConversation,\n        removeStreamingConversation,\n        streamedContentMap,\n        userHasScrolled,\n        updateProcessingState,\n        setConversations,\n        toggleMessageMute,\n    } = useChatContext();\n\n    const { checkedKeys } = useFolderContext();\n    const { setQuestion } = useQuestionContext();\n    const visibilityRef = useRef<boolean>(true);\n    // Memoize conversation-specific streaming state to prevent unnecessary re-renders\n    const conversationStreamingState = useMemo(() => ({\n        isCurrentlyStreaming: streamingConversations.has(currentConversationId),\n        hasStreamedContent: streamedContentMap.has(currentConversationId) && \n                           streamedContentMap.get(currentConversationId) !== '',\n        streamedContent: streamedContentMap.get(currentConversationId) || ''\n    }), [streamingConversations, streamedContentMap, currentConversationId]);\n    \n    // Use memoized state instead of direct context access\n    const { isCurrentlyStreaming, hasStreamedContent } = conversationStreamingState;\n    \n    // Virtualized rendering for large conversations (300k+ tokens)\n    const VIRTUAL_THRESHOLD = 50; // Start virtualizing after 50 messages\n    const shouldVirtualize = currentMessages.length > VIRTUAL_THRESHOLD;\n    \n    const renderMessage = useCallback(({ index, style }: { index: number; style: React.CSSProperties }) => {\n        const actualIndex = isTopToBottom ? index : currentMessages.length - 1 - index;\n        const msg = currentMessages[actualIndex];\n        \n        if (!msg) return <div style={style} />;\n        \n        return (\n            <div style={style} className={`message ${msg.role || ''}${msg.muted ? ' muted' : ''}`}>\n                {/* Message rendering logic moved here */}\n            </div>\n        );\n    }, [currentMessages, isTopToBottom]);\n    \n    const displayMessages = shouldVirtualize ? null : (isTopToBottom ? currentMessages : [...currentMessages].reverse());\n\n    // Keep track of rendered messages for performance monitoring\n    const renderedCountRef = useRef(0);\n    const renderedSystemMessagesRef = useRef<Set<string>>(new Set());\n    const processedModelChangesRef = useRef<Set<string>>(new Set());\n\n    // Track which conversations have received streaming content\n    const conversationHasStreamedContent = useCallback((conversationId: string) => {\n        return streamedContentMap.has(conversationId) &&\n            streamedContentMap.get(conversationId) !== '';\n    }, [streamedContentMap]);\n\n    useEffect(() => {\n        // Only log when message count changes significantly, not on every render\n        if (Math.abs(currentMessages.length - renderedCountRef.current) > 2) {\n            if (isDebugLoggingEnabled()) {\n                debugLog('Conversation messages updated:', {\n                    messageCount: currentMessages.length,\n                    previousCount: renderedCountRef.current,\n                    isVisible: visibilityRef.current,\n                    displayOrder: isTopToBottom ? 'top-down' : 'bottom-up'\n                });\n            }\n            renderedCountRef.current = currentMessages.length;\n        }\n\n        // Set up visibility observer\n        const observer = new IntersectionObserver(\n            (entries) => {\n                entries.forEach(entry => {\n                    visibilityRef.current = entry.isIntersecting;\n                });\n            },\n            { threshold: 0.1 }\n        );\n\n        return () => observer.disconnect();\n    }, [isTopToBottom, currentMessages.length]);\n\n    // Update active streaming conversations reference\n    useEffect(() => {\n        // Create the handler function\n        const handleModelChange = (event: CustomEvent) => {\n            const { previousModel, newModel } = event.detail;\n\n            // Create a unique key for this model change to prevent duplicates\n            const changeKey = `${previousModel}->${newModel}`;\n\n            // Skip if we've already processed this exact change\n            if (processedModelChangesRef.current.has(changeKey)) {\n                return;\n            }\n            processedModelChangesRef.current.add(changeKey);\n\n            // Add system message about model change\n            if (previousModel && newModel) {\n                addMessageToConversation({\n                    role: 'system',\n                    content: `Model changed from ${previousModel} to ${newModel}`,\n                    modelChange: {\n                        from: previousModel,\n                        to: newModel,\n                        changeKey: changeKey\n                    }\n                }, currentConversationId);\n            }\n        };\n\n        // Add and remove event listener\n        window.addEventListener('modelChanged', handleModelChange as EventListener);\n        return () => {\n            // Reset processed changes when component unmounts\n            processedModelChangesRef.current.clear();\n            renderedSystemMessagesRef.current.clear();\n            window.removeEventListener('modelChanged', handleModelChange as EventListener);\n        };\n    }, [currentConversationId, addMessageToConversation]);\n\n    // Loading indicator text based on progress\n    const loadingText = isLoadingConversation\n        ? currentMessages.length > 0\n            ? `Loading messages (${currentMessages.length} loaded)...`\n            : 'Loading conversation...'\n        : '';\n\n    // Progressive loading indicator\n    const showProgressiveLoading = isLoadingConversation && currentMessages.length > 0;\n\n    // Track whether we're in the initial loading state\n    const isInitialLoading = isLoadingConversation && currentMessages.length === 0;\n\n    // Function to determine if we need to show the retry button\n    const shouldShowRetry = (index: number) => {\n        const message = currentMessages[index];\n        const isLastMessage = index === currentMessages.length - 1;\n        const nextIndex = index + 1;\n        const nextMessage = nextIndex < currentMessages.length ? currentMessages[nextIndex] : null;\n        const hasNextMessage = nextIndex < currentMessages.length;\n\n        // Show retry if this is a human message and either:\n        // 1. It's the last message, or\n        // 2. The next message isn't from the assistant\n        // But don't show if we're currently streaming or have streaming content for this conversation\n        return message?.role === 'human' &&\n            !isCurrentlyStreaming &&\n            !hasStreamedContent &&\n            (isLastMessage ||\n                (hasNextMessage && nextMessage?.role !== 'assistant'));\n    };\n\n    // Render retry button with explanation\n    const renderRetryButton = (index: number) => {\n        if (!shouldShowRetry(index)) return null;\n\n        return (\n            <Tooltip title=\"The AI response may have failed. Click to retry.\">\n                <Button\n                    icon={<RedoOutlined />}\n                    type=\"primary\"\n                    size=\"small\"\n                    onClick={async () => {\n                        const message = currentMessages[index];\n                        addStreamingConversation(currentConversationId);\n                        try {\n                            // Filter out muted messages before retrying - explicitly exclude muted messages\n                            const messagesToSend = currentMessages.filter(msg => !msg.muted);\n                            await sendPayload(\n                                messagesToSend,\n                                message.content,\n                                convertKeysToStrings(checkedKeys || []),\n                                currentConversationId,\n                                streamedContentMap,\n                                setStreamedContentMap,\n                                setIsStreaming,\n                                removeStreamingConversation,\n                                addMessageToConversation,\n                                streamingConversations.has(currentConversationId),\n                                (state: 'idle' | 'sending' | 'awaiting_model_response' | 'processing_tools' | 'error') => updateProcessingState(currentConversationId, state)\n                            );\n                        } catch (error) {\n                            setIsStreaming(false);\n                            removeStreamingConversation(currentConversationId);\n                            console.error('Error retrying message:', error);\n                        }\n                    }}\n                >\n                    Retry AI Response\n                </Button>\n            </Tooltip>\n        );\n    };\n\n    // Render mute button\n    const renderMuteButton = (index: number) => {\n        // Don't show mute button if this message is being edited\n        if (editingMessageIndex === index) {\n            return null;\n        }\n\n        const message = currentMessages[index];\n\n        // Don't show mute button if there's an error state (retry button is showing)\n        if (shouldShowRetry(index)) {\n            return null;\n        }\n\n        if (!message || message.role === 'system') return null;\n\n        return (\n            <Tooltip title={message.muted ? \"Unmute (include in context)\" : \"Mute (exclude from context)\"}>\n                <Button\n                    icon={message.muted ? <MutedOutlined /> : <SoundOutlined />}\n                    type=\"default\"\n                    size=\"small\"\n                    style={{\n                        padding: '0 8px',\n                        minWidth: '32px',\n                        height: '32px'\n                    }}\n                    onClick={() => {\n                        toggleMessageMute(currentConversationId, index);\n                    }}\n                />\n            </Tooltip>\n        );\n    };\n\n    // Render resubmit button for human messages\n    const renderResubmitButton = (index: number) => {\n        // Don't show resubmit button if this message is being edited\n        if (editingMessageIndex === index) {\n            return null;\n        }\n\n        const message = currentMessages[index];\n\n        // Don't show resubmit button if there's an error state (retry button is showing)\n        if (shouldShowRetry(index)) {\n            return null;\n        }\n\n        if (!message || message.role !== 'human') return null;\n\n        // Don't show resubmit button if we're currently streaming\n        if (isCurrentlyStreaming) return null;\n\n        return (\n            <Tooltip title=\"Resubmit this question\">\n                <Button\n                    icon={<RedoOutlined />}\n                    type=\"default\"\n                    size=\"small\"\n                    style={{\n                        padding: '0 8px',\n                        minWidth: '32px',\n                        height: '32px'\n                    }}\n                    onClick={() => {\n                        // Clear any existing streamed content\n                        setStreamedContentMap(new Map());\n\n                        // Create truncated message array up to and including this message\n                        const truncatedMessages = currentMessages.slice(0, index + 1);\n\n                        // Filter out muted messages from truncated messages - explicitly exclude muted messages\n                        const messagesToSend = truncatedMessages.filter(msg => !msg.muted);\n                        // Set conversation to just the truncated messages\n                        setConversations(prev => prev.map(conv =>\n                            conv.id === currentConversationId\n                                ? { ...conv, messages: truncatedMessages, _version: Date.now() }\n                                : conv\n                        ));\n\n                        // Start streaming immediately\n                        addStreamingConversation(currentConversationId);\n\n                        // Send the payload\n                        (async () => {\n                            try {\n                                // messagesToSend is already filtered above\n                                await sendPayload(\n                                    messagesToSend, // Already filtered for muted messages\n                                    message.content,\n                                    convertKeysToStrings(checkedKeys || []),\n                                    currentConversationId,\n                                    streamedContentMap,\n                                    setStreamedContentMap,\n                                    setIsStreaming,\n                                    removeStreamingConversation,\n                                    addMessageToConversation,\n                                    streamingConversations.has(currentConversationId),\n                                    (state: 'idle' | 'sending' | 'awaiting_model_response' | 'processing_tools' | 'error') => updateProcessingState(currentConversationId, state)\n                                );\n                            } catch (error) {\n                                setIsStreaming(false);\n                                removeStreamingConversation(currentConversationId);\n                                console.error('Error resubmitting message:', error);\n                            }\n                        })();\n                        // Clear the question field since we're submitting directly\n                        setQuestion('');\n                    }}\n                />\n            </Tooltip>\n        );\n    };\n\n    return (\n        <div style={{ position: 'relative' }}>\n            {isInitialLoading && (\n                <div style={{\n                    position: 'fixed',\n                    top: 'var(--header-height)',\n                    left: 'var(--folder-panel-width)',\n                    right: 0,\n                    bottom: 0,\n                    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n                    display: 'flex',\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    zIndex: 1000\n                }}>\n                    <Spin size=\"large\" tip={loadingText} />\n                </div>\n            )}\n            <div\n                style={{\n                    opacity: isLoadingConversation ? 0.5 : 1,\n                    minHeight: '50px' // Ensure visibility detection\n                }}\n                className=\"conversation-messages-container\"\n            >\n                {showProgressiveLoading && (\n                    <div style={{\n                        position: 'sticky',\n                        top: 0,\n                        backgroundColor: 'rgba(0, 0, 0, 0.7)',\n                        color: '#fff',\n                        padding: '8px 16px',\n                        borderRadius: '4px',\n                        margin: '8px 0',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px',\n                        zIndex: 1000\n                    }}>\n                        <Spin size=\"small\" />\n                        <span>{loadingText}</span>\n                    </div>\n                )}\n                {displayMessages?.map((msg, index) => {\n                    // Convert display index to actual index for bottom-up mode\n                    const actualIndex = isTopToBottom ? index : currentMessages.length - 1 - index;\n        const nextActualIndex = actualIndex + 1;\n        const hasNextMessage = nextActualIndex < currentMessages.length;\n        const nextMessage = hasNextMessage ? currentMessages[nextActualIndex] : null;\n\n        const needsResponse = msg.role === 'human' &&\n            !isCurrentlyStreaming &&\n            !hasStreamedContent &&\n            (actualIndex === currentMessages.length - 1 ||\n                (hasNextMessage && nextMessage?.role !== 'assistant'));\n\n                    // Create a unique key for system messages to prevent duplicate logging\n                    const systemMessageKey = msg.role === 'system' && msg.modelChange ?\n                        `${msg.modelChange.from}->${msg.modelChange.to}` :\n                        msg.content;\n\n                    // Only log system messages once and only in development mode\n                    if (process.env.NODE_ENV === 'development' && \n                        msg.role === 'system' && \n                        !renderedSystemMessagesRef.current.has(systemMessageKey)) {\n                        renderedSystemMessagesRef.current.add(systemMessageKey);\n                    }\n\n                    return <div\n                        // Use message ID as key instead of index\n                        key={`message-${msg.id || index}`}\n                        className={`message ${msg.role || ''}${msg.muted ? ' muted' : ''}${needsResponse\n                            ? ' needs-response'\n                            : ''\n                            }`}\n                    >\n                        {/* Handle system messages with model changes first */}\n                        {msg.role === 'system' && msg.modelChange ? (\n                            <ModelChangeNotification\n                                previousModel={msg.modelChange.from}\n                                changeKey={msg.modelChange.changeKey}\n                                newModel={msg.modelChange.to}\n                            />\n                        ) : (\n                            // Skip rendering empty messages entirely\n                            msg.content ? (\n                                // Regular message rendering for messages with content\n                                <>\n                                    {msg.role === 'human' && (\n                                        <div style={{ display: editingMessageIndex === actualIndex ? 'none' : 'flex', justifyContent: 'space-between' }}>\n                                            <div className=\"message-sender\">You:</div>\n                                            <div style={{\n                                                display: 'flex',\n                                                gap: '8px',\n                                                alignItems: 'center',\n                                                marginRight: '8px'\n                                            }}>\n                                                {renderMuteButton(actualIndex)}\n                                                {renderResubmitButton(actualIndex)}\n                                                {needsResponse && renderRetryButton(actualIndex)}\n                                                <EditSection index={actualIndex} isInline={true} />\n                                            </div>\n                                        </div>\n                                    )}\n\n                                    {/* Only show edit section when editing, otherwise show message content */}\n                                    {msg.role === 'human' && editingMessageIndex === actualIndex ? (\n                                        <EditSection index={actualIndex} isInline={false} />\n                                    ) : msg.role === 'human' && msg.content ? (\n                                        <div className=\"message-content\">\n                                            <MarkdownRenderer\n                                                markdown={msg.content}\n                                                enableCodeApply={enableCodeApply}\n                                                isStreaming={isStreaming || streamingConversations.has(currentConversationId)}\n                                            />\n                                        </div>\n                                    ) : msg.role === 'assistant' && msg.content ? (\n                                        <>\n                                            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                                                <div className=\"message-sender\">AI:</div>\n                                                <div style={{\n                                                    display: 'flex',\n                                                    gap: '8px',\n                                                    alignItems: 'center',\n                                                    marginRight: '8px'\n                                                }}>\n                                                    {renderMuteButton(actualIndex)}\n                                                </div>\n                                                {renderRetryButton(actualIndex)}\n                                            </div>\n                                            <div className=\"message-content\">\n                                                <MarkdownRenderer\n                                                    markdown={msg.content}\n                                                    enableCodeApply={enableCodeApply}\n                                                    isStreaming={isStreaming || streamingConversations.has(currentConversationId)}\n                                                />\n                                            </div>\n                                        </>\n                                    ) : null}\n                                </>\n                            ) : null\n                        )}\n                    </div>;\n                }) || (shouldVirtualize ? (\n                    <div style={{ height: '400px', width: '100%' }}>\n                        <List\n                            height={400}\n                            itemCount={currentMessages.length}\n                            itemSize={100}\n                            width=\"100%\"\n                        >\n                            {renderMessage}\n                        </List>\n                    </div>\n                ) : null)}\n                \n                {/* Fallback for when no messages to display */}\n                {(!displayMessages || displayMessages.length === 0) && !shouldVirtualize && (\n                    <div style={{ \n                        textAlign: 'center', \n                        padding: '2rem', \n                        color: '#999' \n                    }}>\n                        No messages in this conversation yet.\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}, (prevProps, nextProps) => {\n    // Custom comparison to prevent re-renders on unrelated changes\n    return prevProps.enableCodeApply === nextProps.enableCodeApply;\n});\n\n// Set display name for debugging\nConversation.displayName = 'Conversation';\n\nexport default Conversation;\n"],"names":["EditSection","_ref","index","isInline","currentMessages","currentConversationId","addMessageToConversation","setIsStreaming","setConversations","streamingConversations","addStreamingConversation","streamedContentMap","setStreamedContentMap","removeStreamingConversation","editingMessageIndex","setEditingMessageIndex","useChatContext","editedMessage","setEditedMessage","useState","content","checkedKeys","useFolderContext","textareaRef","useRef","TextArea","Input","isEditing","useEffect","current","setTimeout","focus","_jsxs","children","style","width","display","justifyContent","alignItems","marginBottom","_jsx","className","Space","Tooltip","title","Button","icon","CloseOutlined","onClick","handleCancel","size","SaveOutlined","handleSave","prev","map","conv","id","updatedMessages","messages","msg","i","_timestamp","Date","now","_version","CheckOutlined","async","Map","truncatedMessages","slice","_edited","_truncatedAfter","_editInProgress","result","sendPayload","convertKeysToStrings","has","role","error","console","type","ref","autoFocus","minHeight","resize","value","onChange","e","target","autoSize","minRows","maxRows","placeholder","EditOutlined","handleEdit","ModelChangeNotification","memo","previousModel","newModel","changeKey","isDarkMode","useTheme","styles","container","padding","borderRadius","backgroundColor","border","marginTop","boxShadow","fontSize","marginRight","color","text","fontWeight","modelName","prevProps","nextProps","displayName","Conversation","enableCodeApply","isTopToBottom","isLoadingConversation","isStreaming","userHasScrolled","updateProcessingState","toggleMessageMute","setQuestion","useQuestionContext","visibilityRef","conversationStreamingState","useMemo","isCurrentlyStreaming","hasStreamedContent","get","streamedContent","shouldVirtualize","length","renderMessage","useCallback","_ref2","actualIndex","muted","displayMessages","reverse","renderedCountRef","renderedSystemMessagesRef","Set","processedModelChangesRef","conversationId","Math","abs","isDebugLoggingEnabled","debugLog","messageCount","previousCount","isVisible","displayOrder","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","threshold","disconnect","handleModelChange","event","detail","add","modelChange","from","to","window","addEventListener","clear","removeEventListener","loadingText","showProgressiveLoading","isInitialLoading","shouldShowRetry","message","isLastMessage","nextIndex","nextMessage","hasNextMessage","renderRetryButton","RedoOutlined","messagesToSend","filter","state","renderMuteButton","MutedOutlined","SoundOutlined","minWidth","height","renderResubmitButton","position","top","left","right","bottom","zIndex","Spin","tip","opacity","margin","gap","nextActualIndex","needsResponse","_Fragment","MarkdownRenderer","markdown","List","itemCount","itemSize","textAlign"],"sourceRoot":""}