"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[5400],{777:function(e,t,r){r.d(t,{S:function(){return p}});var n=r(68248),s=r(76118),i=r(27757),a=r(79081),o=r(74060),u=r(73408);var c={name:"1gyqtrv",styles:"width:min-content;max-width:100%"},l={name:"1h52dri",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap"};const d=({objectKey:e,value:t})=>{const{theme:r}=(0,i.u)(),d=(0,s.isString)(t)?t:JSON.stringify(t);return(0,u.Y)(a.T,{content:d,componentId:"shared.model-trace-explorer.expectation-value-preview-tooltip",children:(0,u.Y)(o.Tag,{color:"indigo",componentId:"shared.model-trace-explorer.expectation-array-item-tag",css:c,children:(0,u.FD)(i.T.Text,{css:l,children:[e&&(0,u.FD)(i.T.Text,{bold:!0,css:(0,n.AH)({marginRight:r.spacing.xs},""),children:[e,":"]}),d]})})})},p=({parsedValue:e,singleLine:t=!1})=>{const{theme:r}=(0,i.u)();return(0,s.isNil)(e)?null:Array.isArray(e)?t?(0,u.Y)(d,{value:e}):(0,u.Y)("div",{css:(0,n.AH)({display:"flex",flexDirection:"column",gap:r.spacing.sm},""),children:e.map(((e,t)=>(0,u.Y)(d,{value:e},t)))}):(0,s.isObject)(e)?t?(0,u.Y)(d,{value:e}):(0,u.Y)("div",{css:(0,n.AH)({display:"flex",flexDirection:"column",gap:r.spacing.sm},""),children:Object.entries(e).map((([e,t])=>(0,u.Y)(d,{objectKey:e,value:t},e)))}):(0,u.Y)(d,{value:e})}},13433:function(e,t,r){r.d(t,{G3:function(){return d},N5:function(){return l},TJ:function(){return m},_A:function(){return p},aG:function(){return u},bU:function(){return c}});var n=r(59930),s=r.n(n),i=r(76118),a=r(33120),o=r(86125);const u=({traceId:e,assessmentId:t})=>(0,a.ff)(`/ajax-api/3.0/mlflow/traces/${e}/assessments/${t}`,"DELETE"),c=({payload:e})=>(0,a.ff)(`/ajax-api/3.0/mlflow/traces/${e.assessment.trace_id}/assessments`,"POST",e),l=({traceId:e})=>(0,a.ff)(`/ajax-api/3.0/mlflow/traces/${e}`),d=({traceId:e,assessmentId:t,payload:r})=>(0,a.ff)(`/ajax-api/3.0/mlflow/traces/${e}/assessments/${t}`,"PATCH",r),p={searchTracesV4:async({signal:e,orderBy:t,locations:r,filter:n})=>{var s;const i={locations:r,filter:n,max_results:1e3,order_by:t},o=await(0,a.ff)((0,a.we)("ajax-api/4.0/mlflow/traces/search"),"POST",i,e);return null!==(s=null===o||void 0===o?void 0:o.trace_infos)&&void 0!==s?s:[]},getBatchTracesV4:async({traceIds:e,traceLocation:t})=>{const r=(0,i.isString)(t)?t:(0,o.nr)(t),n=(0,a.we)(`ajax-api/4.0/mlflow/traces/${r}/batchGet`),s=new URLSearchParams;for(const i of e)s.append("trace_ids",i);const u=`${n}?${s.toString()}`;return await(0,a.ff)(u,"GET")},getTraceInfoV4:({traceId:e,traceLocation:t})=>{const r=(0,i.isString)(t)?t:(0,o.nr)(t),n=`${(0,a.we)(`ajax-api/4.0/mlflow/traces/${r}/${e}/info`)}?${(new URLSearchParams).toString()}`;return(0,a.ff)(n)},createAssessmentV4:({payload:{assessment:e},traceLocation:t})=>{s()(t,"Trace location is required for creating assessment via V4 API");const r=(0,i.isString)(t)?t:(0,o.nr)(t);s()(r,"Trace location could not be resolved");const n=e,u=new URLSearchParams,c=`${(0,a.we)(`ajax-api/4.0/mlflow/traces/${r}/${e.trace_id}/assessments`)}?${u.toString()}`;return(0,a.ff)(c,"POST",n)},updateAssessmentV4:({traceId:e,assessmentId:t,payload:r,traceLocation:n})=>{const{assessment:u,update_mask:c}=r;s()(n,"Trace location is required for creating assessment via V4 API");const l=(0,i.isString)(n)?n:(0,o.nr)(n);s()(l,"Trace location could not be resolved");const d=new URLSearchParams;d.append("update_mask",c);const p=`${(0,a.we)(`ajax-api/4.0/mlflow/traces/${l}/${e}/assessments/${t}`)}?${d.toString()}`;return(0,a.ff)(p,"PATCH",u)},deleteAssessmentV4:({traceId:e,sqlWarehouseId:t,assessmentId:r,traceLocation:n})=>{const s=new URLSearchParams,i=(0,o.nr)(n),u=`${(0,a.we)(`ajax-api/4.0/mlflow/traces/${i}/${e}/assessments/${r}`)}?${s.toString()}`;return(0,a.ff)(u,"DELETE")},setTraceTagV4:async({traceLocation:e,tag:t,traceId:r})=>{const n=(0,o.nr)(e),s=`${(0,a.we)(`ajax-api/4.0/mlflow/traces/${n}/${r}/tags`)}?${(new URLSearchParams).toString()}`;return(0,a.ff)(s,"PATCH",t)},deleteTraceTagV4:async({tagKey:e,traceId:t,traceLocation:r})=>{const n=(0,o.nr)(r),s=`${(0,a.we)(`ajax-api/4.0/mlflow/traces/${n}/${t}/tags/${encodeURIComponent(e)}`)}?${(new URLSearchParams).toString()}`;return(0,a.ff)(s,"DELETE")}},m={setTraceTagV3:async({tag:e,traceId:t})=>{const r=(0,a.we)(`ajax-api/3.0/mlflow/traces/${t}/tags`);return(0,a.ff)(r,"PATCH",e)},deleteTraceTagV3:async({tagKey:e,traceId:t})=>{const r=(0,a.we)(`ajax-api/3.0/mlflow/traces/${t}/tags`),n=new URLSearchParams;n.append("key",e);const s=`${r}?${n.toString()}`;return(0,a.ff)(s,"DELETE")}}},16333:function(e,t,r){r.d(t,{Ld:function(){return n.L}});r(37750),r(44072);var n=r(38815)},21636:function(e,t,r){r.d(t,{$E:function(){return c},AA:function(){return u},Bt:function(){return s},gK:function(){return i},kj:function(){return n},n2:function(){return o},zZ:function(){return a}});const n="yellow500",s="yellow200",i="mlflow.assessment.scorerTraceId",a="mlflow.assessment.judgeCost",o="mlflow.trace.session",u="mlflow.source.name",c="mlflow.source.type"},23125:function(e,t,r){r.r(t),r.d(t,{AssessmentSchemaContextProvider:function(){return x.I},CodeSnippetRenderMode:function(){return T.cC},ExpectationValuePreview:function(){return s.S},INFERENCE_TABLE_RESPONSE_COLUMN_KEY:function(){return T.O5},INFERENCE_TABLE_TRACE_COLUMN_KEY:function(){return T.So},MLFLOW_TRACE_SCHEMA_VERSION_KEY:function(){return T.jQ},ModelIconType:function(){return T.Dy},ModelSpanType:function(){return T.UG},ModelTraceExplorer:function(){return n.a},ModelTraceExplorerOSSNotebookRenderer:function(){return g},ModelTraceExplorerResizablePane:function(){return h.A},ModelTraceExplorerSkeleton:function(){return i.F},ModelTraceExplorerUpdateTraceContextProvider:function(){return k},ModelTraceSpanType:function(){return T.VZ},SESSION_ID_METADATA_KEY:function(){return y.n2},SOURCE_NAME_METADATA_KEY:function(){return y.AA},SOURCE_TYPE_METADATA_KEY:function(){return y.$E},SingleChatTurnMessages:function(){return C.y},TracesServiceV4:function(){return A._A},getAssessmentValue:function(){return N.e},getModelTraceId:function(){return v.MF},getModelTraceSpanEndTime:function(){return v.jE},getModelTraceSpanId:function(){return v.wH},getModelTraceSpanParentId:function(){return v.cp},getModelTraceSpanStartTime:function(){return v.CR},getTraceArtifact:function(){return w.g},isModelTrace:function(){return v.Lq},isV3ModelTraceInfo:function(){return v.gD},isV3ModelTraceSpan:function(){return v.UZ},parseTraceUri:function(){return v.Tt},shouldEnableTracesTabLabelingSchemas:function(){return E.K_},shouldUseTracesV4API:function(){return E.F9},tryDeserializeAttribute:function(){return v.xD},useUnifiedTraceTagsModal:function(){return O}});var n=r(20586),s=r(777),i=r(15929),a=r(68248),o=r(46709),u=r(27757),c=r(74060),l=r(42747),d=r(73408);const p=(e,t)=>{const r=new URLSearchParams;return r.append("selectedTraceId",e),r.append("compareRunsMode","TRACES"),`/#/experiments/${t}?${r.toString()}`};var m={name:"1elrbzk",styles:"width:calc(100% - 2px)"},f={name:"inxa61",styles:"flex:1;overflow:hidden"};const g=()=>{const e=(0,o.useMemo)((()=>new URLSearchParams(window.location.search).getAll("trace_id")),[]),t=(0,o.useMemo)((()=>new URLSearchParams(window.location.search).getAll("experiment_id")),[]),[r,s]=(0,o.useState)(e.length>0?0:null),[i,g]=(0,o.useState)(null),[h,v]=(0,o.useState)(!0),[y,E]=(0,o.useState)(null),{theme:x}=(0,u.u)();return(0,o.useEffect)((()=>{(async()=>{if(null===r)return;v(!0);const t=e[r],n=await(0,w.g)(t);"string"===typeof n?E(n):g(n),v(!1)})()}),[r,e]),0===e.length||null===r?null:h?(0,d.Y)("div",{css:m,children:(0,d.Y)(u.T.Text,{color:"secondary",children:(0,d.Y)(l.sA,{id:"JJFZ1V",defaultMessage:"Fetching trace data..."})})}):i?(0,d.FD)("div",{css:(0,a.AH)({display:"flex",flexDirection:"column",border:`1px solid ${x.colors.border}`,height:"calc(100% - 2px)"},""),children:[(0,d.FD)("div",{css:(0,a.AH)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${x.spacing.xs}px ${x.spacing.md}px`},""),children:[(0,d.FD)("div",{css:(0,a.AH)({display:"flex",alignItems:"center",gap:x.spacing.sm},""),children:[(0,d.Y)(u.T.Title,{level:4,withoutMargins:!0,children:"MLflow Trace UI"}),(0,d.Y)(c.InfoTooltip,{componentId:"mlflow.notebook.trace-ui-info",iconTitle:"More information",maxWidth:400,content:(0,d.Y)(l.sA,{id:"LED2z5",defaultMessage:"To disable or enable this display, call {disableFunction} or {enableFunction} and re-run the cell",values:{disableFunction:(0,d.Y)("code",{children:"mlflow.tracing.disable_notebook_display()"}),enableFunction:(0,d.Y)("code",{children:"mlflow.tracing.enable_notebook_display()"})}})}),(0,d.Y)(u.T.Link,{componentId:"mlflow.notebook.trace-ui-learn-more-link",href:"https://mlflow.org/docs/latest/llms/tracing/index.html?ref=jupyter-notebook-widget",openInNewTab:!0,title:"Learn More",children:(0,d.Y)(l.sA,{id:"uIY1qq",defaultMessage:"Learn More"})})]}),(0,d.Y)(u.T.Link,{componentId:"mlflow.notebook.trace-ui-see-in-mlflow-link",href:p(e[r],t[r]),openInNewTab:!0,title:"View in MLflow UI",children:(0,d.Y)(l.sA,{id:"4NyhOm",defaultMessage:"View in MLflow UI"})})]}),e.length>1&&(0,d.Y)(c.Pagination,{componentId:"mlflow.notebook.pagination",currentPageIndex:r+1,dangerouslySetAntdProps:{showQuickJumper:!0},numTotal:e.length,onChange:e=>s(e-1),pageSize:1,style:{marginBottom:x.spacing.sm,paddingLeft:x.spacing.sm,paddingRight:x.spacing.sm}}),(0,d.Y)("div",{css:f,children:(0,d.Y)(n.a,{modelTrace:i,initialActiveView:"detail"})})]}):(0,d.Y)("div",{css:(0,a.AH)({paddingTop:x.spacing.md,width:"calc(100% - 2px)"},""),children:(0,d.Y)(c.Empty,{image:(0,d.Y)(u.k,{}),description:(0,d.FD)(d.FK,{children:[(0,d.Y)(u.T.Paragraph,{children:(0,d.Y)(l.sA,{id:"UD4Z+e",defaultMessage:"An error occurred while attempting to fetch trace data (ID: {traceId}). Please ensure that the MLflow tracking server is running, and that the trace data exists. Error details:",values:{traceId:e[r]}})}),y&&(0,d.Y)(u.T.Paragraph,{children:y})]}),title:(0,d.Y)(l.sA,{id:"md81Lo",defaultMessage:"Error"})})})};var h=r(26059),v=r(86125),y=r(21636),E=r(27882),x=r(57248),T=r(94664),w=r(97311),N=r(33145),A=r(13433),S=r(76118),R=r(884),b=r(79081),I=r(85786),_=r(61060);var M=r(90828);const L={key:"",value:""},O=({componentIdPrefix:e,onSuccess:t,onClose:r})=>{const n=`${e}.tag-assignment-modal`,s=(0,l.tz)(),[i,p]=(0,o.useState)(void 0),m=(0,o.useMemo)((()=>i?(0,S.isArray)(i.tags)?i.tags.filter((({key:e})=>!e.startsWith(M.nt))):(0,S.isObject)(i.tags)?Object.entries(i.tags).map((([e,t])=>({key:e,value:String(t)}))).filter((({key:e})=>!e.startsWith(M.nt))):[]:[]),[i]),[f,g]=(0,o.useState)(!1),{theme:h}=(0,u.u)(),y=(0,R.mN)({mode:"onChange"}),x=(0,I.$W)({name:"tags",emptyValue:{key:"",value:""},keyProperty:"key",valueProperty:"value",form:y,defaultValues:m}),T=()=>{g(!1),p(void 0),y.reset({tags:[L]}),null===r||void 0===r||r()},{mutate:w,isLoading:N,error:O}=(({onSuccess:e})=>(0,_.n)({mutationFn:async({deletedTags:e,modelTraceInfo:t,newTags:r})=>{var n;if((0,E.F9)()&&(0,v.gD)(t)&&t.trace_location&&(0,v.ko)(t)){const n=r.map((e=>A._A.setTraceTagV4({tag:e,traceLocation:t.trace_location,traceId:t.trace_id}))),s=e.map((e=>A._A.deleteTraceTagV4({tagKey:e.key,traceLocation:t.trace_location,traceId:t.trace_id})));return Promise.all([...n,...s])}const s=(0,v.gD)(t)?t.trace_id:null!==(n=t.request_id)&&void 0!==n?n:"",i=r.map((e=>A.TJ.setTraceTagV3({tag:e,traceId:s}))),a=e.map((e=>A.TJ.deleteTraceTagV3({tagKey:e.key,traceId:s})));return Promise.all([...i,...a])},onSuccess:e}))({onSuccess:()=>{T(),null===t||void 0===t||t()}});return{TagAssignmentModal:(0,d.FD)(b.d,{componentId:n,title:(0,d.Y)(l.sA,{id:"xyEaut",defaultMessage:"Add tags"}),visible:f,destroyOnClose:!0,onCancel:T,footer:(0,d.FD)(d.FK,{children:[(0,d.Y)(u.B,{componentId:`${n}.submit-button`,onClick:T,disabled:N,children:(0,d.Y)(l.sA,{id:"Uf0z53",defaultMessage:"Cancel"})}),(0,d.Y)(u.B,{componentId:`${n}.submit-button`,type:"primary",onClick:y.handleSubmit((async({tags:e})=>{var t,r;if(!i)return;const n=e.filter((({key:e})=>Boolean(e))),s=null!==(t=n.filter((e=>!(null!==m&&void 0!==m&&m.some((t=>t.key===e.key&&t.value===e.value))))))&&void 0!==t?t:[],a=null!==(r=null===m||void 0===m?void 0:m.filter((e=>!n.some((t=>t.key===e.key)))))&&void 0!==r?r:[];w({newTags:s,deletedTags:a,modelTraceInfo:i})})),loading:N,disabled:N,children:(0,d.Y)(l.sA,{id:"r7aGM3",defaultMessage:"Save"})})]}),children:[O&&(0,d.Y)(c.Alert,{type:"error",message:O instanceof Error?O.message:String(O),componentId:`${n}.error`,closable:!1,css:(0,a.AH)({marginBottom:h.spacing.sm},"")}),(0,d.FD)(I.Es,{...x,children:[(0,d.FD)(I.qd,{children:[(0,d.Y)(I.C2,{children:(0,d.Y)(l.sA,{id:"eLgTRT",defaultMessage:"Key"})}),(0,d.Y)(I.C2,{children:(0,d.Y)(l.sA,{id:"sBsRzu",defaultMessage:"Value"})})]}),x.fields.map(((e,t)=>(0,d.FD)(I.qd,{children:[(0,d.Y)(I.R0,{index:t,rules:{validate:{unique:e=>{const r=x.getTagsValues();return(null===r||void 0===r?void 0:r.findIndex((t=>t.key===e)))===t||s.formatMessage({id:"JPd7WA",defaultMessage:"Key must be unique"})},required:e=>{var r;const n=x.getTagsValues();return!(null!==n&&void 0!==n&&null!==(r=n.at(t))&&void 0!==r&&r.value&&!e)||s.formatMessage({id:"XG8dcL",defaultMessage:"Key is required if value is present"})}}}}),(0,d.Y)(I.tP,{index:t}),(0,d.Y)(I.ki,{index:t,componentId:`${n}.remove-button`})]},e.id)))]})]}),showTagAssignmentModal:e=>{p(e),g(!0)},hideTagAssignmentModal:T}},P=o.createContext({sqlWarehouseId:void 0,modelTraceInfo:void 0}),k=({sqlWarehouseId:e,modelTraceInfo:t,children:r})=>{const n=(0,o.useMemo)((()=>({sqlWarehouseId:e,modelTraceInfo:t})),[e,t]);return(0,d.Y)(P.Provider,{value:n,children:r})};var C=r(81813)},26059:function(e,t,r){var n=r(68248),s=r(76118),i=r(46709),a=r(25637),o=r(27757),u=r(93846),c=r(73408);var l={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},d={name:"1gtrael",styles:"display:flex;flex:1;overflow:hidden;flex-direction:row"},p={name:"kjqqaz",styles:"width:0;position:relative"};const m=(0,i.forwardRef)((({initialRatio:e,paneWidth:t,setPaneWidth:r,leftChild:m,leftMinWidth:f,rightChild:g,rightMinWidth:h},v)=>{var y;const[E,x]=(0,i.useState)(!1),T=(0,i.useRef)(null),w=null===(y=(0,u.wY)({ref:T}))||void 0===y?void 0:y.width,N=(null!==w&&void 0!==w?w:1/0)-h,A=(0,i.useRef)(e),{theme:S}=(0,o.u)(),R=(0,i.useCallback)((e=>{w&&(A.current=e/w)}),[w]);return(0,i.useImperativeHandle)(v,(()=>({updateRatio:R}))),(0,i.useLayoutEffect)((()=>{w&&r((0,s.clamp)(w*A.current,f,N))}),[w,N,f,h,r]),(0,c.FD)("div",{ref:T,css:d,children:[E&&(0,c.Y)(n.mL,{styles:l}),(0,c.Y)(a.ResizableBox,{axis:"x",width:t,css:(0,n.AH)({display:"flex",flex:`0 0 ${t}px`},""),handle:(0,c.Y)("div",{css:p,children:(0,c.Y)("div",{css:(0,n.AH)({position:"relative",width:S.spacing.sm,marginLeft:-S.spacing.xs,minHeight:"100%",cursor:"ew-resize",backgroundColor:"rgba(0,0,0,0)",zIndex:1,":hover":{backgroundColor:"rgba(0,0,0,0.1)"}},"")})}),onResize:(e,{size:t})=>{const n=(0,s.clamp)(t.width,f,N);r(n),w&&(A.current=n/w)},onResizeStart:()=>x(!0),onResizeStop:()=>x(!1),minConstraints:[f,1/0],maxConstraints:[N,1/0],children:m}),g]})}));t.A=m},27882:function(e,t,r){r.d(t,{F9:function(){return i},K_:function(){return a},T9:function(){return s},ny:function(){return n}});const n=()=>!1,s=()=>1e9,i=()=>!1,a=()=>!1},30676:function(e,t,r){r.d(t,{z7:function(){return N},VE:function(){return x}});var n=r(76386),s=r(91215),i=r(49693),a=r(94066),o=r(3491),u=r(20515),c=r(27962),l=r(54921),d=r(94811),p=r(52394),m=r(76118),f=r(73408),g=(r(46709),r(16333)),h=r(74060),v=r(27757);var y={name:"1739oy8",styles:"z-index:1"};function E({tooltipMessage:e,...t}){const r=y;return(0,f.Y)(h.LegacyTooltip,{title:e,children:(0,f.Y)(v.B,{componentId:"codegen_web-shared_src_snippet_actions_snippetactionbutton.tsx_33",...t,css:r})})}function x({copyText:e,onClick:t,...r}){const{actionIcon:n,tooltipMessage:s,copy:i}=(0,g.Ld)(e);return(0,f.Y)(E,{tooltipMessage:s,icon:n,onClick:e=>{i(),null===t||void 0===t||t(e)},...r})}n.A.registerLanguage("sql",l.A),n.A.registerLanguage("java",i.A),n.A.registerLanguage("python",u.A),n.A.registerLanguage("go",s.A),n.A.registerLanguage("javascript",a.A),n.A.registerLanguage("yaml",c.A),n.A.registerLanguage("json",o.A);const T="24px",w={light:p.A,duotoneDark:d.A};function N({theme:e="light",language:t,actions:r,style:s,children:i,showLineNumbers:a,lineNumberStyle:o,wrapLongLines:u,wrapLines:c,lineProps:l,PreTag:d}){const p={border:"none",borderRadius:0,margin:0,padding:T,...s};return(0,f.Y)(n.A,{showLineNumbers:a,lineNumberStyle:o,language:t,style:w[e],customStyle:p,codeTagProps:{style:(0,m.pick)(s,"backgroundColor")},lineProps:l,wrapLongLines:u,wrapLines:c,PreTag:d,children:i})}},31655:function(e,t,r){r.d(t,{WE:function(){return n}});const n=()=>!1},36476:function(e,t,r){r.d(t,{a$:function(){return u}});var n=r(40724);let s=function(e){return e.UserInputError="UserInputError",e.UnexpectedSystemStateError="UnexpectedSystemStateError",e.ServerError="ServerError",e.SessionError="SessionError",e.NetworkError="NetworkError",e.ApplicationError="ApplicationError",e.UnknownError="UnknownError",e}({}),i=function(e){return e.BadRequestError="BadRequestError",e.DatasetRunNotFoundError="DatasetRunNotFoundError",e.FormValidationError="FormInputError",e.GenericNetworkRequestError="GenericNetworkRequestError",e.GraphQLGenericError="GraphQLGenericError",e.InternalServerError="InternalServerError",e.NotFoundError="NotFoundError",e.PermissionError="PermissionError",e.RateLimitedError="RateLimitedError",e.RouteNotFoundError="RouteNotFoundError",e.ServiceUnavailableError="ServiceUnavailableError",e.UnauthorizedError="UnauthorizedError",e.UnknownError="UnknownError",e}({});var a=r(73408);class o extends Error{constructor(e,t){super(e),this.errorLogType=void 0,this.errorName=void 0,this.displayMessage=void 0,this.isUserError=!1}}const u=e=>e instanceof o?e:e instanceof Error&&("networkError"in e||"graphQLErrors"in e)?c(e):e instanceof Response?l(e):new T(e);const c=e=>{return"networkError"in e&&((t=e.networkError)instanceof Error&&t.hasOwnProperty("response"))?l(e.networkError.response,e.networkError):new m(e);var t},l=(e,t)=>{const r=d.getNetworkRequestErrorDetailsFromResponse(e);switch(e.status){case 400:return new f(r,t);case 401:return new x(r,t);case 403:return new v(r,t);case 404:return new h(r,t);case 429:return new y(r,t);case 500:return new g(r,t);case 503:return new E(r,t);default:return new p(r,t)}};class d extends o{constructor(e,t,r){super(e,r),this.status=void 0,this.response=void 0,this.status=t.status,this.response=t.response}}d.getNetworkRequestErrorDetailsFromResponse=e=>({status:e.status});class p extends d{constructor(e,t){super("A network error occurred.",e,t),this.errorLogType=s.ServerError,this.errorName=i.GenericNetworkRequestError,this.displayMessage=(0,a.Y)(n.A,{id:"/CaNq/",defaultMessage:"A network error occurred."})}}class m extends o{constructor(e){super("A GraphQL error occurred.",e),this.errorLogType=s.ApplicationError,this.errorName=i.GraphQLGenericError,this.displayMessage=(0,a.Y)(n.A,{id:"PPPbd+",defaultMessage:"A GraphQL error occurred."})}}class f extends d{constructor(e,t){super("The request was invalid.",e,t),this.errorLogType=s.UserInputError,this.errorName=i.BadRequestError,this.displayMessage=(0,a.Y)(n.A,{id:"Id2mFI",defaultMessage:"The request was invalid."})}}class g extends d{constructor(e,t){super("Internal server error",e,t),this.errorLogType=s.ServerError,this.errorName=i.InternalServerError,this.displayMessage=(0,a.Y)(n.A,{id:"nY1YrF",defaultMessage:"Internal server error"})}}class h extends d{constructor(e,t){super("The requested resource was not found.",e,t),this.errorLogType=s.UserInputError,this.errorName=i.NotFoundError,this.displayMessage=(0,a.Y)(n.A,{id:"R3Lb6z",defaultMessage:"The requested resource was not found."}),this.isUserError=!0}}class v extends d{constructor(e,t){super("You do not have permission to access this resource.",e,t),this.errorLogType=s.UnexpectedSystemStateError,this.errorName=i.PermissionError,this.displayMessage=(0,a.Y)(n.A,{id:"G6IQTa",defaultMessage:"You do not have permission to access this resource."}),this.isUserError=!0}}class y extends d{constructor(e,t){super("This request exceeds the maximum queries per second limit. Please wait and try again.",e,t),this.errorLogType=s.ServerError,this.errorName=i.RateLimitedError,this.displayMessage=(0,a.Y)(n.A,{id:"5PlfiT",defaultMessage:"This request exceeds the maximum queries per second limit. Please wait and try again."})}}class E extends d{constructor(e,t){super("Internal server error",e,t),this.errorLogType=s.ServerError,this.errorName=i.InternalServerError,this.displayMessage=(0,a.Y)(n.A,{id:"/XlqZA",defaultMessage:"Service unavailable error"})}}class x extends d{constructor(e,t){super("This request exceeds the maximum queries per second limit. Please wait and try again.",e,t),this.errorLogType=s.SessionError,this.errorName=i.UnauthorizedError,this.displayMessage=(0,a.Y)(n.A,{id:"gqfk5C",defaultMessage:"User is not authorized."})}}class T extends o{constructor(e){super("An unknown error occurred.",e),this.errorLogType=s.UnknownError,this.errorName=i.UnknownError,this.displayMessage=(0,a.Y)(n.A,{id:"bKSd3c",defaultMessage:"An unknown error occurred."})}}},44072:function(e,t,r){r(46709),r(38815)},53637:function(e,t,r){r(46709)},57248:function(e,t,r){r.d(t,{I:function(){return u},a:function(){return c}});var n=r(46709),s=r(76118),i=r(33145);var a=r(73408);const o=(0,n.createContext)({schemas:[]}),u=({children:e,assessments:t})=>{const r=(0,n.useMemo)((()=>(e=>{const t={},r={};for(const n of e){if(t[n.assessment_name])continue;const e=(0,i.e)(n);if((0,s.isNil)(e)){r[n.assessment_name]={name:n.assessment_name,assessmentType:"feedback"in n?"feedback":"expectation",dataType:"boolean"};continue}const a="expectation"in n&&"serialized_value"in n.expectation;let o;switch(typeof e){case"string":o=a?"json":"string";break;case"boolean":default:o="boolean";break;case"number":o="number"}t[n.assessment_name]={name:n.assessment_name,assessmentType:"feedback"in n?"feedback":"expectation",dataType:o}}for(const[n,s]of Object.entries(r))n in t||(t[n]=s);return Object.values(t)})(t)),[t]),u=(0,n.useMemo)((()=>({schemas:r})),[r]);return(0,a.Y)(o.Provider,{value:u,children:e})},c=()=>(0,n.useContext)(o)},60284:function(e,t,r){var n=r(91105);class s{static get rootRoute(){return(0,n.Oz)("/")}static get experimentObservatory(){return(0,n.Oz)("/experiments")}static get experimentPage(){return(0,n.Oz)("/experiments/:experimentId")}static get experimentPageTabRuns(){return(0,n.Oz)("/experiments/:experimentId/runs")}static get experimentPageTabTraces(){return(0,n.Oz)("/experiments/:experimentId/traces")}static get experimentPageTabChatSessions(){return(0,n.Oz)("/experiments/:experimentId/chat-sessions")}static get experimentPageTabSingleChatSession(){return(0,n.Oz)("/experiments/:experimentId/chat-sessions/:sessionId")}static get experimentPageTabModels(){return(0,n.Oz)("/experiments/:experimentId/models")}static get experimentPageTabEvaluationRuns(){return(0,n.Oz)("/experiments/:experimentId/evaluation-runs")}static get experimentPageTabDatasets(){return(0,n.Oz)("/experiments/:experimentId/datasets")}static get experimentLoggedModelDetailsPageTab(){return(0,n.Oz)("/experiments/:experimentId/models/:loggedModelId/:tabName")}static get experimentLoggedModelDetailsPage(){return(0,n.Oz)("/experiments/:experimentId/models/:loggedModelId")}static get experimentPageTabbed(){return(0,n.Oz)("/experiments/:experimentId/:tabName")}static get experimentPageSearch(){return(0,n.Oz)("/experiments/:experimentId/s")}static get runPage(){return(0,n.Oz)("/experiments/:experimentId/runs/:runUuid")}static get runPageWithTab(){return(0,n.Oz)("/experiments/:experimentId/runs/:runUuid/*")}static get runPageWithArtifact(){return(0,n.Oz)("/experiments/:experimentId/runs/:runUuid/artifactPath/*")}static get experimentPromptsList(){return(0,n.Oz)("/experiments/:experimentId/prompts")}static get experimentPrompt(){return(0,n.Oz)("/experiments/:experimentId/prompts/:promptName")}static get runPageDirect(){return(0,n.Oz)("/runs/:runUuid")}static get metricPage(){return(0,n.Oz)("/metric/*")}static get compareRuns(){return(0,n.Oz)("/compare-runs")}static get compareExperiments(){return(0,n.Oz)("/compare-experiments")}static get compareExperimentsSearch(){return(0,n.Oz)("/compare-experiments/:searchString")}static get promptsPage(){return(0,n.Oz)("/prompts")}static get promptDetailsPage(){return(0,n.Oz)("/prompts/:promptName")}}class i{static get rootRoute(){return s.rootRoute}static get experimentsObservatoryRoute(){return s.experimentObservatory}static get experimentPageRoute(){return s.experimentPage}static get experimentPageSearchRoute(){return s.experimentPageSearch}static getExperimentPageRoute(e,t=!1,r){const i=(0,n.tW)(s.experimentPage,{experimentId:e});return r?`${i}?viewStateShareKey=${r}`:t?`${i}?isComparingRuns=true`:i}static getExperimentPageTracesTabRoute(e){return`${i.getExperimentPageRoute(e)}/traces`}static getExperimentPageTabRoute(e,t){return(0,n.tW)(s.experimentPageTabbed,{experimentId:e,tabName:t})}static getExperimentLoggedModelDetailsPage(e,t){return(0,n.tW)(s.experimentLoggedModelDetailsPage,{experimentId:e,loggedModelId:t})}static getExperimentLoggedModelDetailsPageRoute(e,t,r){return r?(0,n.tW)(s.experimentLoggedModelDetailsPageTab,{experimentId:e,loggedModelId:t,tabName:r}):(0,n.tW)(s.experimentLoggedModelDetailsPage,{experimentId:e,loggedModelId:t})}static searchRunsByUser(e,t){return`${(0,n.tW)(s.experimentPage,{experimentId:e})}?searchFilter=${encodeURIComponent(`attributes.user_id = '${t}'`)}`}static searchRunsByLifecycleStage(e,t){return`${(0,n.tW)(s.experimentPage,{experimentId:e})}?lifecycleFilter=${t}`}static getRunPageRoute(e,t,r=null){return r?this.getRunPageTabRoute(e,t,["artifacts",r].join("/")):(0,n.tW)(s.runPage,{experimentId:e,runUuid:t})}static getDirectRunPageRoute(e){return(0,n.tW)(s.runPageDirect,{runUuid:e})}static getRunPageTabRoute(e,t,r){return(0,n.tW)(s.runPageWithTab,{experimentId:e,runUuid:t,"*":r})}static getMetricPageRoute(e,t,r,i=null,a={},o="step",u=!1,c=1,l=!1,d=[],p=[]){const m=i||[t],f=u?"log":"linear",g=`?runs=${JSON.stringify(e)}&metric=${encodeURIComponent(JSON.stringify(t))}&experiments=${JSON.stringify(r)}&plot_metric_keys=${encodeURIComponent(JSON.stringify(m))}&plot_layout=${JSON.stringify(a)}&x_axis=${o}&y_axis_scale=${f}&line_smoothness=${c}&show_point=${l}&deselected_curves=${JSON.stringify(d)}&last_linear_y_axis_range=${JSON.stringify(p)}`;return`${(0,n.tW)(s.metricPage)}${g}`}static getCompareRunPageRoute(e,t){const r=`?runs=${JSON.stringify(e)}&experiments=${JSON.stringify(t)}`;return`${(0,n.tW)(s.compareRuns)}${r}`}static get compareRunPageRoute(){return s.compareRuns}static get compareExperimentsPageRoute(){return s.compareExperiments}static getCompareExperimentsPageRoute(e){const t=`?experiments=${JSON.stringify(e.slice().sort())}`;return`${(0,n.tW)(s.compareExperimentsSearch,{searchString:"s"})}${t}`}static get promptsPageRoute(){return s.promptsPage}static getPromptDetailsPageRoute(e){return(0,n.tW)(s.promptDetailsPage,{promptName:e})}}t.Ay=i},85786:function(e,t,r){r.d(t,{$W:function(){return c.$},C2:function(){return i.C},Es:function(){return n.E},R0:function(){return a.R},ki:function(){return u.k},qd:function(){return s.q},tP:function(){return o.t}});var n=r(51989),s=r(86916),i=r(89602),a=r(5029),o=r(63815),u=r(30679),c=r(21057)},86125:function(e,t,r){r.d(t,{BS:function(){return c},CL:function(){return H},CR:function(){return N},Hq:function(){return V},I$:function(){return z},LS:function(){return p},Lq:function(){return L},MF:function(){return S},N7:function(){return $},OS:function(){return P},PC:function(){return G},Q0:function(){return U},Tt:function(){return Q},UZ:function(){return x},W0:function(){return k},ZI:function(){return B},bn:function(){return D},cp:function(){return w},f7:function(){return h},gD:function(){return E},g_:function(){return O},h8:function(){return W},ij:function(){return l},in:function(){return q},jE:function(){return A},jW:function(){return b},ko:function(){return Z},nr:function(){return X},ob:function(){return R},pQ:function(){return J},tC:function(){return d},vL:function(){return g},vl:function(){return C},wH:function(){return T},x0:function(){return j},xD:function(){return m}});var n=r(68248),s=r(76118),i=(r(46709),r(94664)),a=r(51847),o=r(27786),u=(r(81390),r(73408));const c="model-trace-info-v3",l=e=>{};function d(e){switch(e){case i.UG.LLM:return i.Dy.MODELS;case i.UG.CHAIN:return i.Dy.CHAIN;case i.UG.AGENT:return i.Dy.AGENT;case i.UG.TOOL:return i.Dy.WRENCH;case i.UG.CHAT_MODEL:return i.Dy.MODELS;case i.UG.RETRIEVER:return i.Dy.SEARCH;case i.UG.PARSER:return i.Dy.CODE;case i.UG.EMBEDDING:return i.Dy.NUMBERS;case i.UG.RERANKER:return i.Dy.SORT;case i.UG.MEMORY:return i.Dy.SAVE;case i.UG.FUNCTION:return i.Dy.FUNCTION;case i.UG.UNKNOWN:return i.Dy.UNKNOWN;default:return i.Dy.FUNCTION}}function p(e){switch(e){case i.UG.LLM:return"LLM";case i.UG.CHAIN:return"Chain";case i.UG.AGENT:return"Agent";case i.UG.TOOL:return"Tool";case i.UG.CHAT_MODEL:return"Chat model";case i.UG.RETRIEVER:return"Retriever";case i.UG.PARSER:return"Parser";case i.UG.EMBEDDING:return"Embedding";case i.UG.RERANKER:return"Reranker";case i.UG.MEMORY:return"Memory";case i.UG.FUNCTION:return"Function";case i.UG.UNKNOWN:return"Unknown";default:return e}}function m(e){try{return JSON.parse(e)}catch(t){return e}}const f=(e,t)=>{if(!t)return[];const r=[],n={inputs:null===e||void 0===e?void 0:e.inputs,outputs:null===e||void 0===e?void 0:e.outputs,attributes:null===e||void 0===e?void 0:e.attributes,events:null===e||void 0===e?void 0:e.events};return(0,s.map)(n,((n,s)=>{if("events"===s)return void r.push(...((e,t)=>{const r=e.events;if(!r)return[];const n=[];return r.forEach(((r,s)=>{const i=r.attributes;i&&Object.keys(i).forEach((a=>{const o=a.toLowerCase().includes(t),u=U(r.name,s,a);o&&n.push({span:e,section:"events",key:u,isKeyMatch:!0,matchIndex:0});const c=JSON.stringify(i[a]).toLowerCase().split(t).length-1;for(let t=0;t<c;t++)n.push({span:e,section:"events",key:u,isKeyMatch:!1,matchIndex:t})}))})),n})(e,t));O(n).forEach((n=>{n.key.toLowerCase().includes(t)&&r.push({span:e,section:s,key:n.key,isKeyMatch:!0,matchIndex:0});const i=n.value.toLowerCase().split(t).length-1;for(let t=0;t<i;t++)r.push({span:e,section:s,key:n.key,isKeyMatch:!1,matchIndex:t})}))})),r};function g(e,t,r){var n,s;const i=t.toLowerCase().trim(),a=Object.values(r.spanTypeDisplayState).every((e=>e));if(""===i&&a)return{filteredTreeNodes:[e],matches:[]};const o=null!==(n=e.children)&&void 0!==n?n:[],u=[],c=[];o.forEach((e=>{const{filteredTreeNodes:t,matches:n}=g(e,i,r);u.push(...t),c.push(...n)}));const l=(null!==(s=e.title)&&void 0!==s?s:"").toLowerCase(),d=f(e,i),p=d.length>0||l.includes(i),m=!e.type||r.spanTypeDisplayState[e.type],h=p&&m,v=u.length>0,y=$(e)>0;return h||r.showParents&&v||r.showExceptions&&y?{filteredTreeNodes:[{...e,children:u}],matches:d.concat(c)}:{filteredTreeNodes:u,matches:c}}function h(e,t){var r;if((0,s.isNil)(t)||(0,s.isNil)(e))return;if(e.key===t)return e;const n=null!==(r=e.children)&&void 0!==r?r:[];for(const s of n){const e=h(s,t);if(e)return e}}const v=(e,t,r,n,i,o)=>{var c,l,p,f,g,h,v,y;const E=m(null===(c=e.attributes)||void 0===c?void 0:c["mlflow.spanType"]),x=m(null===(l=e.attributes)||void 0===l?void 0:l["mlflow.spanInputs"]),S=m(null===(p=e.attributes)||void 0===p?void 0:p["mlflow.spanOutputs"]),R=w(e),b=T(e),I=null!==(f=i[b])&&void 0!==f?f:[];var _;R||I.push(...null!==(_=i[""])&&void 0!==_?_:[]);const M=m(null===(g=e.attributes)||void 0===g?void 0:g["mlflow.chat.messages"]),L=m(null===(h=e.attributes)||void 0===h?void 0:h["mlflow.message.format"]),O=((e,t,r,n)=>{var i,a;if(Array.isArray(e)&&e.every(z))return(0,s.compact)(e.map(B));const o=null!==(i=V(t,n))&&void 0!==i?i:[],u=null!==(a=V(r,n))&&void 0!==a?a:[];return 0!==o.length&&0!==u.length?o.concat(u):void 0})(M,x,S,L),P=((e,t)=>{var r;return Array.isArray(e)&&e.every(G)?e:Array.isArray(null===t||void 0===t?void 0:t.tools)&&null!==t&&void 0!==t&&null!==(r=t.tools)&&void 0!==r&&r.every(G)?t.tools:void 0})(m(null===(v=e.attributes)||void 0===v?void 0:v["mlflow.chat.tools"]),x),k=(0,s.mapValues)((0,s.omitBy)(e.attributes,((e,t)=>t.startsWith("mlflow."))),(e=>m(e))),C=e.events,U=(Number(N(e))-t)/1e3,D=(Number(null!==(y=A(e))&&void 0!==y?y:r)-t)/1e3;return{title:e.name,icon:(0,u.Y)(a.P,{type:d(E),hasException:$(e)>0,isRootSpan:!R}),type:E,key:b,start:U,end:D,children:n,inputs:x,outputs:S,attributes:k,events:C,chatMessageFormat:L,chatMessages:O,chatTools:P,parentId:R,assessments:I,traceId:o}},y=(e,t)=>{if(!e)return"";if(t&&e.length<16)try{return(e=>{const t=atob(e),r=t.length;let n="";for(let s=0;s<r;s++)n+=t.charCodeAt(s).toString(16).padStart(2,"0");return n})(e)}catch(r){return e}return e.startsWith("0x")?e.slice(2):e};function E(e){return"trace_location"in e}function x(e){return"start_time_unix_nano"in e}function T(e){var t,r,n;return x(e)?y(null!==(t=e.span_id)&&void 0!==t?t:"",!0):y(null!==(r=null===(n=e.context)||void 0===n?void 0:n.span_id)&&void 0!==r?r:"",!1)}function w(e){var t,r;return x(e)?y(null!==(t=e.parent_span_id)&&void 0!==t?t:"",!0):y(null!==(r=e.parent_id)&&void 0!==r?r:"",!1)}function N(e){return x(e)?Number(e.start_time_unix_nano):Number(e.start_time)}function A(e){return x(e)?Number(e.end_time_unix_nano):Number(e.end_time)}function S(e){var t;return E(e.info)?e.info.trace_id:null!==(t=e.info.request_id)&&void 0!==t?t:""}function R(e){var t,r;if(!E(e.info))return null;const n=Number(null===(t=e.info)||void 0===t||null===(r=t.trace_metadata)||void 0===r?void 0:r["mlflow.trace.sizeBytes"]);return(0,s.isNil)(n)||isNaN(n)?null:n}function b(e){var t,r;const n=S(e),o=null!==(t=null===(r=e.trace_data)||void 0===r?void 0:r.spans)&&void 0!==t?t:e.data.spans,c={},l={};o.forEach((e=>{const t=T(e);c[t]=e,l[t]=[]})),o.forEach((e=>{const t=T(e),r=w(e);if(r){if(!l[r])throw new Error("Tree structure is malformed!");l[r].push(t)}}));const p=o.find((e=>!w(e)));if((0,s.isNil)(p))return null;return function t(r){var s,o,m;const f=c[r],g=Number(N(p)),h=Number(A(p)),y=l[r].map(t),E=I(e.info);if(x(f)||"parent_id"in f)return v(f,g,h,y,E,n);const T=null!==(s=f.span_type)&&void 0!==s?s:i.UG.UNKNOWN;return{title:f.name,icon:(0,u.Y)(a.P,{type:d(T)}),type:T,key:f.context.span_id,start:Number(f.start_time)-g,end:Number(null!==(o=f.end_time)&&void 0!==o?o:h)-g,children:y,inputs:f.inputs,outputs:f.outputs,attributes:f.attributes,events:f.events,parentId:null!==(m=f.parent_id)&&void 0!==m?m:f.parent_span_id,assessments:[],traceId:n}}(T(p))}const I=e=>{let t=[];var r;E(e)?t=null!==(r=e.assessments)&&void 0!==r?r:[]:t=_(e.tags);const n=(0,s.keyBy)(t,"assessment_id");Object.values(n).forEach((e=>{if(e.overrides){const t=n[e.overrides];e.overriddenAssessment=t}})),t=Object.values(n);const i=t.reduce(((e,t)=>{var r;const n=null!==(r=t.span_id)&&void 0!==r?r:"";return e[n]||(e[n]=[]),e[n].push(t),e}),{});return Object.keys(i).forEach((e=>{i[e].sort(((e,t)=>new Date(t.last_update_time).getTime()-new Date(e.last_update_time).getTime()))})),i},_=e=>{if(!e)return[];return(Array.isArray(e)?e:Object.entries(e).map((([e,t])=>({key:e,value:t})))).filter((({key:e})=>e.startsWith("mlflow.assessment."))).map((({value:e})=>JSON.parse(e)))};function M(e){var t;if(e)return(0,s.isArray)(e)?null===(t=e.find((e=>e.key===i.jQ)))||void 0===t?void 0:t.value:e[i.jQ]}const L=e=>{var t;const r=null===e||void 0===e?void 0:e.info,n=null===e||void 0===e?void 0:e.data;if(!r||!n||null===n||void 0===n||!n.spans)return!1;const s=null!==(t=null===r||void 0===r?void 0:r.request_metadata)&&void 0!==t?t:null===r||void 0===r?void 0:r.trace_metadata;if(s&&M(s))return!0;const i=null===r||void 0===r?void 0:r.tags;return!(!i||!M(i))},O=e=>(0,s.isNil)(e)?[]:Array.isArray(e)||(0,s.isString)(e)||(0,s.isNumber)(e)||(0,s.isBoolean)(e)?[{key:"",value:JSON.stringify(e,null,2)}]:Object.entries(e).map((([e,t])=>({key:e,value:JSON.stringify(t,null,2)}))),P=({searchFilter:e,data:t,activeMatchBackgroundColor:r,inactiveMatchBackgroundColor:i,containsActiveMatch:a,activeMatch:o,scrollToActiveMatch:c})=>{const l=new RegExp(`(${(0,s.escapeRegExp)(e.trim())})`,"gi"),d=t.split(l),p=[];let m=0;for(let s=0;s<d.length;s++)if(d[s].toLowerCase().includes(e.toLowerCase().trim())){const e=a&&o.matchIndex===m,t=e?r:i,l=(0,u.Y)("span",{ref:e?c:null,css:(0,n.AH)({backgroundColor:t,scrollMarginTop:50},""),children:d[s]},s);m++,p.push(l)}else p.push(d[s]);return p},k=e=>(0,s.has)(e,"page_content"),C=e=>e.type===i.UG.RETRIEVER&&Array.isArray(e.outputs)&&e.outputs.length>0&&(0,s.every)(e.outputs,k),U=(e,t,r)=>`${e}-${t}-${r}`,D=e=>{var t;return(null!==(t=e.events)&&void 0!==t?t:[]).filter((e=>"exception"===e.name))},$=e=>D(e).length,Y=e=>!(0,s.isNil)(e)&&(!(!(0,s.isNil)(e.type)&&!(0,s.isString)(e.type))&&(!(!(0,s.isNil)(e.description)&&!(0,s.isString)(e.description))&&!(!(0,s.isNil)(e.enum)&&!Array.isArray(e.enum)))),G=e=>{var t;if((0,s.isNil)(e)||"function"!==e.type||!(0,s.has)(e,"function.name"))return!1;const r=null===(t=e.function)||void 0===t?void 0:t.parameters;if(!(0,s.isNil)(r)){const e=r.required;if(!(0,s.isNil)(e)&&(!Array.isArray(e)||!e.every(s.isString)))return!1;const t=r.properties;if(!(0,s.isNil)(t)&&!Object.values(t).every(Y))return!1}return!0},W=e=>{var t,r;return e&&(0,s.isString)(e.id)&&(0,s.isString)(null===(t=e.function)||void 0===t?void 0:t.arguments)&&(0,s.isString)(null===(r=e.function)||void 0===r?void 0:r.name)},F=e=>!(!(0,s.isNil)(e)&&!(0,s.isString)(e))||!!(0,s.isArray)(e)&&e.every((e=>(e=>{switch(e.type){case"text":case"input_text":case"output_text":return(0,s.isString)(e.text);case"image_url":const{image_url:t}=e;return!(0,s.isNil)(t)&&(0,s.isString)(t.url)&&((0,s.isNil)(t.detail)||["auto","low","high"].includes(t.detail));case"input_audio":const{input_audio:r}=e;return!(0,s.isNil)(r)&&(0,s.isString)(r.data)&&((0,s.isNil)(r.format)||["wav","mp3"].includes(r.format));default:return!1}})(e))),z=e=>{if(!e)return!1;if(e.tool_calls){if(!Array.isArray(e.tool_calls))return!1;if(!e.tool_calls.every(W))return!1}return"reasoning"===e.type||!!F(e.content)&&("user"===e.role||"assistant"===e.role||"system"===e.role||"tool"===e.role)},j=e=>Array.isArray(e)&&e.length>0&&e.every((e=>{return(0,s.has)(e,"message")&&(t=e.message,!!z(t)&&((0,s.isNil)(t.content)||(0,s.isString)(t.content)));var t})),q=e=>e&&j(e.choices),V=(e,t)=>{var r,n,i,a,u,c,l,d,p,m,f,g;try{if(Array.isArray(e)&&e.length>0&&e.every(z))return(0,s.compact)(e.map(B));switch(t){case"langchain":const t=null!==(r=(0,o.HD)(e))&&void 0!==r?r:(0,o.oI)(e);if(t)return t;break;case"llamaindex":const s=null!==(n=(0,o.Hy)(e))&&void 0!==n?n:(0,o.W3)(e);if(s)return s;break;case"openai":const h=null!==(i=null!==(a=null!==(u=(0,o.a8)(e))&&void 0!==u?u:(0,o.bS)(e))&&void 0!==a?a:(0,o.n_)(e))&&void 0!==i?i:(0,o.AG)(e);if(h)return h;break;case"dspy":const v=null!==(c=(0,o.iU)(e))&&void 0!==c?c:(0,o.Pn)(e);if(v)return v;break;case"gemini":const y=null!==(l=(0,o.DE)(e))&&void 0!==l?l:(0,o.Sy)(e);if(y)return y;break;case"anthropic":const E=null!==(d=(0,o.KF)(e))&&void 0!==d?d:(0,o.pL)(e);if(E)return E;break;case"openai-agent":const x=null!==(p=(0,o.xW)(e))&&void 0!==p?p:(0,o.m$)(e);if(x)return x;break;case"autogen":const T=null!==(m=(0,o.nW)(e))&&void 0!==m?m:(0,o.u6)(e);if(T)return T;break;case"bedrock":const w=null!==(f=(0,o.Yv)(e))&&void 0!==f?f:(0,o.f1)(e);if(w)return w;break;default:const N=null!==(g=(0,o.a8)(e))&&void 0!==g?g:(0,o.bS)(e);if(N)return N}return null}catch(h){return null}},H=e=>{var t;let r=null===(t=e.function)||void 0===t?void 0:t.arguments;try{r=JSON.stringify(JSON.parse(r),null,2)}catch(n){}return{id:e.id,function:{arguments:r,name:e.function.name}}},K=e=>{if((0,s.isNil)(e)||(0,s.isString)(e))return e;return e.map((e=>{var t;switch(e.type){case"text":case"input_text":case"output_text":return e.text;case"image_url":const r=null===e||void 0===e||null===(t=e.image_url)||void 0===t?void 0:t.url;return r?`![](${r})`:"[image]";case"input_audio":return"[audio]"}})).filter((e=>void 0!==e)).join("\n\n")},B=e=>{var t;return"reasoning"===e.type?null:{...e,content:K(e.content),tool_calls:null===(t=e.tool_calls)||void 0===t?void 0:t.map(H)}},J=e=>{if((0,s.isNil)(e))return"content";if(e.chatMessages)return"chat";return!(0,s.isNil)(e.inputs)||!(0,s.isNil)(e.outputs)?"content":"attributes"},Q=e=>{const[,t,r]=e.split("/");return{location:t,traceId:r}},Z=e=>{var t;return Boolean(e&&E(e)&&"UC_SCHEMA"===(null===(t=e.trace_location)||void 0===t?void 0:t.type))},X=e=>{var t,r,n,s;return"MLFLOW_EXPERIMENT"===e.type?null===(t=e.mlflow_experiment)||void 0===t?void 0:t.experiment_id:"INFERENCE_TABLE"===e.type?null===(r=e.inference_table)||void 0===r?void 0:r.full_table_name:"UC_SCHEMA"===e.type?`${null===(n=e.uc_schema)||void 0===n?void 0:n.catalog_name}.${null===(s=e.uc_schema)||void 0===s?void 0:s.schema_name}`:void 0}},90828:function(e,t,r){r.d(t,{Y7:function(){return u},nt:function(){return i},oD:function(){return a},pt:function(){return o}});var n=r(76118),s=r.n(n);const i="mlflow.",a=e=>!e.startsWith(i)&&!e.startsWith("_mlflow_"),o=e=>{try{return JSON.parse(e)}catch(t){return}},u=(e,t)=>{const r=s().truncate(e,{length:t});return s().takeWhile(r,(e=>"\n"!==e)).join("")}},91105:function(e,t,r){r.d(t,{N_:function(){return o},Oz:function(){return u},g:function(){return a},tW:function(){return i.tW}});var n=r(71102),s=r(27637),i=r(55113);r(46709);const a=n.g,o=s.N_,u=e=>e},93846:function(e,t,r){r.d(t,{wY:function(){return s}});var n=r(46709);r(69103);function s({ref:e,debounceTimeMs:t}){const r=(0,n.useRef)({width:-1,height:-1}),s=(0,n.useRef)(),[i,a]=(0,n.useState)(null),o=(0,n.useCallback)((e=>{if(0===e.length)return;const n=e[0].contentRect;if(-1===r.current.width)return r.current={width:n.width,height:n.height},void a(r.current);if(n.width!==r.current.width||n.height!==r.current.height){if(r.current.width=n.width,r.current.height=n.height,!t)return void a({...r.current});clearTimeout(s.current),s.current=setTimeout((()=>{a({...r.current})}),t)}}),[t]),u=(0,n.useRef)();return u.current||(u.current=new ResizeObserver(o)),(0,n.useEffect)((()=>{const t="function"===typeof e?e():e.current;if(t){const e=u.current;return e.observe(t),()=>e.unobserve(t)}})),i}r(53637)},94664:function(e,t,r){r.d(t,{Dy:function(){return o},O5:function(){return s},So:function(){return i},UG:function(){return a},VZ:function(){return u},cC:function(){return c},jQ:function(){return n}});const n="mlflow.trace_schema.version",s="response",i="trace";let a=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.FUNCTION="FUNCTION",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.MEMORY="MEMORY",e.UNKNOWN="UNKNOWN",e}({}),o=function(e){return e.MODELS="models",e.DOCUMENT="document",e.CONNECT="connect",e.SEARCH="search",e.SORT="sort",e.UNKNOWN="unknown",e.FUNCTION="function",e.CODE="code",e.NUMBERS="numbers",e.WRENCH="wrench",e.AGENT="agent",e.CHAIN="chain",e.USER="user",e.SYSTEM="system",e.SAVE="save",e}({}),u=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.MEMORY="MEMORY",e.UNKNOWN="UNKNOWN",e}({}),c=function(e){return e.JSON="json",e.TEXT="text",e.MARKDOWN="markdown",e.PYTHON="python",e}({})},97311:function(e,t,r){async function n(e){try{const t=await fetch(`/ajax-api/2.0/mlflow/get-trace-artifact?request_id=${e}`),r=await t.text(),n=JSON.parse(r);return n.spans?{info:{request_id:e},data:n}:n.error_code?n.message:"Unknown error occurred"}catch(t){return t instanceof Error?t.message:"string"===typeof t?t:"Unknown error occurred"}}r.d(t,{g:function(){return n}})}}]);