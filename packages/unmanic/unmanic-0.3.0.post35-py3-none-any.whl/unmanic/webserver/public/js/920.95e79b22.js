"use strict";(globalThis["webpackChunkunmanic_frontend"]=globalThis["webpackChunkunmanic_frontend"]||[]).push([[920],{4440:(e,l,n)=>{n.r(l),n.d(l,{default:()=>re});var t=n(2444),o=n(4044);const i={class:"q-pa-none"},a={class:"col-12 col-sm-12 col-md-10 col-lg-8"},s={class:"q-mb-none"};function c(e,l,n,c,r,u){const d=(0,t.E1)("PluginsInstalledTable"),p=(0,t.E1)("q-form"),g=(0,t.E1)("MobileSettingsQuickNav"),m=(0,t.E1)("q-page");return(0,t.Wz)(),(0,t.Az)(m,{padding:""},{default:(0,t.Ql)((()=>[(0,t.QD)("div",i,[(0,t.QD)("div",a,[(0,t.QD)("div",{class:(0,o.WN)(e.$q.platform.is.mobile?"q-ma-sm":"q-ma-sm q-pa-md")},[(0,t.K2)(p,{class:"q-gutter-md"},{default:(0,t.Ql)((()=>[(0,t.QD)("h5",s,(0,o.WA)(e.$t("components.plugins.pathConfiguration")),1),(0,t.K2)(d)])),_:1})],2)]),(0,t.K2)(g,{prevEnabled:!0,prevLabel:e.$t("navigation.workers"),prevPath:"/ui/settings-workers",nextEnabled:!0,nextLabel:e.$t("navigation.link"),nextPath:"/ui/settings-link"},null,8,["prevLabel","nextLabel"])])])),_:1})}const r={class:"row q-gutter-xs q-mt-xs justify-between"},u={class:"col-auto"},d={class:"row no-wrap q-pa-md"},p={class:"column"},g={class:"col-auto",style:{"max-width":"200px"}},m={class:"q-gutter-sm"},f=["innerHTML"],v={class:"row"},h=(0,t.QD)("div",{class:"col-6 text-right"},[(0,t.QD)("span",{class:"text-weight-medium"},"Author")],-1),Q={class:"col-6 q-px-sm"},_={class:"row"},b=(0,t.QD)("div",{class:"col-6 text-right"},[(0,t.QD)("span",{class:"text-weight-medium"},"Version")],-1),w={class:"col-6 q-px-sm"},P={class:"text-grey-8 q-gutter-xs q-mr-lg"},k={key:0},K={key:1},q={class:"text-grey-8 q-gutter-xs"};function x(e,l,n,i,a,s){const c=(0,t.E1)("q-btn"),x=(0,t.E1)("q-uploader"),y=(0,t.E1)("q-btn-dropdown"),A=(0,t.E1)("q-icon"),I=(0,t.E1)("q-input"),W=(0,t.E1)("q-card-section"),z=(0,t.E1)("q-img"),D=(0,t.E1)("q-item-section"),C=(0,t.E1)("q-item-label"),$=(0,t.E1)("q-tooltip"),S=(0,t.E1)("q-separator"),E=(0,t.E1)("q-item"),L=(0,t.E1)("q-list"),U=(0,t.E1)("q-card"),N=(0,t.iS)("close-popup");return(0,t.Wz)(),(0,t.Az)(U,{flat:""},{default:(0,t.Ql)((()=>[(0,t.K2)(W,{class:"q-pa-none"},{default:(0,t.Ql)((()=>[(0,t.QD)("div",r,[(0,t.QD)("div",u,[(0,t.QD)("div",{class:(0,o.WN)(e.$q.platform.is.mobile?"col":"q-btn-group row no-wrap inline")},[(0,t.K2)(c,{onClick:i.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.installPluginFromRepo")},null,8,["onClick","label"]),(0,t.K2)(y,{class:(0,o.WN)(e.$q.platform.is.mobile?"q-my-sm":""),color:"secondary",label:e.$t("components.plugins.installPluginFromFile")},{default:(0,t.Ql)((()=>[(0,t.QD)("div",null,[(0,t.QD)("div",d,[(0,t.QD)("div",p,[(0,t.K2)(x,{style:(0,o.MN)(e.$q.platform.is.mobile?"max-width: 210px":"max-width: 300px"),url:i.getUploadUrl(),label:"Upload ZIP file...",color:"secondary",accept:".zip, application/zip","auto-upload":"",onRejected:i.onRejectedPluginUpload,onFailed:i.onFailedPluginUploadAndInstall,onUploaded:i.onSuccessfulPluginUploadAndInstall},null,8,["style","url","onRejected","onFailed","onUploaded"])])])])])),_:1},8,["class","label"])],2)]),(0,t.QD)("div",g,[(0,t.K2)(I,{filled:"",dense:"",class:"shadow-1",debounce:"300",color:"primary",modelValue:i.filter,"onUpdate:modelValue":l[0]||(l[0]=e=>i.filter=e),placeholder:e.$t("navigation.search")},{append:(0,t.Ql)((()=>[(0,t.K2)(A,{name:"search"})])),_:1},8,["modelValue","placeholder"])])])])),_:1}),(0,t.K2)(W,{class:"q-px-none"},{default:(0,t.Ql)((()=>[(0,t.QD)("div",m,[(0,t.K2)(L,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,t.Ql)((()=>[((0,t.Wz)(!0),(0,t.An)(t.ae,null,(0,t.mi)(i.listedPlugins,((l,n)=>((0,t.Wz)(),(0,t.Az)(E,{key:n,class:(0,o.WN)(l.status.update_available?"bg-warning":"")},{default:(0,t.Ql)((()=>[(0,t.K2)(D,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(z,{src:l.icon},null,8,["src"])])),_:2},1024),(0,t.K2)(D,{top:"",class:""},{default:(0,t.Ql)((()=>[(0,t.K2)(C,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,o.WA)(l.name),1)])),_:2},1024),(0,t.K2)(C,{caption:"",lines:"3"},{default:(0,t.Ql)((()=>[(0,t.QD)("span",{innerHTML:l.description},null,8,f)])),_:2},1024)])),_:2},1024),(0,t.K2)(D,{top:"",class:"gt-xs col-2"},{default:(0,t.Ql)((()=>[(0,t.K2)(C,{lines:"1"},{default:(0,t.Ql)((()=>[(0,t.QD)("div",v,[h,(0,t.QD)("div",Q,[(0,t.QD)("span",{class:(0,o.WN)(e.$q.dark.isActive&&!l.status.update_available?"text-grey-5":"text-grey-8")},(0,o.WA)(l.author),3)])])])),_:2},1024),(0,t.K2)(C,{lines:"1"},{default:(0,t.Ql)((()=>[(0,t.QD)("div",_,[b,(0,t.QD)("div",w,[(0,t.QD)("span",{class:(0,o.WN)(e.$q.dark.isActive&&!l.status.update_available?"text-grey-5":"text-grey-8")},(0,o.WA)(l.version),3)])])])),_:2},1024)])),_:2},1024),(0,t.K2)(D,{center:"",side:""},{default:(0,t.Ql)((()=>[(0,t.QD)("div",P,[l.status.update_available?((0,t.Wz)(),(0,t.Az)(c,{key:0,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"info",icon:"update",onClick:e=>i.updateSinglePlugin(l.id)},null,8,["onClick"])):((0,t.Wz)(),(0,t.Az)(c,{key:1,disable:"",flat:"",dense:"",round:"",class:"gt-xs no-pointer-events",size:"12px",color:"positive",icon:"download_done"}))]),(0,t.K2)($,{class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[l.status.update_available?((0,t.Wz)(),(0,t.An)("span",k,(0,o.WA)(e.$t("components.plugins.clickToUpdatePlugin")),1)):((0,t.Wz)(),(0,t.An)("span",K,(0,o.WA)(e.$t("components.plugins.pluginUpToDate")),1))])),_:2},1024)])),_:2},1024),(0,t.K2)(S,{inset:"",vertical:"",class:"q-mx-sm"}),(0,t.K2)(D,{center:"",side:""},{default:(0,t.Ql)((()=>[(0,t.QD)("div",q,[(0,t.K2)(y,{flat:"",dense:"",rounded:"",class:"lt-sm",size:"12px","no-icon-animation":"","dropdown-icon":"more_vert"},{default:(0,t.Ql)((()=>[(0,t.K2)(L,null,{default:(0,t.Ql)((()=>[(0,t.wt)(((0,t.Wz)(),(0,t.Az)(E,{clickable:"",onClick:e=>i.openPluginInfo(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)(D,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(A,{color:"info",name:"info"})])),_:1}),(0,t.K2)(D,null,{default:(0,t.Ql)((()=>[(0,t.K2)(C,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,o.WA)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]]),l.has_config?(0,t.wt)(((0,t.Wz)(),(0,t.Az)(E,{key:0,clickable:"",onClick:e=>i.openPluginInfo(l.id,"settings")},{default:(0,t.Ql)((()=>[(0,t.K2)(D,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(A,{color:"grey-8",name:"tune"})])),_:1}),(0,t.K2)(D,null,{default:(0,t.Ql)((()=>[(0,t.K2)(C,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,o.WA)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]]):(0,t.g1)("",!0),l.status.update_available?(0,t.wt)(((0,t.Wz)(),(0,t.Az)(E,{key:1,clickable:"",onClick:e=>i.updateSinglePlugin(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)(D,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(A,{color:"warning",name:"update"})])),_:1}),(0,t.K2)(D,null,{default:(0,t.Ql)((()=>[(0,t.K2)(C,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,o.WA)(e.$t("components.plugins.updatePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]]):(0,t.g1)("",!0),(0,t.wt)(((0,t.Wz)(),(0,t.Az)(E,{clickable:"",onClick:e=>i.removeSinglePlugin(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)(D,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(A,{color:"negative",name:"delete"})])),_:1}),(0,t.K2)(D,null,{default:(0,t.Ql)((()=>[(0,t.K2)(C,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,o.WA)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]])])),_:2},1024)])),_:2},1024),(0,t.K2)(c,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"secondary",icon:"info",onClick:e=>i.openPluginInfo(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)($,{class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[(0,t.mY)((0,o.WA)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:2},1032,["onClick"]),(0,t.K2)(c,{disable:!l.has_config,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"grey-8",icon:"tune",onClick:e=>i.openPluginInfo(l.id,"settings")},{default:(0,t.Ql)((()=>[(0,t.K2)($,{class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[(0,t.mY)((0,o.WA)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:2},1032,["disable","onClick"]),(0,t.K2)(c,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"negative",icon:"delete",onClick:e=>i.removeSinglePlugin(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)($,{class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[(0,t.mY)((0,o.WA)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024),l.status.update_available?((0,t.Wz)(),(0,t.Az)($,{key:0,class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[(0,t.mY)((0,o.WA)(e.$t("components.plugins.updateAvailable")),1)])),_:1})):(0,t.g1)("",!0)])),_:2},1032,["class"])))),128))])),_:1})])])),_:1})])),_:1})}var y=n(5836),A=n(7928),I=n(1416),W=n(6728),z=n(4776),D=n(3160),C=n(9628),$=n(6944);const S={components:{},setup(){const e=(0,I.c)(),{t:l}=(0,D.gd)(),n=(0,y.IL)([]),o=(0,y.IL)(""),i=(0,y.IL)(!1),a=(0,y.IL)({sortBy:"name",descending:!1,page:1,rowsPerPage:50,rowsNumber:10}),s=(0,y.IL)([]),c=(0,y.IL)([]),r=(0,y.IL)(0);function u(){let e="";return 0!==s.value.length&&(e=`${s.value.length} record${s.value.length>1?"s":""} selected of ${n.value.length}`),e}function d(){if(0!==s.value.length){let l=[];for(let e=0;e<s.value.length;e++){let n=s.value[e];l[l.length]=n.id}let n={id_list:l};(0,W.c)({method:"post",url:(0,A.S)("v2","plugins/disable"),data:n}).then((e=>{h({pagination:a.value,filter:o.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be disabled",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function p(l){let n={id_list:l};(0,W.c)({method:"post",url:(0,A.S)("v2","plugins/update"),data:n}).then((e=>{h({pagination:a.value,filter:o.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be updated",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function g(e){p([e])}function m(l){let n={id_list:l};(0,W.c)({method:"delete",url:(0,A.S)("v2","plugins/remove"),data:n}).then((e=>{h({pagination:a.value,filter:o.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be removed",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function f(e){m([e])}function v(e){return e.length>280&&(e=e.substring(0,277)+"..."),e=e.split("\n")[0],(0,z.Yv)(e)}function h(l){const{page:t,rowsPerPage:o,sortBy:s,descending:r}=l.pagination,u=l.filter;i.value=!0;const d=0===o?a.value.rowsNumber:o,p=(t-1)*o;let g={start:p,length:d,search_value:u,order_by:s,order_direction:r?"desc":"asc"};(0,W.c)({method:"post",url:(0,A.S)("v2","plugins/installed"),data:g}).then((e=>{a.value.rowsNumber=e.data.recordsFiltered,c.value=[];for(let l=0;l<e.data.results.length;l++){let n=e.data.results[l];c.value[l]={id:n.id,plugin_id:n.plugin_id,icon:n.icon,name:n.name,description:v(n.description),tags:n.tags,author:n.author,version:n.version,status:n.status,has_config:n.has_config}}n.value.splice(0,n.value.length,...c.value),a.value.page=t,a.value.rowsPerPage=o,a.value.sortBy=s,a.value.descending=r,i.value=!1})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the installed plugins list",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}const Q=(0,y.IL)(""),_=(0,y.IL)("");function b(l,n){let t="";for(let e=0;e<c.value.length;e++){let n=c.value[e];n.id===l&&(t=n.plugin_id)}""!==t?e.dialog({component:C.c,componentProps:{pluginId:t,startTab:"settings"===n?"settings":"info"}}).onOk((e=>{})).onDismiss((()=>{})):e.notify({color:"negative",position:"top",message:"An error was encountered while attempting to open plugin info",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function w(){Q.value="",_.value=""}function P(){e.dialog({component:$.c,componentProps:{header:l("headers.pluginInstaller"),componentName:"PluginInstallerForm",width:"2000px",componentProps:{}}}).onOk((e=>{})).onDismiss((()=>{h({pagination:a.value,filter:o.value})}))}function k(){return(0,A.S)("v2","upload/plugin/file")}function K(n){e.notify({color:"negative",position:"top",message:l("components.plugins.invalidZipFile"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function q(){e.notify({color:"negative",position:"top",message:l("components.plugins.failedToInstallPluginFromZip"),icon:"check_circle",actions:[{icon:"close",color:"white"}]}),h({pagination:a.value,filter:void 0})}function x(){e.notify({color:"positive",position:"top",message:l("components.plugins.installedPluginFromZip"),icon:"check_circle",actions:[{icon:"close",color:"white"}]}),h({pagination:a.value,filter:void 0})}return(0,t.u2)((()=>{h({pagination:a.value,filter:void 0})})),(0,t.Kg)(o,((e,l)=>{h({pagination:a.value,filter:o.value})})),{selected:s,filter:o,loading:i,pagination:a,rows:n,listedPlugins:c,itemOffset:r,getSelectedString:u,onRequest:h,disableSelected:d,updateSinglePlugin:g,removeSinglePlugin:f,openPluginInfo:b,showPluginInfo:Q,showPluginSettings:_,closePluginInfo:w,openPluginInstaller:P,getUploadUrl:k,onRejectedPluginUpload:K,onFailedPluginUploadAndInstall:q,onSuccessfulPluginUploadAndInstall:x}}};var E=n(8716),L=n(608),U=n(1008),N=n(2572),F=n(9140),T=n(2764),Y=n(9600),B=n(540),R=n(8120),j=n(9588),M=n(4884),V=n(1032),Z=n(6616),O=n(2992),H=n(111),G=n(880),J=n(1020),X=n(5252),ee=n.n(X);const le=(0,E.c)(S,[["render",x]]),ne=le;ee()(S,"components",{QCard:L.c,QCardSection:U.c,QBtnGroup:N.c,QBtn:F.c,QBtnDropdown:T.c,QUploader:Y.c,QInput:B.c,QIcon:R.c,QList:j.c,QItem:M.c,QItemSection:V.c,QImg:Z.c,QItemLabel:O.c,QTooltip:H.c,QSeparator:G.c}),ee()(S,"directives",{ClosePopup:J.c});var te=n(8564),oe=n(1156);const ie={components:{MobileSettingsQuickNav:oe.c,PluginsInstalledTable:ne},setup(){const{t:e}=(0,D.gd)();let l=null,n=(0,te.k)(e);function o(){l=n.init()}function i(){n.close()}(0,t.u2)((()=>{o()})),(0,t.wx)((()=>{i()}))}};var ae=n(7059),se=n(1908);const ce=(0,E.c)(ie,[["render",c]]),re=ce;ee()(ie,"components",{QPage:ae.c,QForm:se.c})}}]);