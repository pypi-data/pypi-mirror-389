"use strict";(globalThis["webpackChunkunmanic_frontend"]=globalThis["webpackChunkunmanic_frontend"]||[]).push([[32],{7032:(t,e,n)=>{n.r(e),n.d(e,{default:()=>ut});var l=n(2444),o=n(4044),a=n(9216),s=n.n(a);const i={class:"q-pa-none"},c={class:"row"},r={class:"col q-ma-sm"},d={class:"row"},u={class:"col-sm-6 col-xs-12"},p={class:"q-mb-none q-mt-sm"},g={class:"q-gutter-sm"},m={class:"q-pa-md",style:{"max-width":"350px"}},f={class:"col-sm-6 col-xs-12"},h={class:"q-mb-none q-mt-sm"},Q={class:"q-gutter-sm"},_={class:"q-pa-md",style:{"max-width":"350px"}},K={class:"q-mb-none q-mt-sm"},y={class:"q-gutter-sm"},b={class:"q-pa-md",style:{"max-width":"350px"}},v={class:"q-pa-md",style:{"max-width":"600px"}},w={class:"q-mb-none q-mt-sm"},q={class:"column"},W={class:"row q-gutter-sm items-stretch"},A={class:"col-5"},$={class:"col-5"},S={class:"row"},k={class:"col"},D={class:"row items-center"},L={class:"col-sm-6 col-xs-12"},z={class:"text-h6"},E={class:"text-subtitle2"},x={class:"col-auto"},R=["innerHTML"];function C(t,e,n,a,C,T){const Y=(0,l.E1)("q-skeleton"),I=(0,l.E1)("q-img"),P=(0,l.E1)("q-item-section"),U=(0,l.E1)("q-item-label"),V=(0,l.E1)("q-item"),N=(0,l.E1)("q-separator"),O=(0,l.E1)("q-icon"),B=(0,l.E1)("q-list"),F=(0,l.E1)("q-toggle"),J=(0,l.E1)("q-btn-dropdown"),j=(0,l.E1)("q-btn"),G=(0,l.E1)("q-card-section"),H=(0,l.E1)("q-card"),M=(0,l.E1)("q-page"),X=(0,l.iS)("ripple"),Z=(0,l.iS)("close-popup");return(0,l.Wz)(),(0,l.Az)(M,{padding:""},{default:(0,l.Ql)((()=>[(0,l.QD)("div",i,[(0,l.QD)("div",c,[(0,l.QD)("div",r,[(0,l.QD)("div",d,[(0,l.QD)("div",u,[(0,l.QD)("h5",p,(0,o.WA)(t.$t("components.settings.support.configuration")),1),(0,l.QD)("div",g,[null===C.debugging?((0,l.Wz)(),(0,l.Az)(Y,{key:0,type:"QToggle"})):(0,l.g1)("",!0),(0,l.QD)("div",m,[(0,l.K2)(B,{padding:"",class:"rounded-borders"},{default:(0,l.Ql)((()=>[(0,l.K2)(V,null,{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(I,{src:s()})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.appVersion"))+":",1)])),_:1}),(0,l.K2)(U,{caption:""},{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(a.appVersion),1)])),_:1})])),_:1})])),_:1}),(0,l.K2)(N,{spaced:"",inset:"item"}),(0,l.K2)(V,null,{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"fab fa-python"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.pythonVersion"))+":",1)])),_:1}),(0,l.K2)(U,{caption:""},{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(a.pythonVersion),1)])),_:1})])),_:1})])),_:1}),(0,l.K2)(N,{spaced:"",inset:"item"}),(0,l.K2)(V,null,{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"computer"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.platform"))+":",1)])),_:1}),(0,l.K2)(U,{caption:""},{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(a.platform),1)])),_:1})])),_:1})])),_:1}),(0,l.K2)(N,{spaced:"",inset:"item"}),(0,l.K2)(V,null,{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"fas fa-folder"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.configPath"))+":",1)])),_:1}),(0,l.K2)(U,{caption:""},{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(a.configPath),1)])),_:1})])),_:1})])),_:1}),(0,l.K2)(V,null,{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"fas fa-folder"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.logsPath"))+":",1)])),_:1}),(0,l.K2)(U,{caption:""},{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(a.logsPath),1)])),_:1})])),_:1})])),_:1}),(0,l.K2)(V,null,{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"fas fa-folder"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.userdataPath"))+":",1)])),_:1}),(0,l.K2)(U,{caption:""},{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(a.userdataPath),1)])),_:1})])),_:1})])),_:1})])),_:1})])])]),(0,l.QD)("div",f,[(0,l.QD)("h5",h,(0,o.WA)(t.$t("components.settings.support.docs")),1),(0,l.QD)("div",Q,[null===C.debugging?((0,l.Wz)(),(0,l.Az)(Y,{key:0,type:"QToggle"})):(0,l.g1)("",!0),(0,l.QD)("div",_,[(0,l.K2)(B,{dense:"",padding:"",class:"rounded-borders"},{default:(0,l.Ql)((()=>[(0,l.wt)(((0,l.Wz)(),(0,l.Az)(V,{onClick:e[0]||(e[0]=t=>T.openExternalURL("/unmanic/swagger")),clickable:""},{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"article"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.apiSpec")),1)])),_:1}),(0,l.K2)(U,{caption:""})])),_:1}),(0,l.K2)(P,{side:"",top:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{name:"open_in_new",color:"primary"})])),_:1})])),_:1})),[[X]]),(0,l.wt)(((0,l.Wz)(),(0,l.Az)(V,{onClick:e[1]||(e[1]=t=>T.openExternalURL("https://docs.unmanic.app/docs/")),clickable:""},{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"article"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.applicationDocumentation")),1)])),_:1}),(0,l.K2)(U,{caption:""})])),_:1}),(0,l.K2)(P,{side:"",top:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{name:"open_in_new",color:"primary"})])),_:1})])),_:1})),[[X]])])),_:1})])]),(0,l.QD)("h5",K,(0,o.WA)(t.$t("components.settings.support.support")),1),(0,l.QD)("div",y,[null===C.debugging?((0,l.Wz)(),(0,l.Az)(Y,{key:0,type:"QToggle"})):(0,l.g1)("",!0),(0,l.QD)("div",b,[(0,l.K2)(B,{dense:"",padding:"",class:"rounded-borders"},{default:(0,l.Ql)((()=>[(0,l.wt)(((0,l.Wz)(),(0,l.Az)(V,{onClick:e[2]||(e[2]=t=>T.openExternalURL("https://github.com/Unmanic/unmanic/issues")),clickable:""},{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"fab fa-github"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.unmanicAppSourceRequests")),1)])),_:1}),(0,l.K2)(U,{caption:""})])),_:1}),(0,l.K2)(P,{side:"",top:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{name:"open_in_new",color:"primary"})])),_:1})])),_:1})),[[X]]),(0,l.wt)(((0,l.Wz)(),(0,l.Az)(V,{onClick:e[3]||(e[3]=t=>T.openExternalURL("https://github.com/Unmanic/unmanic-frontend/issues")),clickable:""},{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"fab fa-github"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.unmanicFrontendSourceRequests")),1)])),_:1}),(0,l.K2)(U,{caption:""})])),_:1}),(0,l.K2)(P,{side:"",top:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{name:"open_in_new",color:"primary"})])),_:1})])),_:1})),[[X]]),(0,l.wt)(((0,l.Wz)(),(0,l.Az)(V,{onClick:e[4]||(e[4]=t=>T.openExternalURL("https://github.com/Unmanic/unmanic-plugins/issues")),clickable:""},{default:(0,l.Ql)((()=>[(0,l.K2)(P,{avatar:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{color:"primary",name:"fab fa-github"})])),_:1}),(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(t.$t("components.settings.support.unmanicOfficialPluginRequests")),1)])),_:1}),(0,l.K2)(U,{caption:""})])),_:1}),(0,l.K2)(P,{side:"",top:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{name:"open_in_new",color:"primary"})])),_:1})])),_:1})),[[X]])])),_:1})])])])]),(0,l.K2)(N),(0,l.QD)("div",v,[(0,l.QD)("h5",w,(0,o.WA)(t.$t("components.settings.support.logs")),1),(0,l.QD)("div",q,[(0,l.QD)("div",W,[(0,l.QD)("div",A,[null===C.debugging?((0,l.Wz)(),(0,l.Az)(Y,{key:0,type:"QToggle"})):((0,l.Wz)(),(0,l.Az)(F,{key:1,modelValue:C.debugging,"onUpdate:modelValue":[e[5]||(e[5]=t=>C.debugging=t),e[6]||(e[6]=t=>T.toggleDebugging(C.debugging))],label:t.$t("components.settings.support.enableDebugging")},null,8,["modelValue","label"]))]),(0,l.QD)("div",$,[(0,l.K2)(J,{color:"primary",label:t.$t("components.settings.support.confLogBufferRetentionLabel")},{default:(0,l.Ql)((()=>[(0,l.K2)(B,null,{default:(0,l.Ql)((()=>[((0,l.Wz)(!0),(0,l.An)(l.ae,null,(0,l.mi)(C.retentionOptions,((e,n)=>(0,l.wt)(((0,l.Wz)(),(0,l.Az)(V,{key:e,clickable:"",onClick:t=>T.setLogRetention(e)},{default:(0,l.Ql)((()=>[(0,l.K2)(P,null,{default:(0,l.Ql)((()=>[(0,l.K2)(U,null,{default:(0,l.Ql)((()=>[(0,l.mY)((0,o.WA)(n),1)])),_:2},1024)])),_:2},1024),t.settings?.log_buffer_retention===e?((0,l.Wz)(),(0,l.Az)(P,{key:0,side:""},{default:(0,l.Ql)((()=>[(0,l.K2)(O,{name:"check"})])),_:1})):(0,l.g1)("",!0)])),_:2},1032,["onClick"])),[[Z]]))),128))])),_:1})])),_:1},8,["label"])])])])])])]),(0,l.QD)("div",S,[(0,l.QD)("div",k,[(0,l.K2)(H,{flat:"",bordered:"",style:{width:"2000px","max-width":"100%"}},{default:(0,l.Ql)((()=>[(0,l.K2)(G,null,{default:(0,l.Ql)((()=>[(0,l.QD)("div",D,[(0,l.QD)("div",L,[(0,l.QD)("div",z,(0,o.WA)(t.$t("components.settings.support.currentSystemLogs"))+":",1),(0,l.QD)("div",E,(0,o.WA)(a.logsPath),1)]),(0,l.QD)("div",x,[(0,l.K2)(j,{onClick:T.downloadLogs,color:"secondary","icon-right":"file_download",label:t.$t("components.settings.support.downloadSystemLogs")},null,8,["onClick","label"])])])])),_:1}),(0,l.K2)(N),(0,l.K2)(G,null,{default:(0,l.Ql)((()=>[0===a.currentLog.length?((0,l.Wz)(),(0,l.Az)(Y,{key:0,style:{width:"100%"},type:"text"})):((0,l.Wz)(),(0,l.An)("div",{key:1,class:(0,o.WN)([t.$q.platform.is.mobile?"":"q-px-lg","system-log-content"])},[((0,l.Wz)(!0),(0,l.An)(l.ae,null,(0,l.mi)(a.currentLog,((t,e)=>((0,l.Wz)(),(0,l.An)("p",{key:e,innerHTML:t},null,8,R)))),128))],2))])),_:1})])),_:1})])])])])),_:1})}n(5336),n(1495),n(9344);var T=n(8564),Y=n(5836),I=n(1416),P=n(3160),U=n(6728),V=n(7928),N=n(4088);const O={name:"SettingsLibrary",setup(){(0,I.c)();const{t}=(0,P.gd)(),e=(0,Y.IL)([]),n=(0,Y.IL)(""),o=(0,Y.IL)(null),a=(0,Y.IL)(null),s=(0,Y.IL)(null),i=(0,Y.IL)(null),c=(0,Y.IL)(null);let r=null,d=null,u=(0,T.k)(t);function p(t){e.value=t.system_logs;let l=[];for(let e=0;e<t.system_logs.length;e++){let n=t.system_logs[e];n=n.replace(/\/[\/|.|\s|\w|-]+/,"<span style='color:var(--q-secondary);'>$&</span>"),n=n.replace(/[\d(\-|T|\:)]+\:DEBUG:[\w(\.|\-)]+/,"<span style='color:var(--q-primary);'>$&</span>"),n=n.replace(/[\d(\-|T|\:)]+\:WARNING:[\w(\.|\-)]+/,"<span style='color:var(--q-warning);'>$&</span>"),n=n.replace(/[\d(\-|T|\:)]+\:ERROR:[\w(\.|\-)]+/,"<span style='color:var(--q-negative);'>$&</span>"),l[e]=n}e.value=l,n.value=t.logs_path}function g(){r=u.init(),d=u.serverId,u.addEventListener("open","start_system_logs",(function(t){r.send(JSON.stringify({command:"start_system_logs",params:{}}))})),u.addEventListener("message","handle_system_logs",(function(t){if("string"===typeof t.data){let e=JSON.parse(t.data);if(e.success)switch(e.type){case"system_logs":p(e.data);break}else console.error("WebSocket Error: Received contained errors - "+t.data)}else console.error("WebSocket Error: Received data was not JSON - "+t.data)}))}function m(){u.close()}return(0,l.u2)((()=>{g()})),(0,l.wx)((()=>{m()})),{currentLog:e,logsPath:n,appVersion:o,pythonVersion:a,platform:s,configPath:i,userdataPath:c}},data(){return{debugging:(0,Y.IL)(null),retentionOptions:{Disabled:0,"1 day":1,"3 days":3,"5 days":5,"7 days":7,"14 days":14}}},methods:{openExternalURL:function(t){(0,N.c)(t)},fetchSettings:function(){(0,U.c)({method:"get",url:(0,V.S)("v2","settings/read")}).then((t=>{this.debugging=t.data.settings.debugging,this.configPath=t.data.settings.config_path,this.logsPath=t.data.settings.log_path,this.userdataPath=t.data.settings.userdata_path})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},fetchSystemConfig:function(){V.cp.getUnmanicVersion().then((t=>{this.appVersion=t})),(0,U.c)({method:"get",url:(0,V.S)("v2","settings/configuration")}).then((t=>{let e=t.data.configuration;if(this.pythonVersion=e.python,"undefined"!==typeof e.platform&&e.platform.length>0){let t=e.platform.join(" ");console.log(t),this.platform=t}})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSystemConfig"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},toggleDebugging(t){let e={settings:{debugging:t}};(0,U.c)({method:"post",url:(0,V.S)("v2","settings/write"),data:e}).then((t=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},setLogRetention(t){const e=parseInt(t,10);if(Number.isNaN(e))return void this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem"});const n={settings:{log_buffer_retention:e}};(0,U.c)({method:"post",url:(0,V.S)("v2","settings/write"),data:n}).then((t=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},downloadLogs(){(0,U.c)({method:"get",url:(0,V.S)("v2","docs/logs/zip"),responseType:"blob"}).then((t=>{const e=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=e,n.setAttribute("download","UnmanicLogs.zip"),document.body.appendChild(n),n.click(),document.body.removeChild(n)})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},created(){this.fetchSettings(),this.fetchSystemConfig()}};var B=n(8716),F=n(7059),J=n(9692),j=n(9588),G=n(4884),H=n(1032),M=n(6616),X=n(2992),Z=n(880),tt=n(8120),et=n(4640),nt=n(2764),lt=n(608),ot=n(1008),at=n(9140),st=n(4165),it=n(1020),ct=n(5252),rt=n.n(ct);const dt=(0,B.c)(O,[["render",C]]),ut=dt;rt()(O,"components",{QPage:F.c,QSkeleton:J.cp,QList:j.c,QItem:G.c,QItemSection:H.c,QImg:M.c,QItemLabel:X.c,QSeparator:Z.c,QIcon:tt.c,QToggle:et.c,QBtnDropdown:nt.c,QCard:lt.c,QCardSection:ot.c,QBtn:at.c}),rt()(O,"directives",{Ripple:st.c,ClosePopup:it.c})}}]);