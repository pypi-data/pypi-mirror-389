"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["95176"],{72569:function(t,e,n){n.d(e,{Fj:function(){return s},Gu:function(){return r},H2:function(){return u},xA:function(){return c},xs:function(){return o}});n(65315),n(84136),n(12977);var i=n(12275);const s=t=>t.callWS({type:"person/list"}),r=(t,e)=>t.callWS(Object.assign({type:"person/create"},e)),o=(t,e,n)=>t.callWS(Object.assign({type:"person/update",person_id:e},n)),u=(t,e)=>t.callWS({type:"person/delete",person_id:e}),a={},c=t=>{var e;if(null===(e=t.user)||void 0===e||!e.id)return;const n=a[t.user.id];if(n){const e=t.states[n];if(e&&e.attributes.user_id===t.user.id)return e}const s=Object.values(t.states).find(e=>e.attributes.user_id===t.user.id&&"person"===(0,i.t)(e));return s&&(a[t.user.id]=s.entity_id),s}},97073:function(t,e,n){n.d(e,{CZ:function(){return v},Wx:function(){return l},XH:function(){return d},db:function(){return f},gW:function(){return p},lB:function(){return _}});n(79827),n(35748),n(99342),n(9724),n(65315),n(12840),n(837),n(37089),n(48169),n(59023),n(12977),n(88238),n(34536),n(16257),n(20152),n(44711),n(72108),n(77030),n(18223),n(95013);var i=n(11111),s=n(32211),r=n(22527),o=n(14523),u=n(72569);function a(t,e){var n;if((0,r.n)(e)&&t.states[e])return null===(n=t.states[e])||void 0===n?void 0:n.state}function c(t,e){var n;const s=t.entity&&e.states[t.entity]?e.states[t.entity].state:o.HV;let r=null!==(n=t.state)&&void 0!==n?n:t.state_not;if(Array.isArray(r)){const t=r.map(t=>a(e,t)).filter(t=>void 0!==t);r=[...r,...t]}else if("string"==typeof r){const t=a(e,r);r=[r],t&&r.push(t)}return null!=t.state?(0,i.e)(r).includes(s):!(0,i.e)(r).includes(s)}function d(t,e){return t.every(t=>{if("condition"in t)switch(t.condition){case"screen":return!!(n=t).media_query&&matchMedia(n.media_query).matches;case"user":return function(t,e){var n;return!(!t.users||null===(n=e.user)||void 0===n||!n.id)&&t.users.includes(e.user.id)}(t,e);case"location":return function(t,e){var n;const i=(0,u.xA)(e);return!!i&&(null===(n=t.locations)||void 0===n?void 0:n.includes(i.state))}(t,e);case"numeric_state":return function(t,e){var n;const i=null===(n=t.entity?e.states[t.entity]:void 0)||void 0===n?void 0:n.state;let s=t.above,r=t.below;var o,u;"string"==typeof s&&(s=null!==(o=a(e,s))&&void 0!==o?o:s),"string"==typeof r&&(r=null!==(u=a(e,r))&&void 0!==u?u:r);const c=Number(i),d=Number(s),l=Number(r);return!isNaN(c)&&(null==t.above||isNaN(d)||d<c)&&(null==t.below||isNaN(l)||l>c)}(t,e);case"and":return function(t,e){return!t.conditions||d(t.conditions,e)}(t,e);case"not":return function(t,e){return!t.conditions||!d(t.conditions,e)}(t,e);case"or":return function(t,e){return!t.conditions||t.conditions.some(t=>d([t],e))}(t,e);default:return c(t,e)}var n;return c(t,e)})}function l(t){const e=new Set;for(const o of t)if("numeric_state"===o.condition)o.entity&&e.add(o.entity),"string"==typeof o.above&&(0,r.n)(o.above)&&e.add(o.above),"string"==typeof o.below&&(0,r.n)(o.below)&&e.add(o.below);else if("state"===o.condition){var n,s;o.entity&&e.add(o.entity),[...null!==(n=(0,i.e)(o.state))&&void 0!==n?n:[],...null!==(s=(0,i.e)(o.state_not))&&void 0!==s?s:[]].forEach(t=>{t&&(0,r.n)(t)&&e.add(t)})}else if("conditions"in o&&o.conditions)return new Set([...e,...l(o.conditions)]);return e}function h(t){return null!=t.entity&&(null!=t.state||null!=t.state_not)}function f(t){return t.every(t=>{if("condition"in t)switch(t.condition){case"screen":return null!=t.media_query;case"user":return function(t){return null!=t.users}(t);case"location":return function(t){return null!=t.locations}(t);case"numeric_state":return function(t){return null!=t.entity&&(null!=t.above||null!=t.below)}(t);case"and":case"not":case"or":return function(t){return null!=t.conditions}(t);default:return h(t)}return h(t)})}function _(t,e){return"conditions"in t&&t.conditions?Object.assign(Object.assign({},t),{},{conditions:t.conditions.map(t=>_(t,e))}):"state"===t.condition||"numeric_state"===t.condition?Object.assign({entity:e},t):t}function p(t){return t.reduce((t,e)=>("conditions"in e&&e.conditions&&t.push(...p(e.conditions)),"screen"===e.condition&&e.media_query&&t.push(e.media_query),t),[])}function v(t,e){return p(t).map(t=>(0,s.m)(t,t=>{e(t)}))}},43067:function(t,e,n){n.d(e,{E:function(){return a}});n(45269),n(46852),n(35748),n(65315),n(837),n(22416),n(95013);var i=n(69868),s=n(84922),r=n(11991),o=n(29561),u=n(97073);class a extends s.mN{createRenderRoot(){return this}validateConfig(t){if(!t.conditions)throw new Error("No conditions configured");if(!Array.isArray(t.conditions))throw new Error("Conditions need to be an array");if(!(0,u.db)(t.conditions))throw new Error("Conditions are invalid");this.lastChild&&this.removeChild(this.lastChild),this._config=t}disconnectedCallback(){super.disconnectedCallback(),this._clearMediaQueries()}connectedCallback(){super.connectedCallback(),this._listenMediaQueries(),this._updateVisibility()}_clearMediaQueries(){this._listeners.forEach(t=>t()),this._listeners=[]}_listenMediaQueries(){if(!this._config||!this.hass)return;const t=this._config.conditions.filter(t=>"condition"in t),e=(0,u.gW)(t);if((0,o.b)(e,this._mediaQueries))return;this._clearMediaQueries();const n=this._config.conditions,i=1===n.length&&"condition"in n[0]&&"screen"===n[0].condition&&!!n[0].media_query;this._listeners=(0,u.CZ)(t,t=>{i?this.setVisibility(t):this._updateVisibility()})}update(t){super.update(t),(t.has("_element")||t.has("_config")||t.has("hass")||t.has("preview"))&&(this._listenMediaQueries(),this._updateVisibility())}_updateVisibility(){if(!this._element||!this.hass||!this._config)return;this._element.preview=this.preview;const t=(0,u.XH)(this._config.conditions,this.hass);this.setVisibility(t)}setVisibility(t){if(!this._element||!this.hass)return;const e=this.preview||t;this.hidden!==!e&&(this.toggleAttribute("hidden",!e),this.style.setProperty("display",e?"":"none")),e?(this._element.hass=this.hass,this._element.parentElement||this.appendChild(this._element)):this._element.parentElement&&this.removeChild(this._element)}constructor(...t){super(...t),this.preview=!1,this._listeners=[],this._mediaQueries=[]}}(0,i.__decorate)([(0,r.MZ)({attribute:!1})],a.prototype,"hass",void 0),(0,i.__decorate)([(0,r.MZ)({type:Boolean})],a.prototype,"preview",void 0),(0,i.__decorate)([(0,r.wk)()],a.prototype,"_config",void 0),a=(0,i.__decorate)([(0,r.EM)("hui-conditional-base")],a)},38011:function(t,e,n){n.a(t,async function(t,i){try{n.r(e);n(46852),n(12977);var s=n(69868),r=n(11991),o=n(43067),u=n(6055),a=n(44017),c=t([u]);u=(c.then?(await c)():c)[0];class d extends o.E{setConfig(t){if(this.validateConfig(t),!t.row)throw new Error("No row configured");this._element=(0,u.T)(t.state_color?Object.assign({state_color:!0},t.row):t.row)}setVisibility(t){const e=this.preview||t,n=this.hidden;super.setVisibility(t),n!==this.hidden&&(0,a.r)(this,"row-visibility-changed",{row:this,value:e})}}d=(0,s.__decorate)([(0,r.EM)("hui-conditional-row")],d),i()}catch(d){i(d)}})}}]);
//# sourceMappingURL=95176.d2ddf1f246744147.js.map