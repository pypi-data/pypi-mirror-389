"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["70175"],{60393:function(t,e,i){i.d(e,{Tc:function(){return h}});i(79827),i(35748),i(65315),i(84136),i(22416),i(37089),i(42124),i(86581),i(67579),i(41190),i(47849),i(18223),i(1485),i(91844),i(39118),i(95013);var a=["Shift","Meta","Alt","Control"],s="object"==typeof navigator?navigator.platform:"",n=/Mac|iPod|iPhone|iPad/.test(s),o=n?"Meta":"Control",r="Win32"===s?["Control","Alt"]:n?["Alt"]:[];function c(t,e){return"function"==typeof t.getModifierState&&(t.getModifierState(e)||r.includes(e)&&t.getModifierState("AltGraph"))}function l(t){return t.trim().split(" ").map(function(t){var e=t.split(/\b\+/),i=e.pop(),a=i.match(/^\((.+)\)$/);return a&&(i=new RegExp("^"+a[1]+"$")),[e=e.map(function(t){return"$mod"===t?o:t}),i]})}function d(t,e){var i=e[0],s=e[1];return!((s instanceof RegExp?!s.test(t.key)&&!s.test(t.code):s.toUpperCase()!==t.key.toUpperCase()&&s!==t.code)||i.find(function(e){return!c(t,e)})||a.find(function(e){return!i.includes(e)&&s!==e&&c(t,e)}))}function u(t,e){var i;void 0===e&&(e={});var a=null!=(i=e.timeout)?i:1e3,s=Object.keys(t).map(function(e){return[l(e),t[e]]}),n=new Map,o=null;return function(t){t instanceof KeyboardEvent&&(s.forEach(function(e){var i=e[0],a=e[1],s=n.get(i)||i;d(t,s[0])?s.length>1?n.set(i,s.slice(1)):(n.delete(i),a(t)):c(t,t.key)||n.delete(i)}),o&&clearTimeout(o),o=setTimeout(n.clear.bind(n),a))}}function h(t,e,i){var a=void 0===i?{}:i,s=a.event,n=void 0===s?"keydown":s,o=a.capture,r=u(e,{timeout:a.timeout});return t.addEventListener(n,r,o),function(){t.removeEventListener(n,r,o)}}},71770:function(t,e,i){i(35748),i(12977),i(95013);var a=i(69868),s=i(30103),n=i(86811),o=i(49377),r=i(34800),c=i(84922),l=i(11991);let d,u,h,p,_=t=>t;class m extends s.k{renderOutline(){return this.filled?(0,c.qy)(d||(d=_`<span class="filled"></span>`)):super.renderOutline()}getContainerClasses(){return Object.assign(Object.assign({},super.getContainerClasses()),{},{active:this.active})}renderPrimaryContent(){return(0,c.qy)(u||(u=_` <span class="leading icon" aria-hidden="true"> ${0} </span> <span class="label">${0}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${0} </span> `),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}renderTrailingIcon(){return(0,c.qy)(h||(h=_`<slot name="trailing-icon"></slot>`))}constructor(...t){super(...t),this.filled=!1,this.active=!1}}m.styles=[o.R,r.R,n.R,(0,c.AH)(p||(p=_`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`))],(0,a.__decorate)([(0,l.MZ)({type:Boolean,reflect:!0})],m.prototype,"filled",void 0),(0,a.__decorate)([(0,l.MZ)({type:Boolean})],m.prototype,"active",void 0),m=(0,a.__decorate)([(0,l.EM)("ha-assist-chip")],m)},93611:function(t,e,i){i.d(e,{j:function(){return a}});const a=["relative","total","date","time","datetime"]},39788:function(t,e,i){i.a(t,async function(t,a){try{i.r(e),i.d(e,{HuiStatisticsGraphCardEditor:function(){return M}});i(35748),i(99342),i(65315),i(837),i(84136),i(22416),i(37089),i(59023),i(12977),i(5934),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(95013);var s=i(69868),n=i(84922),o=i(11991),r=i(65940),c=i(36207),l=i(11111),d=i(44017),u=i(29561),h=i(52111),p=i(50416),_=(i(60921),i(63002)),m=i(38177),f=i(85532),g=i(6633),v=i(73097),y=t([p,v,_,h]);[p,v,_,h]=y.then?(await y)():y;let b,q,k=t=>t;const x=(0,c.KC)([(0,c.eu)("state"),(0,c.eu)("sum"),(0,c.eu)("change"),(0,c.eu)("min"),(0,c.eu)("max"),(0,c.eu)("mean")]),C=(0,c.kp)(f.H,(0,c.Ik)({entities:(0,c.YO)(g.l),title:(0,c.lq)((0,c.Yj)()),days_to_show:(0,c.lq)((0,c.ai)()),period:(0,c.lq)((0,c.KC)([(0,c.eu)("5minute"),(0,c.eu)("hour"),(0,c.eu)("day"),(0,c.eu)("week"),(0,c.eu)("month")])),chart_type:(0,c.lq)((0,c.KC)([(0,c.eu)("bar"),(0,c.eu)("line")])),stat_types:(0,c.lq)((0,c.KC)([(0,c.YO)(x),x])),unit:(0,c.lq)((0,c.Yj)()),hide_legend:(0,c.lq)((0,c.zM)()),logarithmic_scale:(0,c.lq)((0,c.zM)()),min_y_axis:(0,c.lq)((0,c.ai)()),max_y_axis:(0,c.lq)((0,c.ai)()),fit_y_data:(0,c.lq)((0,c.zM)())})),w=["5minute","hour","day","week","month"],$=["mean","min","max","sum","state","change"];class M extends n.WF{setConfig(t){(0,c.vA)(t,C),this._config=t,this._configEntities=t.entities?(0,m.L)(t.entities,!1).map(t=>t.entity):[]}willUpdate(t){var e;t.has("_configEntities")&&!(0,u.b)(this._configEntities,t.get("_configEntities"))&&(this._metaDatas=void 0,null!==(e=this._configEntities)&&void 0!==e&&e.length&&this._getStatisticsMetaData(this._configEntities))}render(){var t,e;if(!this.hass||!this._config)return n.s6;const i=this._schema(this.hass.localize,this._configEntities,this._metaDatas,void 0!==this._config.min_y_axis||void 0!==this._config.max_y_axis),a=this._config.stat_types?(0,l.e)(this._config.stat_types):$.filter(t=>{var e;return null===(e=this._metaDatas)||void 0===e?void 0:e.some(e=>(0,_.nN)(e,t))}),s=Object.assign(Object.assign({chart_type:"line",period:"hour"},this._config),{},{stat_types:a}),o=null===(t=this._metaDatas)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.unit_class,r=o||null===(e=this._metaDatas)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.statistics_unit_of_measurement;return(0,n.qy)(b||(b=k` <ha-form .hass="${0}" .data="${0}" .schema="${0}" .computeLabel="${0}" @value-changed="${0}"></ha-form> <ha-statistics-picker allow-custom-entity .hass="${0}" .placeholder="${0}" .label="${0}" .includeStatisticsUnitOfMeasurement="${0}" .includeUnitClass="${0}" .ignoreRestrictionsOnFirstStatistic="${0}" .value="${0}" .configValue="${0}" @value-changed="${0}"></ha-statistics-picker> `),this.hass,s,i,this._computeLabelCallback,this._valueChanged,this.hass,this.hass.localize("ui.panel.lovelace.editor.card.statistics-graph.pick_statistic"),this.hass.localize("ui.panel.lovelace.editor.card.statistics-graph.picked_statistic"),r,o,!0,this._configEntities,"entities",this._entitiesChanged)}_valueChanged(t){(0,d.r)(this,"config-changed",{config:t.detail.value})}async _entitiesChanged(t){const e=t.detail.value,i=e.map(t=>{const e=this._config.entities.find(e=>"string"!=typeof e&&e.entity===t);return null!=e?e:t}),a=Object.assign(Object.assign({},this._config),{},{entities:i});null!=e&&e.some(t=>(0,_.OQ)(t))&&"5minute"===a.period&&delete a.period;const s=a.stat_types||a.unit?await(0,_.Wr)(this.hass,e):void 0;a.stat_types&&a.entities.length&&(a.stat_types=(0,l.e)(a.stat_types).filter(t=>s.some(e=>(0,_.nN)(e,t))),a.stat_types.length||delete a.stat_types),a.unit&&!s.some(t=>(0,_.JE)(this.hass,null==t?void 0:t.statistic_id,t)===a.unit)&&delete a.unit,(0,d.r)(this,"config-changed",{config:a})}constructor(...t){super(...t),this._getStatisticsMetaData=async t=>{this._metaDatas=await(0,_.Wr)(this.hass,t||[])},this._schema=(0,r.A)((t,e,i,a)=>{const s=new Set;null==i||i.forEach(t=>{const e=(0,_.JE)(this.hass,t.statistic_id,t);e&&s.add(e)});const n=[{name:"title",selector:{text:{}}},{name:"",type:"grid",schema:[{name:"period",required:!0,selector:{select:{options:w.map(i=>({value:i,label:t(`ui.panel.lovelace.editor.card.statistics-graph.periods.${i}`),disabled:"5minute"===i&&(null==e?void 0:e.some(t=>(0,_.OQ)(t)))}))}}},{name:"days_to_show",default:v.DEFAULT_DAYS_TO_SHOW,selector:{number:{min:1,mode:"box"}}},{name:"stat_types",required:!0,selector:{select:{multiple:!0,mode:"list",options:$.map(e=>({value:e,label:t(`ui.panel.lovelace.editor.card.statistics-graph.stat_type_labels.${e}`),disabled:!i||!i.some(t=>(0,_.nN)(t,h.n[e]))}))}}},{name:"chart_type",required:!0,type:"select",options:[["line",t("ui.panel.lovelace.editor.card.statistics-graph.chart_type_labels.line")],["bar",t("ui.panel.lovelace.editor.card.statistics-graph.chart_type_labels.bar")]]},{name:"",type:"grid",schema:[{name:"min_y_axis",required:!1,selector:{number:{mode:"box",step:"any"}}},{name:"max_y_axis",required:!1,selector:{number:{mode:"box",step:"any"}}}]},...a?[{name:"fit_y_data",required:!1,selector:{boolean:{}}}]:[],{name:"hide_legend",required:!1,selector:{boolean:{}}},{name:"logarithmic_scale",required:!1,selector:{boolean:{}}}]}];return s.size>1&&n[1].schema.push({name:"unit",required:!1,selector:{select:{options:Array.from(s).map(t=>({value:t,label:t}))}}}),n}),this._computeLabelCallback=t=>{switch(t.name){case"chart_type":case"stat_types":case"period":case"unit":case"hide_legend":case"logarithmic_scale":case"min_y_axis":case"max_y_axis":case"fit_y_data":return this.hass.localize(`ui.panel.lovelace.editor.card.statistics-graph.${t.name}`);default:return this.hass.localize(`ui.panel.lovelace.editor.card.generic.${t.name}`)}}}}M.styles=(0,n.AH)(q||(q=k`ha-statistics-picker{width:100%}`)),(0,s.__decorate)([(0,o.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,s.__decorate)([(0,o.wk)()],M.prototype,"_config",void 0),(0,s.__decorate)([(0,o.wk)()],M.prototype,"_configEntities",void 0),(0,s.__decorate)([(0,o.wk)()],M.prototype,"_metaDatas",void 0),M=(0,s.__decorate)([(0,o.EM)("hui-statistics-graph-card-editor")],M),a()}catch(b){a(b)}})},85532:function(t,e,i){i.d(e,{H:function(){return s}});var a=i(36207);const s=(0,a.Ik)({type:(0,a.Yj)(),view_layout:(0,a.bz)(),layout_options:(0,a.bz)(),grid_options:(0,a.bz)(),visibility:(0,a.bz)(),disabled:(0,a.lq)((0,a.zM)())})},6633:function(t,e,i){i.d(e,{l:function(){return r}});var a=i(36207),s=i(93611),n=i(2962),o=i(89485);const r=(0,a.KC)([(0,a.Ik)({entity:(0,a.Yj)(),name:(0,a.lq)(o.q),icon:(0,a.lq)((0,a.Yj)()),image:(0,a.lq)((0,a.Yj)()),secondary_info:(0,a.lq)((0,a.Yj)()),format:(0,a.lq)((0,a.vP)(s.j)),state_color:(0,a.lq)((0,a.zM)()),tap_action:(0,a.lq)(n.kn),hold_action:(0,a.lq)(n.kn),double_tap_action:(0,a.lq)(n.kn),confirmation:(0,a.lq)(n.dk),show_last_changed:(0,a.lq)((0,a.zM)()),show_state:(0,a.lq)((0,a.zM)())}),(0,a.Yj)()])},74758:function(t,e,i){i.d(e,{o:function(){return o}});var a=i(48869),s=i(27554),n=i(28829);function o(t,e,i){const o=(0,n.b)(t,e)/s.Cg;return(0,a.u)(null==i?void 0:i.roundingMethod)(o)}}}]);
//# sourceMappingURL=70175.93113ad805c1f816.js.map