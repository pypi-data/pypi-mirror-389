"use strict";(self.webpackChunk_mchp_tpds_application_root=self.webpackChunk_mchp_tpds_application_root||[]).push([[738],{1357:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var a=n(6540),l=n(467),r=n(296),c=n(4756),i=n.n(c),o=n(1027),s=n(9685),u=n(1066),d=n(3561),m=n(8072),p=n(7547),f=n(9565);function v(e){var t,n,l,r,c,i,s,u=e.deviceName,d=(0,p.Sq)(u),m=d.data,f=d.isFetching,v=null;return!1===f&&(v=m[u]),f?"loading...":!f&&a.createElement(a.Fragment,null,a.createElement(o.H2.Button,{label:a.createElement("h2",null,u),className:"p-button-link",onClick:function(){var e;return window.open(null===(e=v)||void 0===e?void 0:e.partLink,"_blank")},icon:"pi pi-link",iconPos:"right"}),a.createElement("ul",{className:"text-xl m-1"},a.createElement("li",null,a.createElement("b",null,"Base Part:")," ",null===(t=v)||void 0===t?void 0:t.basePart),a.createElement("li",null,a.createElement("b",null,"Provisioning Flow:")," ",null===(n=v)||void 0===n?void 0:n.provisioningFlow),a.createElement("li",null,a.createElement("b",null,"Product Category:")," ",null===(l=v)||void 0===l?void 0:l.productCategory),a.createElement("li",null,a.createElement("b",null,"Part Type:")," ",null===(r=v)||void 0===r?void 0:r.partType),a.createElement("li",null,a.createElement("b",null,"Part Interface: "),null===(c=v)||void 0===c||null===(c=c.partInterface)||void 0===c?void 0:c.map(function(e,t,n){return t===n.length-1?a.createElement("span",{key:"".concat(e,"_").concat(t),className:"uppercase"},e):a.createElement("span",{key:"".concat(e,"_").concat(t),className:"uppercase"},e,","," ")})),a.createElement("li",null,a.createElement("b",null,"TPDS Release:")," ",null!==(i=v)&&void 0!==i&&i.tpdsRelease?"Yes":"No"),a.createElement("li",null,a.createElement("b",null,"NDA Required:")," ",null!==(s=v)&&void 0!==s&&s.ndaRequired?"Yes":"No")))}const h=function(){var e,t,n,c=a.useRef(null),h=(0,d.wA)(),b=(0,d.d4)(function(e){return e.appData.selectedBoard}),g=(0,d.d4)(function(e){return e.appData.selectedDevice}),E=(0,p.Sg)(),y=E.data,w=E.refetch,k=(0,p.uS)(),x=k.data,N=k.isFetching,A=(0,p.ai)(),S=(0,r.A)(A,1)[0],C=(0,p.gH)(null===b||N?u.hT:x[b]),P=C.data,D=C.isFetching,O=a.useState(!1),H=(0,r.A)(O,2),F=H[0],j=H[1];(0,a.useEffect)(function(){w()},[w,b]);var I=function(){var e=(0,l.A)(i().mark(function e(t){var n,a,l;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=1,S(t);case 1:l=e.sent,j(!1),"success"===(null==l?void 0:l.data)?null==c||null===(n=c.current)||void 0===n||n.show({closable:!0,severity:"success",summary:"Success",detail:"".concat(t," is factory programmed"),life:5e3}):null==c||null===(a=c.current)||void 0===a||a.show({closable:!0,severity:"error",summary:"Error",detail:null==l?void 0:l.data,sticky:!0});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.board_name,n=(0,p.gH)(t),l=n.data;return n.isSuccess&&l&&a.createElement("div",{id:"board-item-".concat(null==l?void 0:l.partNumber),className:"cursor-pointer",style:{minWidth:"150px"}},a.createElement(s.m,{target:"#board-item-".concat(null==l?void 0:l.partNumber),position:"top",autoHide:!1,baseZIndex:100},a.createElement(a.Fragment,null,a.createElement("h3",null,(null==l?void 0:l.description)+(null!=y&&y.some(function(e){return e===(null==l?void 0:l.partNumber)})?"":" (Not Connected)")),a.createElement(o.H2.Button,{label:"more info",className:"p-button-link p-button-secondary text-white",onClick:function(){return window.open(null==l?void 0:l.web_link,"_blank")},icon:"pi pi-external-link",iconPos:"right"}))),a.createElement("img",{src:null==l?void 0:l.img,alt:"Board",className:"h-5rem"}),a.createElement("p",null,null==l?void 0:l.partNumber))};return a.createElement(a.Fragment,null,a.createElement(f.y,{ref:c,position:"center"}),a.createElement("h2",null,"Supported Boards"),a.createElement(o.H2.RadioGroup,{value:b,name:"boards",onChange:function(e){h((0,m.Gj)(e.target.value)),h((0,m.IF)(null))},items:null==x?void 0:x.map(function(e,t){return{key:"Board_".concat(t),value:t,label:a.createElement(T,{board_name:e})}})}),a.createElement("span",null,a.createElement(o.H2.Button,{label:"Scan for H/W changes",icon:"pi pi-refresh",onClick:function(){return w()},className:"p-button-success"}),a.createElement(o.H2.Button,{label:"Factory Program",style:{position:"relative",left:"5%"},disabled:!(null!==b&&!N&&null!=y&&y.includes(x[b])),className:"p-button-warning mr-3",onClick:function(){D||I(null==P?void 0:P.partNumber)},tooltip:null!==b&&!N&&!(null!=y&&y.includes(x[b]))&&"".concat(x[b]," is not connected for Factory Programming"),tooltipOptions:{showOnDisabled:!0}})),null!==b&&!N&&a.createElement(o.H2.Dialog,{visible:F,onHide:function(){return null},header:a.createElement("div",null,a.createElement("h3",null,"Started Flash Programming on ",x[b]),a.createElement("p",null,"please wait a moment..."),a.createElement(o.H2.ProgressBar,{mode:"indeterminate",style:{height:"10px",width:"100%"},color:"#059df0"})),resizable:!1,draggable:!1,closable:!1}),null!==b&&(null==P||null===(e=P.devices)||void 0===e?void 0:e.length)>0&&!N&&!D&&a.createElement(a.Fragment,null,a.createElement("h2",null,"Available Devices"),a.createElement(o.H2.RadioGroup,{value:g,name:"device",onChange:function(e){return h((0,m.IF)(e.target.value))},items:null==P||null===(t=P.devices)||void 0===t?void 0:t.map(function(e,t){return{key:"device".concat(t),value:t,label:e.deviceName}})})),null!==b&&null!==g&&!N&&!D&&a.createElement(v,{deviceName:null==P||null===(n=P.devices[g])||void 0===n?void 0:n.deviceName}))};var b=n(4980),g=n(1360),E=n.n(g),y=n(8419),w=n(413),k=n(9237),x=n(5545);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,b.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const S=function(){var e=(0,d.wA)(),t=(0,d.d4)(function(e){return e.appData.manifestData}),n=(0,d.d4)(function(e){return e.appData.activeEntry}),c=a.useRef(null),s=a.useState(null),u=(0,r.A)(s,2),v=u[0],h=u[1],b=a.useState(!1),g=(0,r.A)(b,2),N=g[0],S=g[1],C=a.useState(""),P=(0,r.A)(C,2),D=P[0],O=P[1],H=(0,p.QK)(),F=(0,r.A)(H,1)[0],j=a.useState(!1),I=(0,r.A)(j,2),T=I[0],B=I[1],_=(0,a.useState)(null),U=(0,r.A)(_,2),L=U[0],z=U[1],R=(0,a.useState)(null),M=(0,r.A)(R,2),q=M[0],G=M[1],K=(0,x.A)(),V=K.showToast,Q=K.showToastError,X=K.toast,Y=(0,a.useState)(""),W=(0,r.A)(Y,2),Z=W[0],J=W[1],$=(0,a.useState)({}),ee=(0,r.A)($,2),te=ee[0],ne=ee[1],ae=(0,p.Dk)(),le=(0,r.A)(ae,1)[0],re=(0,p.Sq)().data,ce=(0,a.useState)([]),ie=(0,r.A)(ce,2),oe=ie[0],se=ie[1],ue=(0,a.useState)([]),de=(0,r.A)(ue,2),me=de[0],pe=de[1],fe=(0,a.useState)([]),ve=(0,r.A)(fe,2),he=ve[0],be=ve[1];(0,a.useEffect)(function(){if(re){for(var e=new Set(["Secure Element","MCU32"]),t=new Set,n=[],a=[],l=0,r=Object.values(re);l<r.length;l++){var c=r[l];if(e.has(c.productCategory)){var i,o=null==c?void 0:c.basePart,s={label:o,value:o,interface:null!==(i=null==c?void 0:c.partInterface)&&void 0!==i?i:[],productCategory:c.productCategory};n.push(s),t.has(o)||(t.add(o),a.push(s))}}se(n),pe(a)}},[re]),(0,a.useEffect)(function(){var e=oe.find(function(e){return e.value===q});e&&be(e.interface)},[q]);var ge=function(){var e=(0,l.A)(i().mark(function e(t){var n,a,l,r,c,o;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=oe.find(function(e){return e.value===q}),l={},q||(l.selectedDevice="Please select an option."),(null==a||null===(n=a.interface)||void 0===n?void 0:n.length)>0&&!L&&(l.selectedInterface="Please select an interface."),Z||(l.deviceAddress="Please enter a valid deviceAddress."),ne(l),!(Object.keys(l).length>0)){e.next=1;break}return e.abrupt("return");case 1:return e.prev=1,e.next=2,le({device:q,address:Z,interface:L});case 2:null!=(c=e.sent)&&null!==(r=c.data)&&void 0!==r&&r.status?V({message:c.data.message}):Q({message:c.data.message}),e.next=4;break;case 3:e.prev=3,o=e.catch(1),Q({message:o.error});case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=(0,l.A)(i().mark(function e(t){var n,a,l,r=arguments;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:null,(a=new FormData).append("manifest_file",t),n&&a.append("certificate_file",n),e.next=1,F(a);case 1:return l=e.sent,e.abrupt("return",l.data);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ye=function(t){var n,a;"Success"===t.message?(e((0,m.ku)(JSON.parse(t.data))),e((0,m.zC)(1)),null==X||null===(n=X.current)||void 0===n||n.show({closable:!0,severity:"success",summary:"Success",detail:"Manifest File is Decoded",life:5e3})):(null==X||null===(a=X.current)||void 0===a||a.show({closable:!0,severity:"error",summary:t.message,detail:t.data,sticky:!0}),e((0,m.ku)([])),e((0,m.zC)(1))),c.current.clear(),S(!1)},we=function(){var e=(0,l.A)(i().mark(function e(t){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B(!1),e.next=1,Ee(v,t.files[0]);case 1:n=e.sent,ye(n);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ke=function(){e((0,m.ku)([])),e((0,m.zC)(null)),O("")},xe=function(){var e=(0,l.A)(i().mark(function e(t){var n,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ke(),S(!0),null==X||null===(n=X.current)||void 0===n||n.clear(),h(t.files[0]),e.next=1,Ee(t.files[0]);case 1:"Verification is failed"===(a=e.sent).message?B(!0):ye(a),c.current.clear(),S(!1);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ne=a.createElement("div",{className:"card p-3"},a.createElement("div",{className:"flex align-items-center flex-wrap justify-content-between"},a.createElement("span",{className:"flex p-buttonset"},a.createElement(o.H2.Button,{className:"mt-2 p-button-info",icon:"pi pi-caret-left",onClick:function(){return 1!==n&&e((0,m.zC)(n-1))},label:"Prev"}),a.createElement(o.H2.Button,{className:"mt-2 p-button-info",icon:"pi pi-caret-right",iconPos:"right",onClick:function(){return n!==t.length&&e((0,m.zC)(n+1))},label:"Next"})),a.createElement("h3",null,"Processing entry ",n," of ",null==t?void 0:t.length," "),a.createElement("div",{className:"p-inputgroup",style:{width:"300px"}},a.createElement(o.H2.Button,{icon:"pi pi-search",className:"p-button-info",onClick:function(){var n,a=t.findIndex(function(e){return e.uniqueId===D});-1===a?null==X||null===(n=X.current)||void 0===n||n.show({closable:!0,severity:"warn",summary:"No Such Unique ID",detail:"Please give valid uid",life:5e3}):e((0,m.zC)(a+1))}}))),a.createElement("div",{className:"line-height-3 card-container blue-container"},a.createElement("div",{className:"overflow-auto p-3 border-blue-500 border-3 border-round",style:{height:"730px",wordBreak:"break-all",whiteSpace:"wrap",overflowWrap:"break-word"}},a.createElement(E(),{src:t[n-1],name:!1,theme:"summerfruit:inverted",iconStyle:"triangle",displayDataTypes:!1,displayObjectSize:!1,quotesOnKeys:!1}))),a.createElement(o.H2.Button,{className:"mt-1 p-button-danger col-1 col-offset-11",onClick:ke,label:"Close"})),Ae=a.createElement(a.Fragment,null,a.createElement(o.H2.Button,{icon:"pi pi-spin pi-spinner text-5xl",iconPos:"right",className:"ml-2 p-6 text-5xl p-button-rounded p-button-info p-button-text",label:"loading..."}));return a.createElement("div",null,a.createElement(f.y,{ref:X,position:"top-center"}),a.createElement("div",{className:"grid"},a.createElement("div",{className:"col-4"},a.createElement("h2",null,"TrustPlatform Manifest File"),a.createElement("p",null,"The manifest file format is designed to convey the unique information about a group of secure subsystems, including unique ID (e.g., serial number), public keys and certificates. This was primarily developed for CryptoAuthenticationâ„¢ secure elements. However, it is structured to work for other secure subsystems as well. To know more about manifest file format",a.createElement("a",{href:"https://ww1.microchip.com/downloads/en/DeviceDoc/TrustPlatformManifestFileFormat_2019-09-26_A.pdf",target:"_blank",rel:"noopener noreferrer"}," ","click here")),a.createElement(o.H2.FileUpload,{ref:c,auto:!0,chooseOptions:{label:"Open Manifest File",icon:"pi pi-upload",className:"p-button-lg p-button-danger",style:{width:"100%"}},mode:"basic",name:"manifestFile",accept:[".json",".xml"],customUpload:!0,uploadHandler:xe}),a.createElement("h2",null,"Manifest Generation"),a.createElement("div",null,a.createElement("p",null,"To generate the Manifest file, ensure that a TPDS-supported board with a connected Secure Element is available. The board must be running the Kit Parser application, which enables the TPDS application to communicate with the Secure Element via the connected board. Manifest generation will fail if the board is not connected or not properly programmed."),a.createElement("p",null,"The Kit Parser application can be programmed either by selecting `Factory Program` under the `Device Interactions` tab or by externally loading the hex file using tools such as MPLAB X IPE. Once the board is prepared, select the connected device, specify its IO interface, and enter the address of the connected device to proceed with Manifest generation."),a.createElement("label",{htmlFor:"dropdown"},"Device:"),a.createElement(y.m,{id:"dropdown",value:q,options:me,onChange:function(e){G(e.value),z(null),ne(function(e){return A(A({},e),{},{selectedDevice:null,selectedInterface:null})})},style:{width:"50%",position:"relative",left:"5%"},optionLabel:"label",placeholder:"Choose device"}),te.selectedDevice&&a.createElement("small",{style:{color:"red",marginTop:"4px",position:"relative",left:"5%"}},te.selectedDevice)),a.createElement("br",null),a.createElement("div",{className:"flex flex-row align-items-center"},a.createElement("label",null,"Interface:"),a.createElement("div",{className:"flex flex-row",style:{position:"relative",left:"3%"}},q&&he.length>0&&he.map(function(e,t){return a.createElement("div",{key:"".concat(e,"-").concat(t),className:"mr-2 flex align-items-center"},a.createElement(k.a,{inputId:e,name:e,value:e,onChange:function(e){z(e.value),ne(function(e){return A(A({},e),{},{selectedInterface:null})})},checked:L===e}),a.createElement("label",{htmlFor:e,className:"ml-2"},e.toUpperCase()))}))),te.selectedInterface&&a.createElement("small",{style:{color:"red",marginTop:"4px",position:"relative",left:"4%"}},te.selectedInterface),a.createElement("br",null),a.createElement("div",null,a.createElement("label",{htmlFor:"deviceAddress"},"Address:"),a.createElement(w.S,{id:"deviceAddress",value:Z,style:{position:"relative",left:"4%"},onChange:function(e){!function(e){var t=e.target.value.toUpperCase();(t=t.replace(/[^0-9A-F]/g,"")).length>2&&(t=t.slice(0,2)),J(t)}(e),ne(function(e){return A(A({},e),{},{deviceAddress:null})})},placeholder:"Enter hex",maxLength:2,onFocus:function(e){return e.target.style.borderColor="#006d6d"},onBlur:function(e){return e.target.style.borderColor="teal"}}),te.deviceAddress&&a.createElement("small",{style:{color:"red",marginTop:"4px",position:"relative",left:"5%"}},te.deviceAddress)),a.createElement("br",null),a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},a.createElement(o.H2.Button,{label:"Generate",icon:"pi pi-download",className:"p-button-lg p-button-success",onClick:ge,style:{width:"100%"}}))),a.createElement(o.H2.Dialog,{visible:T,onHide:function(){return B(!1)},header:a.createElement("div",{className:"text-center"},a.createElement("h4",null,"Verification of SignedSecureElement objects failed with MCHP Manifest Signer Certificates"),a.createElement("p",null,"Do you want to upload custom Manifest Signer Certificate?"))},a.createElement("div",{className:"flex justify-content-center"},a.createElement(o.H2.FileUpload,{auto:!0,chooseOptions:{label:"Yes",className:"p-button-success",icon:"pi"},mode:"basic",name:"certificate_file",accept:[".crt",".pem",".cert"],customUpload:!0,uploadHandler:we}),a.createElement(o.H2.Button,{label:"No",onClick:function(){return B(!1)},className:"ml-3 p-button-warning"}))),a.createElement("div",{className:"col-8"},null!=t&&t.length?Ne:N?Ae:a.createElement(a.Fragment,null))))};var C=n(818);function P(e){var t=e.decoded;return a.createElement("div",{className:"line-height-3 card-container blue-container"},a.createElement("div",{className:"overflow-auto p-3 border-blue-500 border-3 border-round",style:{height:"730px",wordBreak:"break-all",whiteSpace:"wrap",overflowWrap:"break-word"}},a.createElement(E(),{src:t,name:"Certificate Summary",theme:"summerfruit:inverted",iconStyle:"triangle",displayDataTypes:!1,displayObjectSize:!1,quotesOnKeys:!1,collapsed:1,displayArrayKey:!1})))}const D=function(){var e=(0,d.wA)(),t=(0,d.d4)(function(e){return e.appData.certificate}),n=(0,d.d4)(function(e){return e.appData.decodedCertificate}),l=a.useRef(null),r=a.useRef(null),c=function(n){var a;n&&(t=n);try{a=new C.yI(t),e((0,m.dz)(a)),e((0,m.Qs)(a.toString()))}catch(n){try{a=new C.lt(t),e((0,m.dz)(a)),e((0,m.Qs)(a.toString()))}catch(t){var l;e((0,m.dz)({})),null==r||null===(l=r.current)||void 0===l||l.show({closable:!0,severity:"error",summary:"Invalid Certificate",detail:"Please give valid certificate to decode",life:5e3})}}};return a.createElement("div",{className:"grid"},a.createElement(f.y,{ref:r,position:"center"}),a.createElement("div",{className:"col-6",style:{width:"50%"}},a.createElement("h2",null,"X.509 certificate Decoder"),a.createElement("p",null,"An X.509 certificate is an electronic document that proves the ownership of a cryptographic public key. The certificate includes information about the key, its owner (subject), issuer, and the digital signature of the issuer that verifies the content of the certificate. If the certificate signature is valid and the software trusts the issuer, then the public key can be used to communicate securely with the certificate subject. The most common format for a certificate is defined in the X.509 standard and further detailed in RFC 5280."),a.createElement("p",null,"Decode any PEM, DER, CER, CRT formatted X.509 certificate by pasting its content in the following text field and clicking the Decode button."),a.createElement(o.H2.Textarea,{value:t,onChange:function(t){return e((0,m.Qs)(t.target.value))},rows:20,style:{width:"100%"},className:"text-lg"}),a.createElement("div",{className:"grid m-2"},a.createElement(o.H2.FileUpload,{ref:l,mode:"basic",customUpload:!0,chooseLabel:"Upload Certificate",chooseOptions:{icon:"pi pi-upload",className:"p-button-lg p-button-danger"},name:"certificate[]",accept:".pem, .der, .cer, .crt, .csr",onSelect:function(t){var n;if(e((0,m.Qs)("")),e((0,m.dz)({})),t.files&&t.files.length>0){var a=new FileReader;a.readAsArrayBuffer(t.files[0],"UTF-8");var r=!1;-1!==t.files[0].name.toLowerCase().indexOf(".der")&&(r=!0),a.onload=function(e){var t=e.target.result;!1===r&&(t=new Int8Array(t).filter(function(e){return 13!==e}).buffer),c(t)}}null==l||null===(n=l.current)||void 0===n||n.clear()}}),a.createElement(o.H2.Button,{label:"Decode",disabled:""===t,className:"ml-2",onClick:function(){return c()}}))),(n&&Object.keys(n).length)>0?a.createElement("div",{className:"col-6",style:{width:"50%"}},a.createElement(P,{decoded:n}),a.createElement(o.H2.Button,{className:"mt-1 p-button-danger col-1 col-offset-11",onClick:function(){e((0,m.dz)({}))},label:"Close"})):a.createElement(a.Fragment,null))};var O=n(5458),H=n(2376),F=n(6631),j=n(5729);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,b.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const B=function(){var e=(0,a.useState)(!1),t=(0,r.A)(e,2),n=t[0],c=t[1],s=(0,p.jU)(n),u=s.data,v=void 0===u?[]:u,h=s.refetch,b=(0,a.useState)(v),g=(0,r.A)(b,2),E=g[0],y=g[1],w=(0,a.useState)([]),k=(0,r.A)(w,2),x=k[0],N=k[1],A=(0,a.useState)(!1),S=(0,r.A)(A,2),C=S[0],P=S[1],D=(0,a.useState)(!1),I=(0,r.A)(D,2),B=I[0],_=I[1],U=(0,a.useState)({showLicence:!1,packs:[],callback:null}),L=(0,r.A)(U,2),z=L[0],R=L[1],M=(0,a.useRef)(null),q=(0,a.useRef)(null),G=(0,a.useState)(!1),K=(0,r.A)(G,2),V=K[0],Q=K[1],X=(0,a.useState)(""),Y=(0,r.A)(X,2),W=Y[0],Z=Y[1],J=(0,d.d4)(function(e){return e.appData.searchValue_PM}),$=(0,d.wA)(),ee=(0,p.yU)(),te=(0,r.A)(ee,1)[0],ne=(0,p.c_)(),ae=(0,r.A)(ne,1)[0],le=(0,p.bG)(),re=(0,r.A)(le,1)[0];(0,a.useEffect)(function(){fetch("license.txt").then(function(e){return e.text()}).then(function(e){Z(e)})},[]),(0,a.useEffect)(function(){var e=J.toLowerCase().trim();y(""===e?v:v.filter(function(t){return t.name.toLowerCase().includes(e)}))},[v,J]);var ce=function(e){var t=(0,O.A)(x);e.checked?t.push(e.value):t.splice(t.indexOf(e.value),1),N(t)},ie=function(){N(C?[]:v.filter(function(e){return!1===e.isUpdated}).map(function(e){return e.name}))},oe=[{field:"name",header:"Package Name"},{field:"channel",header:"Channel"},{field:"latest",header:"Latest Version"},{field:"installed",header:"Installed Version"},{body:function(e){return null===(null==e?void 0:e.latest)||""===(null==e?void 0:e.latest)?null:a.createElement(a.Fragment,null,null!=e&&e.isUpdated?"Up-to-date":a.createElement(o.H2.Checkbox,{label:"",value:null==e?void 0:e.name,onChange:ce,checked:x.includes(null==e?void 0:e.name)}))},header:a.createElement("div",{className:"cursor-pointer",onClick:function(){P(!C),ie()}},a.createElement("p",null," Install/Update Selection "),a.createElement("small",{className:"align-items-center"},a.createElement(o.H2.Checkbox,{value:"Select All",label:"Select All",style:{marginLeft:"5px"},checked:x.length===v.filter(function(e){return!1===e.isUpdated}).length,onChange:function(){P(!C),ie()}}))),sort:!1}],se=function(e){var t;0===(null==e?void 0:e.data)?(c(!0),h(!0),null==q||q.current.show({severity:"success",summary:"Packages were installed or updated",detail:"To reflect, the application must be restarted",sticky:!0})):null==q||null===(t=q.current)||void 0===t||t.show({closable:!0,severity:"error",summary:"Error",detail:"Packages are not installed",sticky:!0})},ue=function(){var e=(0,l.A)(i().mark(function e(t){var n,a,r,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("wheelZip",t.files[0]),e.next=1,te(a);case 1:r=e.sent,Array.isArray(r.data)&&r.data.length>0?R({showLicence:!0,packs:r.data,callback:function(){var e=(0,l.A)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,pe(a);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}):null==q||null===(c=q.current)||void 0===c||c.show({closable:!0,severity:"error",summary:"Error",detail:"Given Zip file is not valid",life:5e3}),null==M||null===(n=M.current)||void 0===n||n.clear();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function de(e){var t,n,l,c=e.packs,i=(0,a.useState)(0),s=(0,r.A)(i,2),u=s[0],d=s[1],m=function(e){(e>=0||e<c.length)&&d((e%c.length+c.length)%c.length)};return a.createElement(a.Fragment,null,a.createElement("h3",null,"".concat(null===(t=c[u])||void 0===t?void 0:t.name," ").concat((null===(n=c[u])||void 0===n?void 0:n.latest)||"")),a.createElement("b",null,"You must agree to the following software licenses to download the selected packages."),a.createElement(o.H2.ScrollPanel,{style:{width:"100%",height:"400px"}},a.createElement("pre",null,(null===(l=c[u])||void 0===l?void 0:l.license_text)||W)),c.length>1?a.createElement("div",{className:"flex justify-content-between flex-wrap card-container"},a.createElement(o.H2.Button,{label:"Prev",icon:"pi pi-arrow-left",iconPos:"left",disabled:0===u,className:"p-button-info p-button-text p-button-sm",onClick:function(){return m(u-1)}}),a.createElement(o.H2.Button,{label:"Next",icon:"pi pi-arrow-right",iconPos:"right",className:"p-button-info p-button-text p-button-sm",onClick:function(){return m(u+1)},disabled:u===c.length-1})):a.createElement(a.Fragment,null))}var me=function(){var e=(0,l.A)(i().mark(function e(){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.next=1,ae(x);case 1:t=e.sent,Q(!1),se(t),0===t.data&&N([]);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=(0,l.A)(i().mark(function e(t){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.next=1,re(t);case 1:n=e.sent,Q(!1),se(n);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();(0,a.useEffect)(function(){B&&(_(!1),z.callback())},[B,z]);var fe=a.createElement("div",{className:"table-header-container pt-3 m-2"},a.createElement("div",{className:"grid"},a.createElement("div",{className:"col"},a.createElement("div",{className:"grid"},a.createElement(o.H2.FileUpload,{auto:!0,ref:M,chooseOptions:{label:"Install TPDS Extension",className:"mr-2",icon:"pi"},mode:"basic",name:"zipFile",accept:[".zip"],customUpload:!0,uploadHandler:ue}),a.createElement(o.H2.Button,{icon:"pi pi-refresh",onClick:function(){c(!0),h(!0)}}))),a.createElement("div",{className:"col-offset-0"},a.createElement("div",{className:"grid"},a.createElement(o.H2.InputTextGroup,{onChange:function(e){return $((0,m.lP)(e.target.value))},icon:"pi pi-search",name:"search",value:J,placeholder:"Search",floatLabel:!1,className:"p-inputtext-lg block mr-2"}),a.createElement(o.H2.Button,{className:"p-button-sm",label:"Install Selected Packages",disabled:0===x.length,onClick:function(){return R({showLicence:!0,packs:v.filter(function(e){return x.includes(e.name)}),callback:me})}})))));return a.createElement(a.Fragment,null,a.createElement(f.y,{ref:q,position:"center"}),a.createElement(o.H2.Dialog,{visible:V,onHide:function(){return null},header:a.createElement("div",{style:{height:"100px",width:"500px"}},a.createElement("h3",null,"Installing tpds-packages"),a.createElement("p",null,"please wait a moment..."),a.createElement(j.z,{mode:"indeterminate",style:{height:"10px",width:"100%"},color:"#059df0"})),resizable:!1,draggable:!1,closable:!1}),a.createElement(o.H2.Dialog,{header:a.createElement("h3",null,"License Agreement - Trust Platform Design Suite"),visible:z.showLicence,style:{height:"800px",width:"800px"},onHide:function(){return R(T(T({},z),{},{showLicence:!1}))},breakpoints:{"960px":"75vw"},footer:a.createElement(a.Fragment,null,a.createElement(o.H2.Button,{className:"p-button p-button-danger m-2",label:"Reject",onClick:function(){return R(T(T({},z),{},{showLicence:!1}))}}),a.createElement(o.H2.Button,{className:"p-button p-button-success m-2",label:"Accept All Licenses",onClick:function(){R(T(T({},z),{},{showLicence:!1})),_(!0)},autoFocus:!0}))},a.createElement(de,{packs:z.packs})),a.createElement("div",{className:"datatable-rowexpansion-demo"},a.createElement("div",{className:"card"},a.createElement(H.b,{header:fe,value:E,rowHover:!0,size:"small",scrollable:!0,scrollHeight:"750px",rows:10,stripedRows:!0,resizableColumns:!0,autoLayout:!0,className:"bg-blue-50"},oe.map(function(e){var t=e.field,n=e.sort,l=e.header,r=e.body;return a.createElement(F.V,{key:l,field:t,sortable:!1!==n,header:l,body:function(e){return"name"===t?a.createElement("a",{href:"https://pypi.org/project/".concat(e.name,"/"),target:"_blank",rel:"noreferrer"},e.name):r?r(e):e[t]}})})))))};var _=n(7689),U=n(9063),L=[{label:"Device Interactions",panel:a.createElement(h,null)},{label:"Manifest",panel:a.createElement(S,null)},{label:"Certificate Decoding",panel:a.createElement(D,null)},{label:"Package Manager",panel:a.createElement(B,null)}];const z=function(){var e=(0,d.wA)(),t=(0,d.d4)(function(e){return e.appData.utilityIndex});return a.createElement(a.Fragment,null,a.createElement(U.Yd,{header:"TPDS Integrated Utilities"}),a.createElement("div",{className:"m-3"},a.createElement(_.r,{model:L,activeIndex:t,onTabChange:function(t){return e((0,m.bI)(t.index))},className:"p-3 m-3 text-2xl"}),a.createElement("div",{className:"ml-5 mr-5"},L[t].panel)))}},5545:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(6540);const l=function(){var e=(0,a.useRef)(null);return{showToast:function(t){var n=t.message,a=t.life,l=void 0===a?3e3:a;e.current.show({severity:"success",summary:"Success",detail:n,life:l})},showToastError:function(t){var n=t.message;e.current.show({severity:"error",summary:"Error",detail:n,sticky:!0})},toast:e}}}}]);