import{t as ue,r as u,u as he,d as pe,j as e,e as g,g as je,h as xe,o as me,s as fe,i as J,k as ge,P as B,a as x,l as be,L as X,m as E,I as oe,n as T,p as w,y as q,q as I,D as l,v as y,w as ye,x as O,z as ve,A,B as Se,G as Pe,H as ie,J as Ce,K as _e,M as z,N as re,O as Fe,Q as Re,R as ke,U as Te,V as we,X as Ie}from"./index-Dastpg3d.js";import{G as ae,c as M,r as k,I as Q,f as $,a as K,T as L,C as N,S as V,u as Ae,N as Ne,b as ze,L as Be}from"./validator-CFS8HeGh.js";const{colors:{interactive:{primary__resting:{rgba:Ee},primary__hover_alt:{rgba:qe},focus:{rgba:Y},disabled__text:{rgba:Oe}}},typography:{navigation:{menu_title:Me}},spacings:{comfortable:{medium_small:F,x_small:R,x_large:Qe,xx_large:$e}},clickbounds:{default__base:Ke,compact__standard:Le},interactions:{focused:{width:Z}}}=ue,b={background:Ee,typography:Me,width:$e,spacings:{bottom:F,top:F,left:F,right:F},clickbound:{height:Ke},states:{hover:{background:qe},disabled:{background:Oe},focus:{outline:{type:"outline",style:"dashed",width:Z,color:Y,offset:"10px"}}},modes:{compact:{width:Qe,spacings:{bottom:R,top:R,left:R,right:R},clickbound:{height:Le},states:{focus:{outline:{type:"outline",style:"dashed",width:Z,color:Y,offset:"2px"}}}}}},ee=g.input.attrs(({type:t="radio"})=>({type:t})).withConfig({displayName:"Radio__Input",componentId:"sc-we59oz-0"})(["--scale:",";appearance:none;width:100%;height:100%;margin:0;grid-area:input;transform:scale(var(--scale));cursor:",";&:focus{outline:none;}&[data-focus-visible-added]:focus + svg{","}&:focus-visible + svg{","}&:not(:checked) ~ svg path[name='selected']{display:none;}&:not(:checked) ~ svg path[name='unselected']{display:inline;}&:checked ~ svg path[name='unselected']{display:none;}&:checked ~ svg path[name='selected']{display:inline;}"],({theme:t,$iconSize:n})=>parseFloat(t.clickbound.height)/n,({disabled:t})=>t?"not-allowed":"pointer",({theme:t})=>J(t.states.focus.outline),({theme:t})=>J(t.states.focus.outline)),Ve=g.label.withConfig({displayName:"Radio__StyledLabel",componentId:"sc-we59oz-1"})(["display:inline-flex;align-items:center;cursor:",";"],({$disabled:t})=>t?"not-allowed":"pointer"),te=g.path.attrs(({$icon:t})=>({fillRule:"evenodd",clipRule:"evenodd",d:t.svgPathData})).withConfig({displayName:"Radio__StyledPath",componentId:"sc-we59oz-2"})([""]),He=g.svg.attrs(({height:t,width:n,fill:o})=>({name:null,xmlns:"http://www.w3.org/2000/svg",height:t,width:n,fill:o})).withConfig({displayName:"Radio__Svg",componentId:"sc-we59oz-3"})(["grid-area:input;pointer-events:none;"]),De=g.span.withConfig({displayName:"Radio__LabelText",componentId:"sc-we59oz-4"})(["",""],ge(b.typography)),se=g.span.withConfig({displayName:"Radio__InputWrapper",componentId:"sc-we59oz-5"})([""," display:inline-grid;grid:[input] 1fr / [input] 1fr;position:relative;isolation:isolate;cursor:",";&::before{content:'';position:absolute;width:",";aspect-ratio:1/1;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:100%;}@media (hover:hover) and (pointer:fine){> svg{z-index:1;}&:hover{&::before{background-color:",";}}}"],({theme:t})=>fe(t.spacings),({disabled:t})=>t?"not-allowed":"pointer",({theme:t})=>t.width,({disabled:t})=>t?"transparent":b.states.hover.background),H=u.forwardRef(function({label:n,disabled:o=!1,className:i,style:c,...d},h){const{density:a}=he(),s=pe({density:a},b),r=24,m=o?b.states.disabled.background:b.background,f=u.useMemo(()=>e.jsxs(He,{width:r,height:r,viewBox:`0 0 ${r} ${r}`,fill:m,"aria-hidden":!0,children:[e.jsx(te,{$icon:je,name:"selected"}),e.jsx(te,{$icon:xe,name:"unselected"})]}),[m]);return e.jsx(me,{theme:s,children:n?e.jsxs(Ve,{$disabled:o,className:i,style:c,children:[e.jsxs(se,{disabled:o,children:[e.jsx(ee,{...d,ref:h,disabled:o,$iconSize:r}),f]}),e.jsx(De,{children:n})]}):e.jsxs(se,{disabled:o,className:i,style:c,children:[e.jsx(ee,{...d,ref:h,disabled:o,$iconSize:r}),f]})})});H.displayName="Radio";const{useAppForm:Ge}=M({fieldComponents:{TextField:L,Radio:H},formComponents:{SubmitButton:V,CancelButton:N},fieldContext:$,formContext:K});function We({accessData:t,isDialogOpen:n,setIsDialogOpen:o}){const i=({formReset:s})=>{s(),o(!1)},c=T(),{mutate:d,isPending:h}=w({...ve(),onSuccess:()=>{c.invalidateQueries({queryKey:A()})}}),a=Ge({defaultValues:{assetName:(t==null?void 0:t.asset.name)??"",classification:(t==null?void 0:t.classification)??""},onSubmit:({value:s,formApi:r})=>{d({body:{asset:{name:s.assetName.trim()},classification:s.classification}},{onSuccess:()=>{q.info("Successfully set access information"),i({formReset:r.reset})}})}});return e.jsx(I,{open:n,children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),a.handleSubmit()},children:[e.jsx(l.Header,{children:e.jsx(l.Title,{children:"Access"})}),e.jsxs(l.Content,{children:[e.jsx(a.AppField,{name:"assetName",validators:{onBlur:k()},children:s=>e.jsx(s.TextField,{label:"Sumo target asset"})}),e.jsx(y,{}),e.jsx(a.AppField,{name:"classification",validators:{onChange:k()},children:s=>e.jsx(Q,{label:"Default security classification",color:"error",helperProps:{text:s.state.meta.isValid?"":"Required",icon:e.jsx(O,{name:"error_filled",size:16})},children:["internal","restricted"].map(r=>e.jsx(ye,{title:r==="internal"?"Requires READ access to the asset":"Requires WRITE access to the asset",children:e.jsx("span",{children:e.jsx(H,{label:r,checked:s.state.value===r,onChange:()=>{s.handleChange(r)}})})},r))})})]}),e.jsxs(l.Actions,{children:[e.jsx(a.Subscribe,{selector:s=>[s.isDefaultValue,s.canSubmit],children:([s,r])=>e.jsx(a.SubmitButton,{label:"Save",disabled:s||!r,isPending:h})}),e.jsx(a.CancelButton,{onClick:s=>{s.preventDefault(),i({formReset:a.reset})}})]})]})})}function Ue({accessData:t}){return e.jsx(oe,{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Sumo target asset"}),e.jsx("td",{children:t.asset.name})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Default classification"}),e.jsx("td",{children:t.classification})]})]})})})}function Je({projectData:t}){const[n,o]=u.useState(!1),i=t.config.access;return e.jsxs(e.Fragment,{children:[e.jsx(B,{$variant:"h3",children:"Access control"}),e.jsx(x,{children:"This section is used to configure access permissions for data exported from the project."}),e.jsxs(x,{children:["The ",e.jsx("i",{children:"asset"})," specifies the target asset in Sumo where data will be uploaded. The ",e.jsx("i",{children:"classification"})," sets the default information classification for the data."]}),e.jsxs(be,{children:[e.jsxs(X.Item,{children:["internal - requires ",e.jsx("i",{children:"READ"})," access to the asset"]}),e.jsxs(X.Item,{children:["restricted - requires ",e.jsx("i",{children:"WRITE"})," access to the asset"]})]}),e.jsxs(x,{children:["Read more about access control in the"," ",e.jsx("a",{href:"https://doc-sumo-doc-prod.radix.equinor.com/documentation/access_control",target:"_blank",rel:"noopener noreferrer",children:"Sumo documentation"})]}),i?e.jsx(Ue,{accessData:i}):e.jsx(E,{children:"No access information found in the project"}),e.jsx(ae,{label:i?"Edit":"Add",disabled:t.is_read_only,tooltipText:t.is_read_only?"Project is read-only":"",onClick:()=>{o(!0)}}),e.jsx(We,{accessData:i,isDialogOpen:n,setIsDialogOpen:o})]})}const{useAppForm:Xe}=M({fieldComponents:{TextField:L},formComponents:{SubmitButton:V,CancelButton:N},fieldContext:$,formContext:K});function Ye({modelData:t,isDialogOpen:n,setIsDialogOpen:o}){const i=({formReset:s})=>{s(),o(!1)},c=T(),{mutate:d,isPending:h}=w({...Pe(),onSuccess:()=>{c.invalidateQueries({queryKey:A()})}}),a=Xe({defaultValues:{modelName:(t==null?void 0:t.name)??"",modelRevision:(t==null?void 0:t.revision)??""},onSubmit:({value:s,formApi:r})=>{d({body:{name:s.modelName.trim(),revision:s.modelRevision.trim()}},{onSuccess:()=>{q.info("Successfully set model information"),i({formReset:r.reset})}})}});return e.jsx(I,{open:n,children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),a.handleSubmit()},children:[e.jsx(l.Header,{children:e.jsx(l.Title,{children:"Model"})}),e.jsxs(l.Content,{children:[e.jsx(a.AppField,{name:"modelName",validators:{onBlur:k()},children:s=>e.jsx(s.TextField,{label:"Name"})}),e.jsx(y,{}),e.jsx(a.AppField,{name:"modelRevision",validators:{onBlur:k()},children:s=>e.jsx(s.TextField,{label:"Revision"})})]}),e.jsxs(l.Actions,{children:[e.jsx(a.Subscribe,{selector:s=>[s.isDefaultValue,s.canSubmit],children:([s,r])=>e.jsx(a.SubmitButton,{label:"Save",disabled:s||!r,isPending:h})}),e.jsx(a.CancelButton,{onClick:s=>{s.preventDefault(),i({formReset:a.reset})}})]})]})})}function Ze({modelData:t}){return e.jsx(oe,{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("td",{children:t.name})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Revision"}),e.jsx("td",{children:e.jsx(Se,{children:t.revision})})]})]})})})}function et({projectData:t}){const[n,o]=u.useState(!1),i=t.config.model;return e.jsxs(e.Fragment,{children:[e.jsx(B,{$variant:"h3",children:"Model"}),e.jsx(x,{children:"This section contains information about the model."}),e.jsxs(x,{children:["Each model needs a ",e.jsx("i",{children:"name"})," and ",e.jsx("i",{children:"revision"}),", usually matching your project's directory structure. For example, for the project path /project/field/resmod/ff/25.0.0/ the name would be ",e.jsx("i",{children:"ff"})," and the revision ",e.jsx("i",{children:"25.0.0"}),"."]}),i?e.jsx(Ze,{modelData:i}):e.jsx(E,{children:"No model information found in the project."}),e.jsx(ae,{label:i?"Edit":"Add",disabled:t.is_read_only,tooltipText:t.is_read_only?"Project is read-only":"",onClick:()=>{o(!0)}}),e.jsx(Ye,{modelData:i,isDialogOpen:n,setIsDialogOpen:o})]})}const{useAppForm:tt}=M({fieldComponents:{RecentProjectSelect:nt,TextField:L},formComponents:{ConfirmInitProjectDialog:ot,SubmitButton:V,CancelButton:N},fieldContext:$,formContext:K});function st({closeDialog:t,isDialogOpen:n}){const[o,i]=u.useState(!1),[c,d]=u.useState(!0),[h,a]=u.useState(""),[s,r]=u.useState(""),[m,f]=u.useState(""),D=[403,404,409],G=({formReset:j})=>{a(""),r(""),f(""),j(),t()},v=T(),{mutate:ce,isPending:le}=w({...Fe(),onSuccess:()=>{v.invalidateQueries({queryKey:A()}),v.invalidateQueries({queryKey:Re()}),v.invalidateQueries({queryKey:z()})},meta:{preventDefaultErrorHandling:D}}),{data:de}=Ce(_e()),p=tt({defaultValues:{projectPath:"",recentProjectPath:""},onSubmit:({value:j,formApi:W})=>{const S=m==="recentProjectPath"?j.recentProjectPath:j.projectPath;ce({body:{path:S}},{onSuccess:P=>{q.info(`Successfully set project ${S}`+(P.is_read_only?" (read-only)":"")),G({formReset:W.reset})},onError:P=>{var U;const C=((U=P.response)==null?void 0:U.data).detail,_=P.status;if(_&&D.includes(_)){if(_===404&&C===`No .fmu directory found at ${S}`){i(!0);return}m==="recentProjectPath"?a(C):m==="projectPath"&&r(C),_===404&&C===`Path ${S} does not exist`&&(v.invalidateQueries({queryKey:z()}),m==="recentProjectPath"&&(W.resetField("recentProjectPath"),f("projectPath")))}}})}});return u.useEffect(()=>{r("")},[p.state.values.projectPath]),e.jsx(I,{open:n,$minWidth:"40em",children:e.jsxs("form",{onSubmit:j=>{j.preventDefault(),j.stopPropagation(),p.handleSubmit()},children:[e.jsx(l.Header,{children:e.jsx(l.Title,{children:"Select project"})}),e.jsxs(l.CustomContent,{children:[e.jsx(p.AppField,{name:"recentProjectPath",listeners:{onBlur:()=>{a("")},onChange:()=>{f("recentProjectPath"),p.handleSubmit()}},children:j=>e.jsx(j.RecentProjectSelect,{recentProjects:de.recent_project_directories,helperText:h})}),e.jsx(y,{}),e.jsx(p.AppField,{name:"projectPath",listeners:{onBlur:()=>{r("")},onChange:()=>{f("projectPath")}},children:j=>e.jsx(Q,{color:"error",helperProps:{text:s,icon:e.jsx(O,{data:re,size:18})},children:e.jsx(j.TextField,{label:"Alternatively, enter a path to the project",setSubmitDisabled:d})})}),e.jsx(p.AppForm,{children:e.jsx(p.ConfirmInitProjectDialog,{isOpen:o,closeDialog:()=>{i(!1)},valueSource:m})})]}),e.jsx(l.Actions,{children:e.jsxs(p.AppForm,{children:[e.jsx(p.SubmitButton,{label:"Select",disabled:c,isPending:le}),e.jsx(p.CancelButton,{onClick:()=>{G({formReset:p.reset})}})]})})]})})}function nt({recentProjects:t,helperText:n}){const o=Ae(),i=t.length===0;return e.jsx(Q,{color:"error",helperProps:{text:n,icon:e.jsx(O,{data:re,size:18})},children:e.jsx(Ne,{label:"Select from recent projects",id:"recent-projects",size:5,disabled:i,value:i?[]:[o.state.value],onChange:c=>{o.handleChange(c.target.value)},onBlur:()=>{o.handleBlur()},multiple:!0,children:t.map(c=>e.jsx("option",{value:c,children:c},c))})})}function ot({isOpen:t,closeDialog:n,valueSource:o}){const i=T(),{mutate:c}=w({...ke(),onSuccess:()=>{i.invalidateQueries({queryKey:A()}),i.invalidateQueries({queryKey:z()})}}),d=ze(),h=o==="projectPath"?d.store.state.values.projectPath:d.store.state.values.recentProjectPath,a=s=>{c({body:{path:s}},{onSuccess:()=>{n(),d.handleSubmit()},onError:()=>{n()}})};return e.jsxs(I,{open:t,children:[e.jsx(l.Header,{children:e.jsx(l.Title,{children:"Initialize project"})}),e.jsxs(l.CustomContent,{children:[e.jsxs(x,{bold:!0,children:[" ",h," "]}),e.jsxs(x,{children:["This project needs to be initialized to use FMU settings.",e.jsx("br",{}),"Would you like to initialize?"]})]}),e.jsxs(l.Actions,{children:[e.jsx(ie,{onClick:()=>{a(h)},children:"OK"}),e.jsx(N,{onClick:n})]})]})}function ne(){const[t,n]=u.useState(!1),o=()=>{n(!0)},i=()=>{n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(ie,{onClick:o,children:"Select project"}),e.jsx(st,{closeDialog:i,isDialogOpen:t})]})}const it=g.span`
  font-weight: bold;
`;function rt({projectData:t,lockStatus:n}){return e.jsxs(e.Fragment,{children:[e.jsxs(x,{children:["Project: ",e.jsx(it,{children:t.project_dir_name}),e.jsx("br",{}),"Path: ",t.path,e.jsx("br",{}),"Created: ",we(t.config.created_at)," by"," ",t.config.created_by,e.jsx("br",{}),"Version: ",t.config.version]}),e.jsx(Ie,{lockStatus:n,isReadOnly:t.is_read_only??!0})]})}function at({text:t}){const n=t!=="",o="No project selected"+(n?":":".");return e.jsxs(e.Fragment,{children:[e.jsx(x,{children:o}),n&&e.jsx(E,{children:t})]})}function ct(){const t=Te();return e.jsx(e.Fragment,{children:t.status&&t.data?e.jsxs(e.Fragment,{children:[e.jsx(rt,{projectData:t.data,lockStatus:t.lockStatus}),e.jsx(ne,{}),e.jsx(y,{}),e.jsx(et,{projectData:t.data}),e.jsx(y,{}),e.jsx(Je,{projectData:t.data})]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{text:t.text??""}),e.jsx(ne,{})]})})}const ut=function(){return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:"Project"}),e.jsx(u.Suspense,{fallback:e.jsx(Be,{}),children:e.jsx(ct,{})})]})};export{ut as component};
