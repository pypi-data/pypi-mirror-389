<div align="center">
<a href="https://v2.nonebot.dev/store">
    <img src="https://raw.githubusercontent.com/fllesser/nonebot-plugin-template/refs/heads/resource/.docs/NoneBotPlugin.svg" width="310" alt="logo">
</a>

## âœ¨ [Nonebot2](https://github.com/nonebot/nonebot2) é“¾æ¥åˆ†äº«è‡ªåŠ¨è§£ææ’ä»¶ âœ¨
[![LICENSE](https://img.shields.io/github/license/fllesser/nonebot-plugin-parser.svg)](./LICENSE)
[![pypi](https://img.shields.io/pypi/v/nonebot-plugin-parser.svg)](https://pypi.python.org/pypi/nonebot-plugin-parser)
[![python](https://img.shields.io/badge/python-3.10|3.11|3.12|3.13-blue.svg)](https://python.org)
[![uv](https://img.shields.io/badge/package%20manager-uv-black?style=flat-square&logo=uv)](https://github.com/astral-sh/uv)
[![ruff](https://img.shields.io/badge/code%20style-ruff-black?style=flat-square&logo=ruff)](https://github.com/astral-sh/ruff)
<br/>
[![pre-commit](https://results.pre-commit.ci/badge/github/fllesser/nonebot-plugin-parser/master.svg)](https://results.pre-commit.ci/latest/github/fllesser/nonebot-plugin-parser/master)
[![codecov](https://codecov.io/gh/fllesser/nonebot-plugin-parser/graph/badge.svg?token=VCS8IHSO7U)](https://codecov.io/gh/fllesser/nonebot-plugin-parser)
[![qqgroup](https://img.shields.io/badge/QQ%E7%BE%A4-820082006-orange?style=flat-square)](https://qm.qq.com/q/y4T4CjHimc)
</div>

> [!IMPORTANT]
> **æ”¶è—é¡¹ç›®**ï¼Œä½ å°†ä» GitHub ä¸Šæ— å»¶è¿Ÿåœ°æ¥æ”¶æ‰€æœ‰å‘å¸ƒé€šçŸ¥ï½â­ï¸

<img width="100%" src="https://starify.komoridevs.icu/api/starify?owner=fllesser&repo=nonebot-plugin-parser" alt="starify" />

## ğŸ“– ä»‹ç»

| å¹³å°    | è§¦å‘çš„æ¶ˆæ¯å½¢æ€                        | è§†é¢‘ | å›¾é›† | éŸ³é¢‘ |
| ------- | ------------------------------------- | ---- | ---- | ---- |
| Bç«™     | BVå·/é“¾æ¥(åŒ…å«çŸ­é“¾,BV,av)/å¡ç‰‡/å°ç¨‹åº | âœ…â€‹   | âœ…â€‹   | âœ…â€‹   |
| æŠ–éŸ³    | é“¾æ¥(åˆ†äº«é“¾æ¥ï¼Œå…¼å®¹ç”µè„‘ç«¯é“¾æ¥)        | âœ…â€‹   | âœ…â€‹   | âŒï¸    |
| å¾®åš    | é“¾æ¥(åšæ–‡ï¼Œè§†é¢‘ï¼Œshow)                | âœ…â€‹   | âœ…â€‹   | âŒï¸    |
| å°çº¢ä¹¦  | é“¾æ¥(å«çŸ­é“¾)/å¡ç‰‡                     | âœ…â€‹   | âœ…â€‹   | âŒï¸    |
| å¿«æ‰‹    | é“¾æ¥(åŒ…å«æ ‡å‡†é“¾æ¥å’ŒçŸ­é“¾)              | âœ…â€‹   | âœ…â€‹   | âŒï¸    |
| acfun   | é“¾æ¥                                  | âœ…â€‹   | âŒï¸    | âŒï¸    |
| youtube | é“¾æ¥(å«çŸ­é“¾)                          | âœ…â€‹   | âŒï¸    | âœ…â€‹   |
| tiktok  | é“¾æ¥                                  | âœ…â€‹   | âŒï¸    | âŒï¸    |
| twitter | é“¾æ¥                                  | âœ…â€‹   | âœ…â€‹   | âŒï¸    |

æ”¯æŒçš„é“¾æ¥ï¼Œå¯å‚è€ƒ [æµ‹è¯•é“¾æ¥](https://github.com/fllesser/nonebot-plugin-parser/blob/master/test_url.md)

## ğŸ¨ æ•ˆæœå›¾
æ’ä»¶é»˜è®¤å¯ç”¨ PIL å®ç°çš„é€šç”¨åª’ä½“å¡ç‰‡æ¸²æŸ“ï¼Œæ•ˆæœå›¾å¦‚ä¸‹
<div align="center">

<img src="https://raw.githubusercontent.com/fllesser/nonebot-plugin-parser/refs/heads/resources/resources/renderdamine/video.png" width="160" />
<img src="https://raw.githubusercontent.com/fllesser/nonebot-plugin-parser/refs/heads/resources/resources/renderdamine/9_pic.png" width="160" />
<img src="https://raw.githubusercontent.com/fllesser/nonebot-plugin-parser/refs/heads/resources/resources/renderdamine/4_pic.png" width="160" />
<img src="https://raw.githubusercontent.com/fllesser/nonebot-plugin-parser/refs/heads/resources/resources/renderdamine/repost_video.png" width="160" />
<img src="https://raw.githubusercontent.com/fllesser/nonebot-plugin-parser/refs/heads/resources/resources/renderdamine/repost_2_pic.png" width="160" />

</div>

## ğŸ’¿ å®‰è£…
> [!Warning]
> **å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ nonebot-plugin-resolver[2]ï¼Œè¯·åœ¨å®‰è£…æ­¤æ’ä»¶å‰å¸è½½**

> [!Important]
> æ’ä»¶å¯é€‰ä¾èµ– `htmlkit`, `ytdlp`, `all`ï¼Œåˆ†åˆ«ç”¨äº htmlkit æ¸²æŸ“å’Œ youtube / tiktok è§£æï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ï¼Œè¯·åœ¨å®‰è£…æ—¶æŒ‡å®šï¼Œå¦‚ `nb plugin install nonebot-plugin-parser[ytdlp]`

<details open>
<summary>ä½¿ç”¨ nb-cli å®‰è£…/æ›´æ–°</summary>
åœ¨ nonebot2 é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤è¡Œ, è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤å³å¯å®‰è£…

    nb plugin install nonebot-plugin-parser --upgrade
ä½¿ç”¨ pypi æºæ›´æ–°

    nb plugin install nonebot-plugin-parser --upgrade -i https://pypi.org/simple
å®‰è£…ä»“åº“ dev åˆ†æ”¯

    uv pip install git+https://github.com/fllesser/nonebot-plugin-parser.git@dev
</details>

<details>
<summary>ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…</summary>
åœ¨ nonebot2 é¡¹ç›®çš„æ’ä»¶ç›®å½•ä¸‹, æ‰“å¼€å‘½ä»¤è¡Œ, æ ¹æ®ä½ ä½¿ç”¨çš„åŒ…ç®¡ç†å™¨, è¾“å…¥ç›¸åº”çš„å®‰è£…å‘½ä»¤
<details open>
<summary>uv</summary>
ä½¿ç”¨ uv å®‰è£…

    uv add nonebot-plugin-parser
å®‰è£…ä»“åº“ dev åˆ†æ”¯

    uv add git+https://github.com/fllesser/nonebot-plugin-parser.git@master
</details>


<details>
<summary>pip</summary>

    pip install --upgrade nonebot-plugin-parser
</details>
<details>
<summary>pdm</summary>

    pdm add nonebot-plugin-parser
</details>
<details>
<summary>poetry</summary>

    poetry add nonebot-plugin-parser
</details>

æ‰“å¼€ nonebot2 é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `pyproject.toml` æ–‡ä»¶, åœ¨ `[tool.nonebot]` éƒ¨åˆ†è¿½åŠ å†™å…¥

    plugins = ["nonebot_plugin_parser"]

</details>

<details>
<summary>ä½¿ç”¨ nbr å®‰è£…(ä½¿ç”¨ uv ç®¡ç†ä¾èµ–å¯ç”¨)</summary>

[nbr](https://github.com/fllesser/nbr) æ˜¯ä¸€ä¸ªåŸºäº uv çš„ nb-cliï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç®¡ç† nonebot2

    nbr plugin install nonebot-plugin-parser
ä½¿ç”¨ **pypi** æºå®‰è£…

    nbr plugin install nonebot-plugin-parser -i "https://pypi.org/simple"
ä½¿ç”¨**æ¸…åæº**å®‰è£…

    nbr plugin install nonebot-plugin-parser -i "https://pypi.tuna.tsinghua.edu.cn/simple"

</details>

<details open>
<summary>å®‰è£…å¿…è¦ç»„ä»¶</summary>
éƒ¨åˆ†è§£æä¾èµ–äº ffmpeg

ubuntu/debian

    sudo apt-get install ffmpeg

å…¶ä»– linux å‚è€ƒ(åŸé¡¹ç›®æ¨è): https://gitee.com/baihu433/ffmpeg

Windows å‚è€ƒ(åŸé¡¹ç›®æ¨è): https://www.jianshu.com/p/5015a477de3c
</details>

## âš™ï¸ é…ç½®

åœ¨ nonebot2 é¡¹ç›®çš„`.env`æ–‡ä»¶ä¸­æ·»åŠ ä¸‹è¡¨ä¸­çš„å¿…å¡«é…ç½®

|            é…ç½®é¡¹            | å¿…å¡«  |          é»˜è®¤å€¼          |                                                                                                                                      è¯´æ˜                                                                                                                                       |
| :--------------------------: | :---: | :----------------------: | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|           NICKNAME           |  å¦   |           [""]           |                                                                                                                   nonebot2 å†…ç½®é…ç½®ï¼Œå¯ä½œä¸ºè§£æç»“æœæ¶ˆæ¯çš„å‰ç¼€                                                                                                                   |
|         API_TIMEOUT          |  å¦   |           30.0           |                                                                                                           nonebot2 å†…ç½®é…ç½®ï¼Œè‹¥æœåŠ¡å™¨ä¸Šä¼ å¸¦å®½å¤ªä½ï¼Œå»ºè®®è°ƒé«˜ï¼Œé˜²æ­¢è¶…æ—¶                                                                                                           |
|        parser_bili_ck        |  å¦   |            ""            | B ç«™ cookie, å¿…é¡»å«æœ‰ SESSDATA é¡¹ï¼Œå¯é™„åŠ  B ç«™ AI æ€»ç»“åŠŸèƒ½, å¦‚æœéœ€è¦é•¿æœŸä½¿ç”¨æ­¤å‡­æ®åˆ™ä¸åº”è¯¥åœ¨**æµè§ˆå™¨ç™»å½•è´¦æˆ·**å¯¼è‡´ cookie è¢«åˆ·æ–°ï¼Œå»ºè®®æ³¨å†Œä¸ªå°å·è·å–, ä¹Ÿå¯ä»¥é…ç½® ac_time_value é¡¹ï¼Œç”¨äºå‡­æ®çš„è‡ªåŠ¨åˆ·æ–°ï¼Œ[è·å–æ–¹å¼](https://github.com/fllesser/nonebot-plugin-parser/issues/177) |
|   parser_bili_video_codes    |  å¦   | '["avc", "av01", "hev"]' |                                                  å…è®¸çš„ B ç«™è§†é¢‘ç¼–ç ï¼Œè¶Šé å‰çš„ç¼–ç ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¯é€‰ "avc"(H.264ï¼Œä½“ç§¯è¾ƒå¤§), "hev"(HEVC), "av01"(AV1), åä¸¤é¡¹åœ¨ä¸åŒè®¾å¤‡å¯èƒ½æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚éœ€å®Œå…¨é¿å…ï¼Œå¯åªå¡«ä¸€é¡¹ï¼Œå¦‚ '["avc"]'                                                   |
|        parser_ytb_ck         |  å¦   |            ""            |                                                                                                              Youtube cookie, Youtube è§†é¢‘å› äººæœºæ£€æµ‹ä¸‹è½½å¤±è´¥ï¼Œéœ€å¡«                                                                                                               |
|         parser_proxy         |  å¦   |           None           |                                                                                 ä»…ä½œç”¨äº youtube, tiktok è§£æï¼Œæ¨ç‰¹è§£æä¼šè‡ªåŠ¨è¯»å–ç¯å¢ƒå˜é‡ä¸­çš„ http_proxy / https_proxy(ä»£ç†è½¯ä»¶é€šå¸¸ä¼šè‡ªåŠ¨è®¾ç½®)                                                                                  |
|      parser_need_upload      |  å¦   |          False           |                                                                                                                          éŸ³é¢‘è§£æï¼Œæ˜¯å¦éœ€è¦ä¸Šä¼ ç¾¤æ–‡ä»¶                                                                                                                           |
|      parser_use_base64       |  å¦   |          False           |                                            è§†é¢‘ï¼Œå›¾ç‰‡ï¼ŒéŸ³é¢‘æ˜¯å¦ä½¿ç”¨ base64 å‘é€ï¼Œæ³¨æ„ï¼šç¼–è§£ç å’Œä¼ è¾“ base64 ä¼šå ç”¨æ›´å¤šçš„å†…å­˜,æ€§èƒ½å’Œå¸¦å®½, ç”šè‡³å¯èƒ½ä¼šä½¿ websocket è¿æ¥å´©æºƒï¼Œå› æ­¤è¯¥é…ç½®é¡¹ä»…æ¨è nonebot å’Œ åè®®ç«¯ä¸åœ¨åŒä¸€æœºå™¨çš„ç”¨æˆ·é…ç½®                                             |
|   parser_duration_maximum    |  å¦   |           480            |                                                                                                                          è§†é¢‘æœ€å¤§è§£ææ—¶é•¿ï¼Œå•ä½ï¼š_ç§’_                                                                                                                           |
|       parser_max_size        |  å¦   |            90            |                                                                                                              éŸ³è§†é¢‘ä¸‹è½½æœ€å¤§æ–‡ä»¶å¤§å°ï¼Œå•ä½ MBï¼Œè¶…è¿‡è¯¥é…ç½®å°†é˜»æ–­ä¸‹è½½                                                                                                              |
|  parser_disabled_platforms   |  å¦   |            []            |                               å…¨å±€ç¦æ­¢çš„è§£æï¼Œç¤ºä¾‹ parser_disabled_platforms=["bilibili", "douyin"] è¡¨ç¤ºç¦æ­¢äº†å“”å“©å“”å“©å’ŒæŠ–, è¯·æ ¹æ®è‡ªå·±éœ€æ±‚å¡«å†™["bilibili", "douyin", "kuaishou", "twitter", "youtube", "acfun", "tiktok", "weibo", "xiaohongshu"]                               |
|      parser_render_type      |  å¦   |         "common"         |                                                                                        æ¸²æŸ“å™¨ç±»å‹ï¼Œå¯é€‰ "default"(æ— å›¾ç‰‡æ¸²æŸ“), "common"(PIL é€šç”¨å›¾ç‰‡æ¸²æŸ“), "htmlkit"(htmlkit, æš‚ä¸å¯ç”¨)                                                                                         |
|      parser_append_url       |  å¦   |          False           |                                                                                                                           æ˜¯å¦åœ¨è§£æç»“æœä¸­é™„åŠ åŸå§‹URL                                                                                                                           |
|      parser_custom_font      |  å¦   |           None           |                                                                            è‡ªå®šä¹‰æ¸²æŸ“å­—ä½“ï¼Œé…ç½®å­—ä½“æ–‡ä»¶åï¼Œå¹¶å°†å­—ä½“æ–‡ä»¶æ”¾ç½®äº localstore ç”Ÿæˆçš„æ’ä»¶ data ç›®å½•ä¸‹ï¼ˆå¦‚ ./data/nonebot_plugin_parser/ï¼‰                                                                             |
| parser_need_forward_contents |  å¦   |           True           |                                                                                                                æ˜¯å¦éœ€è¦è½¬å‘åª’ä½“å†…å®¹(è¶…è¿‡ 4 é¡¹æ—¶å§‹ç»ˆä½¿ç”¨åˆå¹¶è½¬å‘)                                                                                                                |
## ğŸ‰ ä½¿ç”¨
### æŒ‡ä»¤è¡¨
|   æŒ‡ä»¤   |         æƒé™          | éœ€è¦@ | èŒƒå›´  |   è¯´æ˜   |
| :------: | :-------------------: | :---: | :---: | :------: |
| å¼€å¯è§£æ | SUPERUSER/OWNER/ADMIN |  æ˜¯   | ç¾¤èŠ  | å¼€å¯è§£æ |
| å…³é—­è§£æ | SUPERUSER/OWNER/ADMIN |  æ˜¯   | ç¾¤èŠ  | å…³é—­è§£æ |

### æ¨èçš„å­—ä½“
- [LXGW ZhenKai / éœé¹œè‡»æ¥·](https://github.com/lxgw/LxgwZhenKai) æ•ˆæœå›¾ä½¿ç”¨å­—ä½“
- [LXGW Neo XiHei / éœé¹œæ–°æ™°é»‘](https://github.com/lxgw/LxgwNeoXiHei)
- [LXGW Neo ZhiSong / éœé¹œæ–°è‡´å®‹ / éœé¶©æ–°ç·»å®‹](https://github.com/lxgw/LxgwNeoZhiSong)


## è‡´è°¢
[nonebot-plugin-resolver](https://github.com/zhiyu1998/nonebot-plugin-resolver)
[parse-video-py](https://github.com/wujunwei928/parse-video-py)