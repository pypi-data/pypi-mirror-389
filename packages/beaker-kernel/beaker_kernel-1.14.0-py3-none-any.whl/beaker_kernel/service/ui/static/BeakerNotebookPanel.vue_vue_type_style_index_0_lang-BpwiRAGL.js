import { d as ue, i as Q, r as j, f as Y, g as Be, A as K, o as J, B as L, G as ae, J as rt, H as N, u as E, N as ee, n as me, an as mt, p as We, a3 as le, R as Ae, S as ne, V as ot, am as wt, K as oe, a9 as it, a8 as gt, M as vt, a2 as lt, as as Ue, at as be, aj as xt, a0 as bt, au as Et, x as kt, j as Ce, ag as Bt, av as Ct, a as It, aw as st, ax as Qe, U as At, a6 as _t, I as Ee, w as Ze, af as Ft, W as St, a4 as Tt } from "./primevue-BhybIXDC.js";
import { d as Ut, e as $t, __tla as __tla_0 } from "./BeakerRawCell.vue_vue_type_style_index_0_lang-OdsdCFW2.js";
import { u as Rt, m as Nt, l as ke, n as Mt, o as $e, p as pe, h as Re, B as Ne, __tla as __tla_1 } from "./renderers-707ItvV_.js";
import { _ as Pe } from "./_plugin-vue_export-helper-DlAUqK2U.js";
import { r as Dt, g as Ot, l as Ie } from "./jupyterlab-Bq9OOClR.js";
import { d as De, g as Oe, __tla as __tla_2 } from "./index-wfwXefED.js";
let R0, $0, M0, D0, U0;
let __tla = Promise.all([
    (()=>{
        try {
            return __tla_0;
        } catch  {}
    })(),
    (()=>{
        try {
            return __tla_1;
        } catch  {}
    })(),
    (()=>{
        try {
            return __tla_2;
        } catch  {}
    })()
]).then(async ()=>{
    let Pt, Lt, zt, qt, Vt, jt, Ht, Gt;
    Pt = {
        id: "agent-input"
    };
    Lt = {
        id: "agent-prompt"
    };
    zt = {
        key: 0,
        class: "agent-question"
    };
    qt = [
        "innerHTML"
    ];
    Vt = {
        id: "agent-inner-input"
    };
    jt = {
        class: "query-input-container"
    };
    U0 = ue({
        __name: "BeakerAgentQuery",
        props: [
            "runCellCallback",
            "awaitingInputCell",
            "awaitingInputQuestion"
        ],
        emits: [
            "select-cell",
            "run-cell"
        ],
        setup (f) {
            const a = f, u = Q("beakerSession"), p = Q("notebook"), m = j(""), v = j(""), d = Q("session"), i = Y(()=>!!a.awaitingInputCell), b = Y({
                get: ()=>i.value ? v.value : m.value,
                set: (U)=>{
                    i.value ? v.value = U : m.value = U;
                }
            }), I = j(null), _ = (U)=>{
                i.value ? F() : w();
            }, w = ()=>{
                if (!m.value.trim()) return;
                if (p.notebook.cells.length === 1) {
                    const x = p.notebook.cells[0];
                    x.cell_type === "code" && x.source === "" && x.execution_count === null && x.outputs.length === 0 && p.notebook.removeCell(0);
                }
                const U = d.addQueryCell(m.value);
                m.value = "", me(()=>{
                    p.selectCell(U.id), u.findNotebookCellById(U.id).execute();
                });
            }, F = ()=>{
                !v.value.trim() || !a.awaitingInputCell || (a.awaitingInputCell.respond(v.value, d), v.value = "");
            }, h = ()=>{
                if (!I.value) return !1;
                const U = I.value.$el;
                return U && U.tagName === "TEXTAREA" ? (U.focus(), !0) : !1;
            };
            Be(i, (U)=>{
                U && setTimeout(()=>{
                    h() || setTimeout(h, 200);
                }, 50);
            });
            const { attachedWorkflow: k } = Rt(u), S = Y(()=>k?.value?.example_prompt ? k.value.example_prompt : "Ask the AI or request an operation."), P = Y(()=>Nt.parse(a?.awaitingInputQuestion ?? ""));
            return (U, x)=>(J(), K("div", Pt, [
                    L("div", Lt, rt(i.value ? "The agent has a question:" : "How can the agent help?"), 1),
                    i.value && f.awaitingInputQuestion ? (J(), K("div", zt, [
                        L("div", {
                            class: "question-text",
                            innerHTML: P.value
                        }, null, 8, qt)
                    ])) : ae("", !0),
                    L("div", Vt, [
                        L("div", jt, [
                            N(Ut, {
                                ref_key: "textAreaRef",
                                ref: I,
                                onSubmit: _,
                                modelValue: b.value,
                                "onUpdate:modelValue": x[0] || (x[0] = (R)=>b.value = R),
                                style: {
                                    flex: "1",
                                    "margin-right": "0.75rem"
                                },
                                placeholder: i.value ? "Reply to the agent" : S.value
                            }, null, 8, [
                                "modelValue",
                                "placeholder"
                            ]),
                            N(E(ee), {
                                onClick: _,
                                class: "agent-submit-button",
                                icon: "pi pi-send",
                                label: i.value ? "Reply" : U.$tmpl._("agent_submit_button_label", "Submit"),
                                foo: U.$tmpl
                            }, null, 8, [
                                "label",
                                "foo"
                            ])
                        ])
                    ])
                ]));
        }
    });
    Ht = {};
    Gt = {
        class: "container",
        "xmlns:svg": "http://www.w3.org/2000/svg",
        xmlns: "http://www.w3.org/2000/svg",
        id: "svg8",
        version: "1.1",
        viewBox: "0 0 270.93333 270.93334",
        height: "1024",
        width: "1024"
    };
    function Xt(f, a) {
        return J(), K("svg", Gt, [
            ...a[0] || (a[0] = [
                mt('<defs id="defs2" data-v-a53841f6></defs><g transform="translate(0,-26.06665)" id="layer1" data-v-a53841f6><g transform="translate(34.695708,15.784521)" id="g6228" data-v-a53841f6><path id="beaker-body" d="m 73.909237,73.439453 c 0.659166,-9.27e-4 1.318331,-0.0019 1.997472,-0.0028 2.170595,-0.0023 4.341168,-7.89e-4 6.511763,10e-4 1.511508,-3.56e-4 3.023015,-8.7e-4 4.534522,-0.0015 3.163727,-7.79e-4 6.327446,3.52e-4 9.491172,0.0028 4.056474,0.003 8.112934,0.0013 12.169404,-0.0019 3.11935,-0.0019 6.23869,-0.0013 9.35804,6.7e-5 1.49596,3.54e-4 2.99192,-8e-5 4.48788,-0.0013 2.08869,-0.0013 4.17735,7.03e-4 6.26604,0.0037 0.61871,-0.0011 1.23743,-0.0021 1.87489,-0.0032 0.57003,0.0015 1.14006,0.003 1.72736,0.0045 l 1.49473,6.04e-4 c 2.79572,0.1322 5.1993,0.789731 7.75824,1.918675 2.18232,1.482857 3.91718,3.210953 4.97748,5.423958 1.06004,2.212468 1.50756,4.855503 1.10794,7.276041 -0.43693,2.646505 -1.86345,4.848272 -3.70417,7.14375 -1.58497,1.432987 -2.75492,2.018161 -4.7625,2.910417 -0.0245,6.129325 -0.0433,12.258635 -0.0548,18.388005 -0.006,2.84611 -0.013,5.69217 -0.025,8.53826 -0.0115,2.74656 -0.0178,5.49309 -0.0206,8.23968 -0.002,1.04793 -0.006,2.09585 -0.0115,3.14377 -0.008,1.46764 -0.009,2.93514 -0.008,4.40279 -0.002,0.83548 -0.005,1.67096 -0.007,2.53175 0.11527,1.91673 0.33954,3.07212 1.1856,4.76199 0.28616,0.62176 0.57231,1.24352 0.86713,1.88413 0.32504,0.68792 0.65007,1.37585 0.98496,2.08462 0.3223,0.6852 0.64461,1.3704 0.97668,2.07636 0.33799,0.71726 0.67599,1.43452 1.02423,2.17351 1.36139,2.8914 2.71844,5.78469 4.06797,8.68164 1.37381,2.94813 2.75953,5.89048 4.15065,8.83047 1.54244,3.26042 3.06609,6.52882 4.57233,9.80612 0.97379,2.10496 1.96242,4.2027 2.95176,6.30039 0.70027,1.48817 1.40033,2.97645 2.10013,4.46485 0.42616,0.90399 0.42616,0.90399 0.86092,1.82624 3.13618,7.02675 3.64956,7.75363 4.62446,11.89429 0.43513,1.84812 0.56285,3.77386 0.52135,5.67206 -0.0396,1.81231 -0.28552,3.63208 -0.73396,5.38847 -0.59366,2.32517 -1.43685,4.60909 -2.56696,6.72609 -1.60118,2.99943 -3.44065,5.97096 -5.89425,8.32472 -3.33218,3.19659 -6.63154,5.52987 -11.62823,7.52854 -5.13859,1.79602 -10.12058,1.96812 -15.5048,1.95899 -0.75087,0.002 -1.50173,0.004 -2.27534,0.006 -2.47555,0.005 -4.95104,0.004 -7.42659,0.002 -1.72491,0.001 -3.44982,0.003 -5.17473,0.004 -3.61303,0.003 -7.22605,0.002 -10.83908,-7.9e-4 -4.16659,-0.003 -8.333127,7.9e-4 -12.499705,0.008 -4.020415,0.007 -8.04081,0.007 -12.06123,0.006 -1.705197,-4e-5 -3.410394,0.002 -5.115588,0.005 -2.386009,0.004 -4.77192,0.001 -7.157926,-0.003 -1.051919,0.004 -1.051919,0.004 -2.125089,0.008 -6.3713,-0.0253 -11.895032,-1.02644 -17.566926,-4.09271 -4.778803,-2.82542 -8.727683,-6.47947 -11.790494,-11.12904 -2.835958,-5.26096 -4.055181,-10.04022 -4.025596,-15.99385 0.378251,-11.5332 8.519115,-23.77256 13.366626,-34.05064 1.184513,-2.51802 2.354694,-5.04253 3.524334,-7.56749 1.386342,-2.97968 2.789469,-5.95141 4.191992,-8.92349 0.76429,-1.62919 1.514021,-3.26319 2.257226,-4.90202 0.386681,-0.8381 0.773975,-1.67592 1.161687,-2.51355 0.209413,-0.45259 0.418827,-0.90518 0.634586,-1.37149 0.437964,-0.94614 0.876184,-1.89216 1.314649,-2.83807 1.568765,-3.39213 1.948791,-5.12906 1.946199,-8.87562 l 1.17e-4,-1.41579 c -1.85e-4,-1.55045 -0.0022,-3.1009 -0.0043,-4.65135 -5.02e-4,-1.07256 -8.73e-4,-2.14512 -0.0011,-3.21768 -0.001,-2.82775 -0.0036,-5.6555 -0.0065,-8.48325 -0.0027,-2.8836 -0.0039,-5.7672 -0.0052,-8.65079 -0.0028,-5.6615 -0.0074,-11.323 -0.01292,-16.984497 l -1.237133,-0.45992 C 58.542804,96.737662 57.153007,95.252318 55.624745,93.502212 54.496853,91.855489 53.865366,90.2781 53.475006,88.3263 c -0.121283,-2.716738 0.05868,-4.870756 1.058333,-7.408333 1.562053,-2.454655 3.087425,-4.260082 5.55625,-5.820833 4.331446,-1.954638 9.167107,-1.664261 13.820136,-1.65617 z M 64.55452,83.870968 c -0.425233,0.224411 -0.816314,0.581284 -1.025851,1.014039 -0.348042,0.718807 -0.426568,1.599215 -0.264583,2.38125 0.14422,0.696267 0.497178,1.4154 1.058333,1.852084 1.300285,1.011866 3.368645,0.444405 4.7625,1.322916 1.018681,0.642049 1.852083,1.5875 2.373741,2.723013 0.69781,2.30781 0.675865,4.503298 0.656823,6.89003 l 4.69e-4,1.54185 c -7.36e-4,1.67643 -0.009,3.35273 -0.01726,5.02913 -0.002,1.16445 -0.0035,2.3289 -0.0045,3.49335 -0.004,3.06089 -0.01443,6.12172 -0.02614,9.18259 -0.01084,3.12496 -0.01566,6.24994 -0.02099,9.37491 -0.03396,18.34919 -0.03396,18.34919 -0.769422,19.87533 l -0.940422,1.95215 c -0.307797,0.63883 -0.615595,1.27767 -0.932719,1.93586 -2.26936,4.72317 -4.447892,9.48324 -6.527937,14.29274 -0.474515,1.0587 -0.800989,1.77791 -1.414759,3.17061 -0.61377,1.3927 -1.056464,2.41802 -1.726145,4.48354 0.61729,-0.0425 0.716746,-0.0682 1.147228,-0.0722 1.3724,0.0289 2.744979,0.0492 4.117578,0.0662 0.764325,0.0123 1.528651,0.0245 2.316137,0.0372 4.011808,-0.18046 6.963259,-1.46773 10.499618,-3.27835 2.93718,-1.1455 5.375697,-1.37498 8.516276,-1.20716 3.699054,0.65586 6.631311,2.3481 9.739973,4.38216 2.557679,1.3867 4.766382,1.92622 7.672922,1.91823 0.74488,0.002 0.74488,0.002 1.50481,0.004 3.12547,-0.15627 5.67446,-1.5122 8.36745,-2.9807 2.85096,-1.51352 5.52986,-2.58694 8.78086,-2.71197 3.43485,0.11449 6.147,1.13989 9.25938,2.48046 3.00087,1.24928 5.57152,1.38595 8.81143,1.30757 0.49791,-0.0204 1.13285,0.0476 1.50175,0.0153 -1.12627,-2.70734 -1.89767,-4.24673 -2.96996,-6.3169 -6.48154,-13.0358 -8.70491,-17.19142 -8.97577,-20.10689 -0.18894,-10.40418 -0.57361,-35.06513 -0.57361,-54.251389 -0.01,-1.551357 1.40047,-2.497347 2.571,-3.21188 1.1618,-0.709211 2.77471,-0.223603 4.00182,-0.812649 0.62098,-0.298088 1.26737,-0.713009 1.5875,-1.322917 0.45274,-0.86254 0.56082,-1.982408 0.26459,-2.910416 -0.24726,-0.774606 -0.86387,-1.481253 -1.5875,-1.852083 -1.04859,-0.537362 -2.34489,-0.248794 -3.52204,-0.299962 -0.59003,-0.02565 -1.16936,-0.0022 -1.77176,-0.0034 -0.64574,1.19e-4 -1.29149,2.39e-4 -1.9568,3.7e-4 -0.67669,-9e-4 -1.35339,-0.0018 -2.05059,-0.0027 -2.24846,-0.0025 -4.49692,-0.003 -6.74538,-0.0033 -1.55582,-8.46e-4 -3.11164,-0.0017 -4.66746,-0.0027 -3.26567,-0.0016 -6.53135,-0.0021 -9.79703,-0.0019 -4.19406,2.7e-5 -8.388098,-0.0036 -12.582149,-0.0081 -3.214389,-0.0029 -6.428775,-0.0035 -9.643165,-0.0033 -1.546751,-3.17e-4 -3.093501,-0.0015 -4.640251,-0.0035 -2.159087,-0.0026 -4.318147,-0.0018 -6.477234,-2.36e-4 -0.967007,-0.0022 -0.967007,-0.0022 -1.953551,-0.0045 -0.586173,0.0011 -1.172347,0.0022 -1.776284,0.0034 -0.510896,-1.45e-4 -0.636509,0.0026 -0.95424,0.01879 -1.100249,0.05597 -2.236743,0.113404 -3.196686,0.620002 z m 55.3304,94.676542 c -0.79978,0.22937 -1.64358,0.63847 -2.11667,1.32291 -0.7671,1.10981 -1.12579,2.66113 -0.79375,3.96875 0.33906,1.33527 1.3662,2.66468 2.64584,3.175 1.40225,0.55922 3.23,0.29024 4.49791,-0.52916 0.86383,-0.55826 1.31295,-1.65464 1.5875,-2.64584 0.18834,-0.67995 0.25578,-1.4591 0,-2.11666 -0.52047,-1.33804 -1.59624,-2.5969 -2.91041,-3.175 -0.88802,-0.39064 -1.97787,-0.26745 -2.91042,0 z m -39.422918,2.38125 c -0.908385,0.55017 -1.810571,1.36432 -2.116666,2.38125 -0.539236,1.79149 -0.203755,3.97347 0.79375,5.55625 0.678173,1.07608 1.921705,1.89957 3.175,2.11666 1.791498,0.31031 3.873413,-0.18523 5.291666,-1.32291 0.922987,-0.74039 1.430443,-2.00222 1.5875,-3.175 0.179072,-1.33718 -0.06122,-2.83583 -0.79375,-3.96875 -0.82388,-1.2742 -2.213444,-2.3628 -3.704167,-2.64584 -1.429011,-0.27132 -2.989189,0.30482 -4.233333,1.05834 z m -24.870833,1.85208 c -1.057671,1.69227 -1.842609,3.21808 -2.645833,5.02708 -0.521992,1.1027 -1.044109,2.20533 -1.568057,3.3071 -2.018585,4.24721 -3.993042,8.50726 -5.840276,12.83249 -0.311052,0.72578 -0.622101,1.45157 -0.942578,2.19935 -1.188333,3.26029 -1.292669,6.24432 -1.174088,9.7069 0.676905,4.20393 2.166241,7.21437 4.762499,10.58333 2.241042,2.54208 4.931013,4.35342 7.987109,5.8043 3.300827,1.17126 6.416857,1.63658 9.911839,1.63941 0.62981,0.001 1.25962,0.002 1.908515,0.003 0.689201,-1.2e-4 1.378402,-2.4e-4 2.088487,-2.6e-4 0.727259,7.9e-4 1.454517,0.002 2.203814,0.003 2.410209,0.003 4.820413,0.003 7.230623,0.003 1.672796,8e-4 3.345591,0.002 5.018387,0.003 3.509361,0.002 7.018719,0.002 10.52808,0.002 4.05248,-1.6e-4 8.10495,0.003 12.15743,0.007 3.90188,0.004 7.80377,0.005 11.70565,0.005 1.65851,2.7e-4 3.31702,0.002 4.97552,0.004 2.3194,0.003 4.63878,0.002 6.95818,2.4e-4 0.68599,0.002 1.37198,0.003 2.07875,0.005 5.45617,-0.01 9.85474,-0.50821 14.79709,-3.02881 3.74039,-2.48004 6.49011,-5.58144 8.66511,-9.47539 1.32955,-3.59262 1.85764,-7.13647 1.5875,-10.31875 -0.27014,-3.18228 -1.1231,-4.67715 -2.18281,-6.99492 -0.28275,-0.61937 -0.56549,-1.23875 -0.8568,-1.87689 -1.27768,-2.71739 -2.58424,-5.42 -3.90157,-8.11836 -1.27493,-2.63584 -2.50059,-5.29304 -3.71967,-7.95508 -0.72992,-1.59218 -0.72992,-1.59218 -1.77457,-3.36516 h -8.73125 c -0.35671,-2.4e-4 -0.95375,-0.007 -0.95375,-0.007 0,0 0.49601,0.96177 0.68917,1.33027 0.44047,0.92628 0.88157,1.85226 1.32292,2.77813 0.24556,0.51569 0.49113,1.03137 0.74414,1.56269 0.96791,2.00227 1.96433,3.98933 2.96002,5.97793 0.80951,1.63481 1.61285,3.27257 2.41433,4.91133 0.20429,0.41456 0.40859,0.82913 0.61908,1.25626 2.31976,4.74819 4.13827,9.12914 3.84576,13.94075 -0.0984,1.61844 -1.06978,3.07768 -1.85208,4.49791 -0.27144,0.49279 -0.62081,0.94067 -0.97566,1.37726 -0.5159,0.63473 -1.13043,1.07808 -1.67018,1.79774 -2.44551,1.74679 -4.77025,2.71392 -7.67291,3.43959 -0.97843,0.0493 -1.95844,0.0702 -2.9381,0.0725 -0.59788,0.003 -1.19576,0.005 -1.81175,0.008 -0.65373,1.8e-4 -1.30747,2.7e-4 -1.98101,5.3e-4 -0.69028,0.002 -1.38056,0.004 -2.09176,0.007 -2.28741,0.006 -4.5748,0.009 -6.86221,0.0105 -1.58849,0.002 -3.17697,0.005 -4.76544,0.007 -3.33276,0.004 -6.66551,0.006 -9.99826,0.007 -4.26939,0.001 -8.538708,0.0114 -12.808074,0.0235 -3.282143,0.008 -6.56427,0.01 -9.846421,0.0101 -1.573887,10e-4 -3.147774,0.004 -4.721652,0.01 -2.202745,0.007 -4.405336,0.006 -6.608087,0.003 -0.974172,0.006 -0.974172,0.006 -1.968024,0.0119 -3.970033,-0.017 -7.408697,-0.92517 -10.80794,-2.35329 -0.407344,-0.17114 -0.759342,-0.45614 -1.107943,-0.72761 -0.7911,-0.61605 -1.53253,-1.30701 -2.216892,-2.03314 -1.865004,-1.97882 -2.559035,-4.11941 -3.074774,-6.69811 -0.227243,-3.52227 0.666995,-6.24645 2.133203,-9.43508 0.95145,-1.97697 1.920673,-3.94441 2.89388,-5.91075 0.498116,-1.03532 0.994382,-2.07152 1.488281,-3.10885 1.045683,-2.18911 2.092843,-4.3775 3.141927,-6.56498 0.259209,-0.54059 0.518418,-1.08117 0.785482,-1.63814 0.480328,-0.9955 1.21632,-2.48121 1.463476,-2.97553 0.247156,-0.49431 0.826865,-1.5705 0.826865,-1.5705 0,0 -0.592218,-0.0125 -0.826865,-0.017 -0.234647,-0.004 -8.995833,0 -8.995833,0 z m 57.679171,7.40833 c -0.62182,0.13346 -1.25985,0.51326 -1.5875,1.05834 -0.45664,0.75966 -0.56257,1.81108 -0.26459,2.64583 0.20966,0.58733 0.88195,0.88195 1.32292,1.32292 0.0882,0.0882 0.14935,0.21685 0.26458,0.26458 0.48889,0.2025 1.07753,0.14125 1.5875,0 0.4956,-0.13727 0.97351,-0.41643 1.32292,-0.79375 0.26799,-0.28939 0.46599,-0.66901 0.52917,-1.05833 0.0999,-0.61558 0.0143,-1.2943 -0.26459,-1.85209 -0.27889,-0.55779 -0.7684,-1.03755 -1.32291,-1.32291 -0.47701,-0.24548 -1.06298,-0.37717 -1.5875,-0.26459 z m -15.610421,2.38125 c -1.200047,0.36207 -2.445062,1.21735 -2.910417,2.38125 -0.527954,1.32046 -0.144198,2.98077 0.529167,4.23334 0.38501,0.71618 1.10848,1.25855 1.852083,1.5875 0.650262,0.28766 1.413283,0.36868 2.116667,0.26458 0.859251,-0.12717 1.827121,-0.38943 2.381251,-1.05833 0.9826,-1.18611 1.44068,-3.00588 1.05833,-4.49792 -0.29455,-1.14939 -1.32274,-2.10971 -2.38125,-2.64583 -0.790706,-0.40048 -1.79727,-0.52061 -2.645831,-0.26459 z m 27.781251,4.23334 c -0.68722,0.1825 -1.34398,0.56092 -1.85208,1.05833 -0.36748,0.35975 -0.65648,0.82732 -0.79375,1.32292 -0.25896,0.93494 -0.37125,2.01412 0,2.91041 0.4773,1.15232 1.49351,2.16853 2.64583,2.64584 0.81481,0.33751 1.83102,0.33751 2.64583,0 1.15232,-0.47731 2.2844,-1.4521 2.64584,-2.64584 0.39095,-1.29123 -0.0612,-2.83583 -0.79375,-3.96875 -0.41194,-0.6371 -1.1296,-1.09138 -1.85209,-1.32291 -0.83987,-0.26915 -1.79343,-0.22637 -2.64583,0 z m -55.827084,7.67291 c -1.224554,0.76995 -2.118475,2.09265 -2.645834,3.43959 -0.355147,0.90709 -0.485663,1.96169 -0.264583,2.91041 0.422232,1.81192 1.411082,3.66099 2.910417,4.7625 1.172204,0.86118 2.782131,1.15683 4.233333,1.05834 1.421555,-0.0965 2.878823,-0.66979 3.96875,-1.5875 1.029807,-0.86709 1.873379,-2.11552 2.116667,-3.43959 0.340722,-1.85434 0.0066,-4.0004 -1.058334,-5.55625 -0.93988,-1.3732 -2.59486,-2.3552 -4.233333,-2.64583 -1.686107,-0.29908 -3.577404,0.14683 -5.027083,1.05833 z m 39.158334,2.91042 c -1.30496,0.96235 -1.91128,2.87757 -1.85208,4.49792 0.0504,1.37954 0.764,2.85461 1.85208,3.70416 1.2818,1.0008 3.18358,1.44773 4.7625,1.05834 1.45821,-0.35962 2.75584,-1.57319 3.43958,-2.91042 0.5235,-1.02384 0.59282,-2.3375 0.26459,-3.43958 -0.41288,-1.38632 -1.32051,-2.86006 -2.64584,-3.43959 -1.78508,-0.78057 -4.25282,-0.62717 -5.82083,0.52917 z" class="main-fill" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dot-inside-big" d="m 103.74534,108.96209 c 1.94939,0.29834 3.81324,1.3407 5.29167,2.64583 1.66873,1.47312 3.01091,3.44103 3.70416,5.55625 0.60491,1.84568 0.71616,3.93178 0.26459,5.82084 -0.57272,2.39589 -1.86262,4.72498 -3.63802,6.43268 -1.45695,1.4014 -3.42217,2.31903 -5.39089,2.77812 -1.82545,0.42568 -3.83342,0.4603 -5.622395,-0.0992 -2.492143,-0.77942 -4.892855,-2.30317 -6.515365,-4.34908 -1.404669,-1.77122 -2.267682,-4.09225 -2.38125,-6.35 -0.121441,-2.41426 0.630547,-4.92549 1.852083,-7.01146 0.992805,-1.69538 2.477017,-3.22052 4.233334,-4.10104 2.475663,-1.24115 5.464593,-1.7419 8.202083,-1.32294 z m -6.085417,6.61458 c -0.96026,0.4536 -1.658661,1.42309 -2.116666,2.38125 -0.462719,0.96803 -0.688707,2.114 -0.529167,3.175 0.234593,1.56013 0.88049,3.25308 2.116667,4.23334 1.491757,1.18293 3.682183,1.65838 5.556253,1.32291 1.56507,-0.28016 3.11117,-1.30699 3.96875,-2.64583 0.91503,-1.42852 1.22115,-3.38535 0.79375,-5.02708 -0.39561,-1.51961 -1.48521,-3.04502 -2.91042,-3.70417 -2.08279,-0.96327 -4.804258,-0.71554 -6.879167,0.26458 z" class="alt-fill" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dot-top-most-2" d="m 116.17807,51.449968 c 1.55254,0.07554 3.10305,0.885444 4.23602,1.949624 0.94914,0.891512 1.62405,2.157529 1.85208,3.439583 0.32762,1.841978 0.12803,3.928204 -0.79375,5.55625 -0.89581,1.582175 -2.53976,2.778091 -4.23333,3.439583 -1.31697,0.514395 -2.86527,0.62153 -4.23333,0.264583 -1.46613,-0.382534 -2.80089,-1.342584 -3.81993,-2.463932 -0.84726,-0.932319 -1.59028,-2.105606 -1.73632,-3.356901 -0.25292,-2.167101 0.11499,-4.740031 1.5875,-6.35 1.70054,-1.859286 4.62436,-2.601247 7.14106,-2.47879 z m -2.40391,4.656902 c -0.55562,0.234902 -1.0628,0.7058 -1.29757,1.261472 -0.30892,0.731169 -0.33167,1.660118 0,2.38125 0.33976,0.738723 1.08947,1.305394 1.85208,1.5875 0.4963,0.183593 1.08994,0.180142 1.5875,0 0.64768,-0.234492 1.29533,-0.699128 1.5875,-1.322917 0.37408,-0.798679 0.37408,-1.847154 0,-2.645833 -0.29217,-0.623789 -0.93653,-1.097736 -1.5875,-1.322917 -0.67505,-0.23351 -1.48409,-0.216705 -2.14201,0.06144 z" class="contrast-fill" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dor-inside-3" d="m 104.00992,153.14751 c 1.42372,0.0626 2.77485,0.98101 3.78685,1.98437 0.88787,0.88029 1.59952,2.06861 1.7694,3.3073 0.22096,1.61114 -0.12995,3.42732 -1.05833,4.7625 -1.01948,1.4662 -2.74028,2.59453 -4.49792,2.91041 -1.60058,0.28765 -3.42099,-0.13911 -4.7625,-1.05833 -1.311584,-0.89871 -2.337281,-2.40903 -2.645833,-3.96875 -0.349087,-1.76462 -0.0821,-3.90057 1.058333,-5.29167 1.453772,-1.77332 4.05916,-2.74656 6.35,-2.64583 z" class="alt-fill-2" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dot-inside-2" d="m 91.839086,136.74334 c 1.664756,0.32641 3.443631,1.05218 4.497917,2.38125 1.076839,1.35751 1.524009,3.30604 1.322916,5.02708 -0.174001,1.48917 -0.956665,3.01885 -2.116666,3.96875 -1.424796,1.16674 -3.459175,1.76997 -5.291667,1.5875 -1.491926,-0.14856 -2.939522,-1.02643 -3.96875,-2.11666 -0.866843,-0.91822 -1.460608,-2.18323 -1.5875,-3.43959 -0.154777,-1.53245 0.223156,-3.20375 1.058333,-4.49791 0.784342,-1.21539 2.095032,-2.11242 3.439584,-2.64584 0.823875,-0.32685 1.776051,-0.43512 2.645833,-0.26458 z" class="contrast-fill" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dot-inside-topmost" d="m 115.387,94.410008 c 0.9421,0.121325 1.91323,0.45371 2.64583,1.058333 1.13209,0.93432 2.1084,2.261901 2.38125,3.704167 0.33437,1.767472 -0.0574,3.797042 -1.05833,5.291662 -0.88471,1.32107 -2.40213,2.37448 -3.96875,2.64584 -1.7915,0.31031 -3.8308,-0.2405 -5.29167,-1.32292 -1.23959,-0.91846 -2.13537,-2.4457 -2.38125,-3.96875 -0.23317,-1.44431 0.26872,-2.993084 0.95912,-4.282941 0.56483,-1.055244 1.41134,-2.058143 2.48047,-2.596224 1.27028,-0.639319 2.82289,-0.710805 4.23333,-0.529167 z" class="contrast-fill" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dot-outside-2" d="m 83.637003,58.162091 c 1.524302,-0.221073 3.37041,0.009 4.497917,1.058333 1.082238,1.007201 1.610726,2.783211 1.322916,4.233334 -0.268193,1.351284 -1.423618,2.539323 -2.645833,3.175 -0.942186,0.490033 -2.168538,0.603525 -3.175,0.264583 -1.124482,-0.378688 -2.121864,-1.316674 -2.645833,-2.38125 -0.507798,-1.03172 -0.516861,-2.317683 -0.264584,-3.439583 0.155995,-0.693724 0.555548,-1.349298 1.058334,-1.852084 0.502786,-0.502786 1.148399,-0.956276 1.852083,-1.058333 z" class="alt-fill" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dot-near-surface-2" d="m 117.76825,144.15167 c 0.67117,0.15495 1.27328,0.70994 1.5875,1.32292 0.56467,1.10157 0.69722,2.54436 0.26458,3.70416 -0.34874,0.93488 -1.19481,1.73483 -2.11666,2.11667 -0.89629,0.37126 -1.97548,0.25896 -2.91042,0 -0.4956,-0.13727 -0.97351,-0.41643 -1.32292,-0.79375 -0.53597,-0.57879 -0.97056,-1.33273 -1.05833,-2.11667 -0.11656,-1.04105 0.008,-2.31126 0.74901,-3.0521 1.16661,-1.16696 3.19945,-1.55242 4.80724,-1.18123 z" class="contrast-fill" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dot-near-surface" d="m 80.99117,156.85167 c 1.228188,-0.0232 2.674106,0.36218 3.439583,1.32292 0.777223,0.97548 0.805069,2.4878 0.529167,3.70416 -0.140683,0.62022 -0.535165,1.22589 -1.058333,1.5875 -0.967942,0.66904 -2.29948,1.08477 -3.439584,0.79375 -1.029006,-0.26266 -1.893285,-1.1734 -2.38125,-2.11666 -0.366954,-0.70934 -0.441962,-1.60256 -0.264583,-2.38125 0.184795,-0.81124 0.691152,-1.57525 1.322917,-2.11667 0.510005,-0.43707 1.180534,-0.78108 1.852083,-0.79375 z" class="alt-fill" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dot-top-most" d="m 97.130753,47.843342 c 0.783276,0.218245 1.471987,0.868696 1.852083,1.5875 0.373329,0.706005 0.506687,1.620196 0.264584,2.38125 -0.321942,1.012028 -1.147866,1.946195 -2.116667,2.38125 -0.724091,0.325164 -1.658435,0.32799 -2.38125,0 -0.853736,-0.387399 -1.522332,-1.239052 -1.852083,-2.116667 -0.248163,-0.660472 -0.204459,-1.441385 0,-2.116666 0.184297,-0.608691 0.524269,-1.242182 1.058333,-1.5875 0.900996,-0.582571 2.141439,-0.817149 3.175,-0.529167 z" class="alt-fill" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path><path id="dot-near-outside" d="m 99.185998,61.795387 c 0.699713,-0.01723 1.423432,0.364897 1.913502,0.864621 0.47029,0.47955 0.83923,1.181956 0.79375,1.852083 -0.0696,1.026155 -0.72188,2.090367 -1.5875,2.645834 -0.672148,0.431316 -1.627634,0.528936 -2.381247,0.264583 -0.706169,-0.247711 -1.328616,-0.885351 -1.5875,-1.5875 -0.310969,-0.843415 -0.286048,-1.940432 0.212612,-2.688356 0.5478,-0.821629 1.649181,-1.326955 2.636383,-1.351265 z" class="alt-fill-2" data-v-551ff1c2="" style="stroke-width:0.26458332;" data-v-a53841f6></path></g></g>', 2)
            ])
        ]);
    }
    let Jt, Wt;
    $0 = Pe(Ht, [
        [
            "render",
            Xt
        ],
        [
            "__scopeId",
            "data-v-a53841f6"
        ]
    ]);
    Jt = ue({
        props: [
            "cellMap",
            "noEmptyStartingCell"
        ],
        setup (f) {
            const a = Q("session"), u = Q("beakerSession"), p = j(a.notebook), m = j(null);
            We("cell-component-mapping", f.cellMap);
            const v = Y(()=>a?.notebook?.cells?.length || 0);
            return {
                session: a,
                beakerSession: u,
                notebook: p,
                selectedCellId: m,
                cellCount: v
            };
        },
        methods: {
            selectCell (f, a = !1, u = void 0) {
                if (f === void 0) return "";
                let p;
                return typeof f == "string" ? p = f : Object.hasOwn(f, "cell") ? p = f.cell.id : p = f.id, this.selectedCellId !== p && (this.selectedCellId = p), me(()=>{
                    this.scrollCellIntoView(this.selectedCell()), a && this.selectedCell().enter(u);
                }), this.selectedCellId;
            },
            scrollCellIntoView (f) {
                const a = f?.$?.vnode?.el;
                if (!a) return;
                const u = a.closest(".beaker-cell") ?? a;
                Mt(u, {
                    scrollMode: "if-needed",
                    block: "nearest",
                    inline: "nearest"
                });
            },
            selectedCell () {
                const f = this.beakerSession.findNotebookCellById(this.selectedCellId);
                if (f) return f;
                if (this.notebook.cells.length > 0) return this.selectedCellId = this.notebook.cells[0].id, this.beakerSession.findNotebookCellById(this.selectedCellId);
            },
            nextCell (f) {
                let a;
                if (f === void 0 ? a = this.notebook.cells.indexOf(this.selectedCell().cell) : a = this.notebook.cells.indexOf(f), a >= 0 && a < this.cellCount - 1) {
                    const p = this.notebook.cells[a + 1].id;
                    return this.beakerSession.findNotebookCellById(p);
                }
                return null;
            },
            prevCell (f) {
                let a;
                if (f === void 0 ? a = this.notebook.cells.indexOf(this.selectedCell().cell) : a = this.notebook.cells.indexOf(f), a > 0) {
                    const p = this.notebook.cells[a - 1].id;
                    return this.beakerSession.findNotebookCellById(p);
                }
                return null;
            },
            selectNextCell (f, a = !1) {
                const u = this.nextCell(f);
                if (u) return this.selectCell(u, a);
                for (const p of this.notebook.cells)if (p.children) {
                    const m = p.children.indexOf(f);
                    if (m === -1) continue;
                    return m <= p.children.length - 1 ? this.selectNextCell(p) : this.selectCell(p.children[m + 1], a);
                }
                return null;
            },
            selectPrevCell (f, a = !1) {
                const u = this.prevCell(f);
                return u ? this.selectCell(u, a) : null;
            },
            insertCellBefore (f, a, u = !1) {
                f === void 0 && (f = this.selectedCell()), a === void 0 && (a = new this.defaultCellModel({
                    source: ""
                }));
                const p = f === void 0 ? this.notebook.cells.length - 1 : this.notebook.cells.findIndex((m)=>m === f.cell);
                return this.notebook.cells.splice(p, 0, a), me(()=>this.selectCell(a, u)), a;
            },
            insertCellAfter (f, a, u = !1) {
                f === void 0 && (f = this.selectedCell()), a === void 0 && (a = new this.defaultCellModel({
                    source: ""
                }));
                const p = f === void 0 ? this.notebook.cells.length - 1 : this.notebook.cells.findIndex((m)=>m === f.cell);
                return this.notebook.cells.splice(p + 1, 0, a), me(()=>this.selectCell(a, u)), a;
            },
            removeCell (f) {
                f === void 0 && (f = this.selectedCell());
                const a = this.notebook.cells.findIndex((u)=>u === f.cell);
                if (a > -1) return f.cell.id === this.selectedCellId && (this.selectNextCell() || this.selectPrevCell()), this.notebook.cutCell(a);
            },
            convertCellType (f, a) {
                const u = this.notebook.cells.indexOf(f);
                if (u === -1) {
                    console.warn("attempted to convert cell not found in parent cell in place; cell not found");
                    return;
                }
                const p = typeof this.cellMap == "function" ? this.cellMap(null) : this.cellMap;
                if (!Object.keys(p).includes(a)) {
                    console.warn("invalid cell type provided for conversion target");
                    return;
                }
                const v = new p[a].modelClass({
                    ...f
                });
                v.cell_type = a, this.notebook.cells.splice(u, 1, v);
            }
        },
        computed: {
            defaultCellModel () {
                const f = typeof this.cellMap == "function" ? this.cellMap(null) : this.cellMap;
                return f && Object.keys(f).length > 0 ? Object.values(f)[0].modelClass : ke;
            }
        },
        beforeMount () {
            if (We("notebook", this), this.beakerSession.notebookComponent = this, this.cellCount === 0) {
                if (this.noEmptyStartingCell) return;
                this.session.addCodeCell("");
            }
        },
        mounted () {
            this.noEmptyStartingCell || this.selectedCell() || me(()=>{
                this.notebook.cells.length > 0 && this.selectCell(this.notebook.cells[0].id);
            });
        }
    });
    Wt = {
        class: "beaker-notebook"
    };
    function Qt(f, a, u, p, m, v) {
        return J(), K("div", Wt, [
            le(f.$slots, "default")
        ]);
    }
    R0 = Pe(Jt, [
        [
            "render",
            Qt
        ]
    ]);
    var ge = {
        exports: {}
    }, ve = {
        exports: {}
    }, Me = {}, ye = {}, Ye;
    function Zt() {
        if (Ye) return ye;
        Ye = 1, ye.byteLength = i, ye.toByteArray = I, ye.fromByteArray = F;
        for(var f = [], a = [], u = typeof Uint8Array < "u" ? Uint8Array : Array, p = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", m = 0, v = p.length; m < v; ++m)f[m] = p[m], a[p.charCodeAt(m)] = m;
        a[45] = 62, a[95] = 63;
        function d(h) {
            var k = h.length;
            if (k % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
            var S = h.indexOf("=");
            S === -1 && (S = k);
            var P = S === k ? 0 : 4 - S % 4;
            return [
                S,
                P
            ];
        }
        function i(h) {
            var k = d(h), S = k[0], P = k[1];
            return (S + P) * 3 / 4 - P;
        }
        function b(h, k, S) {
            return (k + S) * 3 / 4 - S;
        }
        function I(h) {
            var k, S = d(h), P = S[0], U = S[1], x = new u(b(h, P, U)), R = 0, $ = U > 0 ? P - 4 : P, T;
            for(T = 0; T < $; T += 4)k = a[h.charCodeAt(T)] << 18 | a[h.charCodeAt(T + 1)] << 12 | a[h.charCodeAt(T + 2)] << 6 | a[h.charCodeAt(T + 3)], x[R++] = k >> 16 & 255, x[R++] = k >> 8 & 255, x[R++] = k & 255;
            return U === 2 && (k = a[h.charCodeAt(T)] << 2 | a[h.charCodeAt(T + 1)] >> 4, x[R++] = k & 255), U === 1 && (k = a[h.charCodeAt(T)] << 10 | a[h.charCodeAt(T + 1)] << 4 | a[h.charCodeAt(T + 2)] >> 2, x[R++] = k >> 8 & 255, x[R++] = k & 255), x;
        }
        function _(h) {
            return f[h >> 18 & 63] + f[h >> 12 & 63] + f[h >> 6 & 63] + f[h & 63];
        }
        function w(h, k, S) {
            for(var P, U = [], x = k; x < S; x += 3)P = (h[x] << 16 & 16711680) + (h[x + 1] << 8 & 65280) + (h[x + 2] & 255), U.push(_(P));
            return U.join("");
        }
        function F(h) {
            for(var k, S = h.length, P = S % 3, U = [], x = 16383, R = 0, $ = S - P; R < $; R += x)U.push(w(h, R, R + x > $ ? $ : R + x));
            return P === 1 ? (k = h[S - 1], U.push(f[k >> 2] + f[k << 4 & 63] + "==")) : P === 2 && (k = (h[S - 2] << 8) + h[S - 1], U.push(f[k >> 10] + f[k >> 4 & 63] + f[k << 2 & 63] + "=")), U.join("");
        }
        return ye;
    }
    var xe = {};
    var Ke;
    function Yt() {
        return Ke || (Ke = 1, xe.read = function(f, a, u, p, m) {
            var v, d, i = m * 8 - p - 1, b = (1 << i) - 1, I = b >> 1, _ = -7, w = u ? m - 1 : 0, F = u ? -1 : 1, h = f[a + w];
            for(w += F, v = h & (1 << -_) - 1, h >>= -_, _ += i; _ > 0; v = v * 256 + f[a + w], w += F, _ -= 8);
            for(d = v & (1 << -_) - 1, v >>= -_, _ += p; _ > 0; d = d * 256 + f[a + w], w += F, _ -= 8);
            if (v === 0) v = 1 - I;
            else {
                if (v === b) return d ? NaN : (h ? -1 : 1) * (1 / 0);
                d = d + Math.pow(2, p), v = v - I;
            }
            return (h ? -1 : 1) * d * Math.pow(2, v - p);
        }, xe.write = function(f, a, u, p, m, v) {
            var d, i, b, I = v * 8 - m - 1, _ = (1 << I) - 1, w = _ >> 1, F = m === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, h = p ? 0 : v - 1, k = p ? 1 : -1, S = a < 0 || a === 0 && 1 / a < 0 ? 1 : 0;
            for(a = Math.abs(a), isNaN(a) || a === 1 / 0 ? (i = isNaN(a) ? 1 : 0, d = _) : (d = Math.floor(Math.log(a) / Math.LN2), a * (b = Math.pow(2, -d)) < 1 && (d--, b *= 2), d + w >= 1 ? a += F / b : a += F * Math.pow(2, 1 - w), a * b >= 2 && (d++, b /= 2), d + w >= _ ? (i = 0, d = _) : d + w >= 1 ? (i = (a * b - 1) * Math.pow(2, m), d = d + w) : (i = a * Math.pow(2, w - 1) * Math.pow(2, m), d = 0)); m >= 8; f[u + h] = i & 255, h += k, i /= 256, m -= 8);
            for(d = d << m | i, I += m; I > 0; f[u + h] = d & 255, h += k, d /= 256, I -= 8);
            f[u + h - k] |= S * 128;
        }), xe;
    }
    var et;
    function Kt() {
        return et || (et = 1, (function(f) {
            const a = Zt(), u = Yt(), p = typeof Symbol == "function" && typeof Symbol.for == "function" ? Symbol.for("nodejs.util.inspect.custom") : null;
            f.Buffer = i, f.SlowBuffer = x, f.INSPECT_MAX_BYTES = 50;
            const m = 2147483647;
            f.kMaxLength = m, i.TYPED_ARRAY_SUPPORT = v(), !i.TYPED_ARRAY_SUPPORT && typeof console < "u" && typeof console.error == "function" && console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
            function v() {
                try {
                    const n = new Uint8Array(1), e = {
                        foo: function() {
                            return 42;
                        }
                    };
                    return Object.setPrototypeOf(e, Uint8Array.prototype), Object.setPrototypeOf(n, e), n.foo() === 42;
                } catch  {
                    return !1;
                }
            }
            Object.defineProperty(i.prototype, "parent", {
                enumerable: !0,
                get: function() {
                    if (i.isBuffer(this)) return this.buffer;
                }
            }), Object.defineProperty(i.prototype, "offset", {
                enumerable: !0,
                get: function() {
                    if (i.isBuffer(this)) return this.byteOffset;
                }
            });
            function d(n) {
                if (n > m) throw new RangeError('The value "' + n + '" is invalid for option "size"');
                const e = new Uint8Array(n);
                return Object.setPrototypeOf(e, i.prototype), e;
            }
            function i(n, e, t) {
                if (typeof n == "number") {
                    if (typeof e == "string") throw new TypeError('The "string" argument must be of type string. Received type number');
                    return w(n);
                }
                return b(n, e, t);
            }
            i.poolSize = 8192;
            function b(n, e, t) {
                if (typeof n == "string") return F(n, e);
                if (ArrayBuffer.isView(n)) return k(n);
                if (n == null) throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof n);
                if (ie(n, ArrayBuffer) || n && ie(n.buffer, ArrayBuffer) || typeof SharedArrayBuffer < "u" && (ie(n, SharedArrayBuffer) || n && ie(n.buffer, SharedArrayBuffer))) return S(n, e, t);
                if (typeof n == "number") throw new TypeError('The "value" argument must not be of type number. Received type number');
                const r = n.valueOf && n.valueOf();
                if (r != null && r !== n) return i.from(r, e, t);
                const o = P(n);
                if (o) return o;
                if (typeof Symbol < "u" && Symbol.toPrimitive != null && typeof n[Symbol.toPrimitive] == "function") return i.from(n[Symbol.toPrimitive]("string"), e, t);
                throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof n);
            }
            i.from = function(n, e, t) {
                return b(n, e, t);
            }, Object.setPrototypeOf(i.prototype, Uint8Array.prototype), Object.setPrototypeOf(i, Uint8Array);
            function I(n) {
                if (typeof n != "number") throw new TypeError('"size" argument must be of type number');
                if (n < 0) throw new RangeError('The value "' + n + '" is invalid for option "size"');
            }
            function _(n, e, t) {
                return I(n), n <= 0 ? d(n) : e !== void 0 ? typeof t == "string" ? d(n).fill(e, t) : d(n).fill(e) : d(n);
            }
            i.alloc = function(n, e, t) {
                return _(n, e, t);
            };
            function w(n) {
                return I(n), d(n < 0 ? 0 : U(n) | 0);
            }
            i.allocUnsafe = function(n) {
                return w(n);
            }, i.allocUnsafeSlow = function(n) {
                return w(n);
            };
            function F(n, e) {
                if ((typeof e != "string" || e === "") && (e = "utf8"), !i.isEncoding(e)) throw new TypeError("Unknown encoding: " + e);
                const t = R(n, e) | 0;
                let r = d(t);
                const o = r.write(n, e);
                return o !== t && (r = r.slice(0, o)), r;
            }
            function h(n) {
                const e = n.length < 0 ? 0 : U(n.length) | 0, t = d(e);
                for(let r = 0; r < e; r += 1)t[r] = n[r] & 255;
                return t;
            }
            function k(n) {
                if (ie(n, Uint8Array)) {
                    const e = new Uint8Array(n);
                    return S(e.buffer, e.byteOffset, e.byteLength);
                }
                return h(n);
            }
            function S(n, e, t) {
                if (e < 0 || n.byteLength < e) throw new RangeError('"offset" is outside of buffer bounds');
                if (n.byteLength < e + (t || 0)) throw new RangeError('"length" is outside of buffer bounds');
                let r;
                return e === void 0 && t === void 0 ? r = new Uint8Array(n) : t === void 0 ? r = new Uint8Array(n, e) : r = new Uint8Array(n, e, t), Object.setPrototypeOf(r, i.prototype), r;
            }
            function P(n) {
                if (i.isBuffer(n)) {
                    const e = U(n.length) | 0, t = d(e);
                    return t.length === 0 || n.copy(t, 0, 0, e), t;
                }
                if (n.length !== void 0) return typeof n.length != "number" || Te(n.length) ? d(0) : h(n);
                if (n.type === "Buffer" && Array.isArray(n.data)) return h(n.data);
            }
            function U(n) {
                if (n >= m) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + m.toString(16) + " bytes");
                return n | 0;
            }
            function x(n) {
                return +n != n && (n = 0), i.alloc(+n);
            }
            i.isBuffer = function(e) {
                return e != null && e._isBuffer === !0 && e !== i.prototype;
            }, i.compare = function(e, t) {
                if (ie(e, Uint8Array) && (e = i.from(e, e.offset, e.byteLength)), ie(t, Uint8Array) && (t = i.from(t, t.offset, t.byteLength)), !i.isBuffer(e) || !i.isBuffer(t)) throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
                if (e === t) return 0;
                let r = e.length, o = t.length;
                for(let l = 0, s = Math.min(r, o); l < s; ++l)if (e[l] !== t[l]) {
                    r = e[l], o = t[l];
                    break;
                }
                return r < o ? -1 : o < r ? 1 : 0;
            }, i.isEncoding = function(e) {
                switch(String(e).toLowerCase()){
                    case "hex":
                    case "utf8":
                    case "utf-8":
                    case "ascii":
                    case "latin1":
                    case "binary":
                    case "base64":
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return !0;
                    default:
                        return !1;
                }
            }, i.concat = function(e, t) {
                if (!Array.isArray(e)) throw new TypeError('"list" argument must be an Array of Buffers');
                if (e.length === 0) return i.alloc(0);
                let r;
                if (t === void 0) for(t = 0, r = 0; r < e.length; ++r)t += e[r].length;
                const o = i.allocUnsafe(t);
                let l = 0;
                for(r = 0; r < e.length; ++r){
                    let s = e[r];
                    if (ie(s, Uint8Array)) l + s.length > o.length ? (i.isBuffer(s) || (s = i.from(s)), s.copy(o, l)) : Uint8Array.prototype.set.call(o, s, l);
                    else if (i.isBuffer(s)) s.copy(o, l);
                    else throw new TypeError('"list" argument must be an Array of Buffers');
                    l += s.length;
                }
                return o;
            };
            function R(n, e) {
                if (i.isBuffer(n)) return n.length;
                if (ArrayBuffer.isView(n) || ie(n, ArrayBuffer)) return n.byteLength;
                if (typeof n != "string") throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof n);
                const t = n.length, r = arguments.length > 2 && arguments[2] === !0;
                if (!r && t === 0) return 0;
                let o = !1;
                for(;;)switch(e){
                    case "ascii":
                    case "latin1":
                    case "binary":
                        return t;
                    case "utf8":
                    case "utf-8":
                        return Se(n).length;
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return t * 2;
                    case "hex":
                        return t >>> 1;
                    case "base64":
                        return Je(n).length;
                    default:
                        if (o) return r ? -1 : Se(n).length;
                        e = ("" + e).toLowerCase(), o = !0;
                }
            }
            i.byteLength = R;
            function $(n, e, t) {
                let r = !1;
                if ((e === void 0 || e < 0) && (e = 0), e > this.length || ((t === void 0 || t > this.length) && (t = this.length), t <= 0) || (t >>>= 0, e >>>= 0, t <= e)) return "";
                for(n || (n = "utf8");;)switch(n){
                    case "hex":
                        return _e(this, e, t);
                    case "utf8":
                    case "utf-8":
                        return C(this, e, t);
                    case "ascii":
                        return X(this, e, t);
                    case "latin1":
                    case "binary":
                        return de(this, e, t);
                    case "base64":
                        return y(this, e, t);
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return Le(this, e, t);
                    default:
                        if (r) throw new TypeError("Unknown encoding: " + n);
                        n = (n + "").toLowerCase(), r = !0;
                }
            }
            i.prototype._isBuffer = !0;
            function T(n, e, t) {
                const r = n[e];
                n[e] = n[t], n[t] = r;
            }
            i.prototype.swap16 = function() {
                const e = this.length;
                if (e % 2 !== 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
                for(let t = 0; t < e; t += 2)T(this, t, t + 1);
                return this;
            }, i.prototype.swap32 = function() {
                const e = this.length;
                if (e % 4 !== 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
                for(let t = 0; t < e; t += 4)T(this, t, t + 3), T(this, t + 1, t + 2);
                return this;
            }, i.prototype.swap64 = function() {
                const e = this.length;
                if (e % 8 !== 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
                for(let t = 0; t < e; t += 8)T(this, t, t + 7), T(this, t + 1, t + 6), T(this, t + 2, t + 5), T(this, t + 3, t + 4);
                return this;
            }, i.prototype.toString = function() {
                const e = this.length;
                return e === 0 ? "" : arguments.length === 0 ? C(this, 0, e) : $.apply(this, arguments);
            }, i.prototype.toLocaleString = i.prototype.toString, i.prototype.equals = function(e) {
                if (!i.isBuffer(e)) throw new TypeError("Argument must be a Buffer");
                return this === e ? !0 : i.compare(this, e) === 0;
            }, i.prototype.inspect = function() {
                let e = "";
                const t = f.INSPECT_MAX_BYTES;
                return e = this.toString("hex", 0, t).replace(/(.{2})/g, "$1 ").trim(), this.length > t && (e += " ... "), "<Buffer " + e + ">";
            }, p && (i.prototype[p] = i.prototype.inspect), i.prototype.compare = function(e, t, r, o, l) {
                if (ie(e, Uint8Array) && (e = i.from(e, e.offset, e.byteLength)), !i.isBuffer(e)) throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof e);
                if (t === void 0 && (t = 0), r === void 0 && (r = e ? e.length : 0), o === void 0 && (o = 0), l === void 0 && (l = this.length), t < 0 || r > e.length || o < 0 || l > this.length) throw new RangeError("out of range index");
                if (o >= l && t >= r) return 0;
                if (o >= l) return -1;
                if (t >= r) return 1;
                if (t >>>= 0, r >>>= 0, o >>>= 0, l >>>= 0, this === e) return 0;
                let s = l - o, M = r - t;
                const H = Math.min(s, M), V = this.slice(o, l), G = e.slice(t, r);
                for(let z = 0; z < H; ++z)if (V[z] !== G[z]) {
                    s = V[z], M = G[z];
                    break;
                }
                return s < M ? -1 : M < s ? 1 : 0;
            };
            function Z(n, e, t, r, o) {
                if (n.length === 0) return -1;
                if (typeof t == "string" ? (r = t, t = 0) : t > 2147483647 ? t = 2147483647 : t < -2147483648 && (t = -2147483648), t = +t, Te(t) && (t = o ? 0 : n.length - 1), t < 0 && (t = n.length + t), t >= n.length) {
                    if (o) return -1;
                    t = n.length - 1;
                } else if (t < 0) if (o) t = 0;
                else return -1;
                if (typeof e == "string" && (e = i.from(e, r)), i.isBuffer(e)) return e.length === 0 ? -1 : re(n, e, t, r, o);
                if (typeof e == "number") return e = e & 255, typeof Uint8Array.prototype.indexOf == "function" ? o ? Uint8Array.prototype.indexOf.call(n, e, t) : Uint8Array.prototype.lastIndexOf.call(n, e, t) : re(n, [
                    e
                ], t, r, o);
                throw new TypeError("val must be string, number or Buffer");
            }
            function re(n, e, t, r, o) {
                let l = 1, s = n.length, M = e.length;
                if (r !== void 0 && (r = String(r).toLowerCase(), r === "ucs2" || r === "ucs-2" || r === "utf16le" || r === "utf-16le")) {
                    if (n.length < 2 || e.length < 2) return -1;
                    l = 2, s /= 2, M /= 2, t /= 2;
                }
                function H(G, z) {
                    return l === 1 ? G[z] : G.readUInt16BE(z * l);
                }
                let V;
                if (o) {
                    let G = -1;
                    for(V = t; V < s; V++)if (H(n, V) === H(e, G === -1 ? 0 : V - G)) {
                        if (G === -1 && (G = V), V - G + 1 === M) return G * l;
                    } else G !== -1 && (V -= V - G), G = -1;
                } else for(t + M > s && (t = s - M), V = t; V >= 0; V--){
                    let G = !0;
                    for(let z = 0; z < M; z++)if (H(n, V + z) !== H(e, z)) {
                        G = !1;
                        break;
                    }
                    if (G) return V;
                }
                return -1;
            }
            i.prototype.includes = function(e, t, r) {
                return this.indexOf(e, t, r) !== -1;
            }, i.prototype.indexOf = function(e, t, r) {
                return Z(this, e, t, r, !0);
            }, i.prototype.lastIndexOf = function(e, t, r) {
                return Z(this, e, t, r, !1);
            };
            function D(n, e, t, r) {
                t = Number(t) || 0;
                const o = n.length - t;
                r ? (r = Number(r), r > o && (r = o)) : r = o;
                const l = e.length;
                r > l / 2 && (r = l / 2);
                let s;
                for(s = 0; s < r; ++s){
                    const M = parseInt(e.substr(s * 2, 2), 16);
                    if (Te(M)) return s;
                    n[t + s] = M;
                }
                return s;
            }
            function B(n, e, t, r) {
                return we(Se(e, n.length - t), n, t, r);
            }
            function A(n, e, t, r) {
                return we(pt(e), n, t, r);
            }
            function g(n, e, t, r) {
                return we(Je(e), n, t, r);
            }
            function c(n, e, t, r) {
                return we(dt(e, n.length - t), n, t, r);
            }
            i.prototype.write = function(e, t, r, o) {
                if (t === void 0) o = "utf8", r = this.length, t = 0;
                else if (r === void 0 && typeof t == "string") o = t, r = this.length, t = 0;
                else if (isFinite(t)) t = t >>> 0, isFinite(r) ? (r = r >>> 0, o === void 0 && (o = "utf8")) : (o = r, r = void 0);
                else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                const l = this.length - t;
                if ((r === void 0 || r > l) && (r = l), e.length > 0 && (r < 0 || t < 0) || t > this.length) throw new RangeError("Attempt to write outside buffer bounds");
                o || (o = "utf8");
                let s = !1;
                for(;;)switch(o){
                    case "hex":
                        return D(this, e, t, r);
                    case "utf8":
                    case "utf-8":
                        return B(this, e, t, r);
                    case "ascii":
                    case "latin1":
                    case "binary":
                        return A(this, e, t, r);
                    case "base64":
                        return g(this, e, t, r);
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return c(this, e, t, r);
                    default:
                        if (s) throw new TypeError("Unknown encoding: " + o);
                        o = ("" + o).toLowerCase(), s = !0;
                }
            }, i.prototype.toJSON = function() {
                return {
                    type: "Buffer",
                    data: Array.prototype.slice.call(this._arr || this, 0)
                };
            };
            function y(n, e, t) {
                return e === 0 && t === n.length ? a.fromByteArray(n) : a.fromByteArray(n.slice(e, t));
            }
            function C(n, e, t) {
                t = Math.min(n.length, t);
                const r = [];
                let o = e;
                for(; o < t;){
                    const l = n[o];
                    let s = null, M = l > 239 ? 4 : l > 223 ? 3 : l > 191 ? 2 : 1;
                    if (o + M <= t) {
                        let H, V, G, z;
                        switch(M){
                            case 1:
                                l < 128 && (s = l);
                                break;
                            case 2:
                                H = n[o + 1], (H & 192) === 128 && (z = (l & 31) << 6 | H & 63, z > 127 && (s = z));
                                break;
                            case 3:
                                H = n[o + 1], V = n[o + 2], (H & 192) === 128 && (V & 192) === 128 && (z = (l & 15) << 12 | (H & 63) << 6 | V & 63, z > 2047 && (z < 55296 || z > 57343) && (s = z));
                                break;
                            case 4:
                                H = n[o + 1], V = n[o + 2], G = n[o + 3], (H & 192) === 128 && (V & 192) === 128 && (G & 192) === 128 && (z = (l & 15) << 18 | (H & 63) << 12 | (V & 63) << 6 | G & 63, z > 65535 && z < 1114112 && (s = z));
                        }
                    }
                    s === null ? (s = 65533, M = 1) : s > 65535 && (s -= 65536, r.push(s >>> 10 & 1023 | 55296), s = 56320 | s & 1023), r.push(s), o += M;
                }
                return q(r);
            }
            const O = 4096;
            function q(n) {
                const e = n.length;
                if (e <= O) return String.fromCharCode.apply(String, n);
                let t = "", r = 0;
                for(; r < e;)t += String.fromCharCode.apply(String, n.slice(r, r += O));
                return t;
            }
            function X(n, e, t) {
                let r = "";
                t = Math.min(n.length, t);
                for(let o = e; o < t; ++o)r += String.fromCharCode(n[o] & 127);
                return r;
            }
            function de(n, e, t) {
                let r = "";
                t = Math.min(n.length, t);
                for(let o = e; o < t; ++o)r += String.fromCharCode(n[o]);
                return r;
            }
            function _e(n, e, t) {
                const r = n.length;
                (!e || e < 0) && (e = 0), (!t || t < 0 || t > r) && (t = r);
                let o = "";
                for(let l = e; l < t; ++l)o += ht[n[l]];
                return o;
            }
            function Le(n, e, t) {
                const r = n.slice(e, t);
                let o = "";
                for(let l = 0; l < r.length - 1; l += 2)o += String.fromCharCode(r[l] + r[l + 1] * 256);
                return o;
            }
            i.prototype.slice = function(e, t) {
                const r = this.length;
                e = ~~e, t = t === void 0 ? r : ~~t, e < 0 ? (e += r, e < 0 && (e = 0)) : e > r && (e = r), t < 0 ? (t += r, t < 0 && (t = 0)) : t > r && (t = r), t < e && (t = e);
                const o = this.subarray(e, t);
                return Object.setPrototypeOf(o, i.prototype), o;
            };
            function W(n, e, t) {
                if (n % 1 !== 0 || n < 0) throw new RangeError("offset is not uint");
                if (n + e > t) throw new RangeError("Trying to access beyond buffer length");
            }
            i.prototype.readUintLE = i.prototype.readUIntLE = function(e, t, r) {
                e = e >>> 0, t = t >>> 0, r || W(e, t, this.length);
                let o = this[e], l = 1, s = 0;
                for(; ++s < t && (l *= 256);)o += this[e + s] * l;
                return o;
            }, i.prototype.readUintBE = i.prototype.readUIntBE = function(e, t, r) {
                e = e >>> 0, t = t >>> 0, r || W(e, t, this.length);
                let o = this[e + --t], l = 1;
                for(; t > 0 && (l *= 256);)o += this[e + --t] * l;
                return o;
            }, i.prototype.readUint8 = i.prototype.readUInt8 = function(e, t) {
                return e = e >>> 0, t || W(e, 1, this.length), this[e];
            }, i.prototype.readUint16LE = i.prototype.readUInt16LE = function(e, t) {
                return e = e >>> 0, t || W(e, 2, this.length), this[e] | this[e + 1] << 8;
            }, i.prototype.readUint16BE = i.prototype.readUInt16BE = function(e, t) {
                return e = e >>> 0, t || W(e, 2, this.length), this[e] << 8 | this[e + 1];
            }, i.prototype.readUint32LE = i.prototype.readUInt32LE = function(e, t) {
                return e = e >>> 0, t || W(e, 4, this.length), (this[e] | this[e + 1] << 8 | this[e + 2] << 16) + this[e + 3] * 16777216;
            }, i.prototype.readUint32BE = i.prototype.readUInt32BE = function(e, t) {
                return e = e >>> 0, t || W(e, 4, this.length), this[e] * 16777216 + (this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3]);
            }, i.prototype.readBigUInt64LE = se(function(e) {
                e = e >>> 0, fe(e, "offset");
                const t = this[e], r = this[e + 7];
                (t === void 0 || r === void 0) && he(e, this.length - 8);
                const o = t + this[++e] * 2 ** 8 + this[++e] * 2 ** 16 + this[++e] * 2 ** 24, l = this[++e] + this[++e] * 2 ** 8 + this[++e] * 2 ** 16 + r * 2 ** 24;
                return BigInt(o) + (BigInt(l) << BigInt(32));
            }), i.prototype.readBigUInt64BE = se(function(e) {
                e = e >>> 0, fe(e, "offset");
                const t = this[e], r = this[e + 7];
                (t === void 0 || r === void 0) && he(e, this.length - 8);
                const o = t * 2 ** 24 + this[++e] * 2 ** 16 + this[++e] * 2 ** 8 + this[++e], l = this[++e] * 2 ** 24 + this[++e] * 2 ** 16 + this[++e] * 2 ** 8 + r;
                return (BigInt(o) << BigInt(32)) + BigInt(l);
            }), i.prototype.readIntLE = function(e, t, r) {
                e = e >>> 0, t = t >>> 0, r || W(e, t, this.length);
                let o = this[e], l = 1, s = 0;
                for(; ++s < t && (l *= 256);)o += this[e + s] * l;
                return l *= 128, o >= l && (o -= Math.pow(2, 8 * t)), o;
            }, i.prototype.readIntBE = function(e, t, r) {
                e = e >>> 0, t = t >>> 0, r || W(e, t, this.length);
                let o = t, l = 1, s = this[e + --o];
                for(; o > 0 && (l *= 256);)s += this[e + --o] * l;
                return l *= 128, s >= l && (s -= Math.pow(2, 8 * t)), s;
            }, i.prototype.readInt8 = function(e, t) {
                return e = e >>> 0, t || W(e, 1, this.length), this[e] & 128 ? (255 - this[e] + 1) * -1 : this[e];
            }, i.prototype.readInt16LE = function(e, t) {
                e = e >>> 0, t || W(e, 2, this.length);
                const r = this[e] | this[e + 1] << 8;
                return r & 32768 ? r | 4294901760 : r;
            }, i.prototype.readInt16BE = function(e, t) {
                e = e >>> 0, t || W(e, 2, this.length);
                const r = this[e + 1] | this[e] << 8;
                return r & 32768 ? r | 4294901760 : r;
            }, i.prototype.readInt32LE = function(e, t) {
                return e = e >>> 0, t || W(e, 4, this.length), this[e] | this[e + 1] << 8 | this[e + 2] << 16 | this[e + 3] << 24;
            }, i.prototype.readInt32BE = function(e, t) {
                return e = e >>> 0, t || W(e, 4, this.length), this[e] << 24 | this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3];
            }, i.prototype.readBigInt64LE = se(function(e) {
                e = e >>> 0, fe(e, "offset");
                const t = this[e], r = this[e + 7];
                (t === void 0 || r === void 0) && he(e, this.length - 8);
                const o = this[e + 4] + this[e + 5] * 2 ** 8 + this[e + 6] * 2 ** 16 + (r << 24);
                return (BigInt(o) << BigInt(32)) + BigInt(t + this[++e] * 2 ** 8 + this[++e] * 2 ** 16 + this[++e] * 2 ** 24);
            }), i.prototype.readBigInt64BE = se(function(e) {
                e = e >>> 0, fe(e, "offset");
                const t = this[e], r = this[e + 7];
                (t === void 0 || r === void 0) && he(e, this.length - 8);
                const o = (t << 24) + this[++e] * 2 ** 16 + this[++e] * 2 ** 8 + this[++e];
                return (BigInt(o) << BigInt(32)) + BigInt(this[++e] * 2 ** 24 + this[++e] * 2 ** 16 + this[++e] * 2 ** 8 + r);
            }), i.prototype.readFloatLE = function(e, t) {
                return e = e >>> 0, t || W(e, 4, this.length), u.read(this, e, !0, 23, 4);
            }, i.prototype.readFloatBE = function(e, t) {
                return e = e >>> 0, t || W(e, 4, this.length), u.read(this, e, !1, 23, 4);
            }, i.prototype.readDoubleLE = function(e, t) {
                return e = e >>> 0, t || W(e, 8, this.length), u.read(this, e, !0, 52, 8);
            }, i.prototype.readDoubleBE = function(e, t) {
                return e = e >>> 0, t || W(e, 8, this.length), u.read(this, e, !1, 52, 8);
            };
            function te(n, e, t, r, o, l) {
                if (!i.isBuffer(n)) throw new TypeError('"buffer" argument must be a Buffer instance');
                if (e > o || e < l) throw new RangeError('"value" argument is out of bounds');
                if (t + r > n.length) throw new RangeError("Index out of range");
            }
            i.prototype.writeUintLE = i.prototype.writeUIntLE = function(e, t, r, o) {
                if (e = +e, t = t >>> 0, r = r >>> 0, !o) {
                    const M = Math.pow(2, 8 * r) - 1;
                    te(this, e, t, r, M, 0);
                }
                let l = 1, s = 0;
                for(this[t] = e & 255; ++s < r && (l *= 256);)this[t + s] = e / l & 255;
                return t + r;
            }, i.prototype.writeUintBE = i.prototype.writeUIntBE = function(e, t, r, o) {
                if (e = +e, t = t >>> 0, r = r >>> 0, !o) {
                    const M = Math.pow(2, 8 * r) - 1;
                    te(this, e, t, r, M, 0);
                }
                let l = r - 1, s = 1;
                for(this[t + l] = e & 255; --l >= 0 && (s *= 256);)this[t + l] = e / s & 255;
                return t + r;
            }, i.prototype.writeUint8 = i.prototype.writeUInt8 = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 1, 255, 0), this[t] = e & 255, t + 1;
            }, i.prototype.writeUint16LE = i.prototype.writeUInt16LE = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 2, 65535, 0), this[t] = e & 255, this[t + 1] = e >>> 8, t + 2;
            }, i.prototype.writeUint16BE = i.prototype.writeUInt16BE = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 2, 65535, 0), this[t] = e >>> 8, this[t + 1] = e & 255, t + 2;
            }, i.prototype.writeUint32LE = i.prototype.writeUInt32LE = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 4, 4294967295, 0), this[t + 3] = e >>> 24, this[t + 2] = e >>> 16, this[t + 1] = e >>> 8, this[t] = e & 255, t + 4;
            }, i.prototype.writeUint32BE = i.prototype.writeUInt32BE = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 4, 4294967295, 0), this[t] = e >>> 24, this[t + 1] = e >>> 16, this[t + 2] = e >>> 8, this[t + 3] = e & 255, t + 4;
            };
            function ze(n, e, t, r, o) {
                Xe(e, r, o, n, t, 7);
                let l = Number(e & BigInt(4294967295));
                n[t++] = l, l = l >> 8, n[t++] = l, l = l >> 8, n[t++] = l, l = l >> 8, n[t++] = l;
                let s = Number(e >> BigInt(32) & BigInt(4294967295));
                return n[t++] = s, s = s >> 8, n[t++] = s, s = s >> 8, n[t++] = s, s = s >> 8, n[t++] = s, t;
            }
            function qe(n, e, t, r, o) {
                Xe(e, r, o, n, t, 7);
                let l = Number(e & BigInt(4294967295));
                n[t + 7] = l, l = l >> 8, n[t + 6] = l, l = l >> 8, n[t + 5] = l, l = l >> 8, n[t + 4] = l;
                let s = Number(e >> BigInt(32) & BigInt(4294967295));
                return n[t + 3] = s, s = s >> 8, n[t + 2] = s, s = s >> 8, n[t + 1] = s, s = s >> 8, n[t] = s, t + 8;
            }
            i.prototype.writeBigUInt64LE = se(function(e, t = 0) {
                return ze(this, e, t, BigInt(0), BigInt("0xffffffffffffffff"));
            }), i.prototype.writeBigUInt64BE = se(function(e, t = 0) {
                return qe(this, e, t, BigInt(0), BigInt("0xffffffffffffffff"));
            }), i.prototype.writeIntLE = function(e, t, r, o) {
                if (e = +e, t = t >>> 0, !o) {
                    const H = Math.pow(2, 8 * r - 1);
                    te(this, e, t, r, H - 1, -H);
                }
                let l = 0, s = 1, M = 0;
                for(this[t] = e & 255; ++l < r && (s *= 256);)e < 0 && M === 0 && this[t + l - 1] !== 0 && (M = 1), this[t + l] = (e / s >> 0) - M & 255;
                return t + r;
            }, i.prototype.writeIntBE = function(e, t, r, o) {
                if (e = +e, t = t >>> 0, !o) {
                    const H = Math.pow(2, 8 * r - 1);
                    te(this, e, t, r, H - 1, -H);
                }
                let l = r - 1, s = 1, M = 0;
                for(this[t + l] = e & 255; --l >= 0 && (s *= 256);)e < 0 && M === 0 && this[t + l + 1] !== 0 && (M = 1), this[t + l] = (e / s >> 0) - M & 255;
                return t + r;
            }, i.prototype.writeInt8 = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 1, 127, -128), e < 0 && (e = 255 + e + 1), this[t] = e & 255, t + 1;
            }, i.prototype.writeInt16LE = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 2, 32767, -32768), this[t] = e & 255, this[t + 1] = e >>> 8, t + 2;
            }, i.prototype.writeInt16BE = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 2, 32767, -32768), this[t] = e >>> 8, this[t + 1] = e & 255, t + 2;
            }, i.prototype.writeInt32LE = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 4, 2147483647, -2147483648), this[t] = e & 255, this[t + 1] = e >>> 8, this[t + 2] = e >>> 16, this[t + 3] = e >>> 24, t + 4;
            }, i.prototype.writeInt32BE = function(e, t, r) {
                return e = +e, t = t >>> 0, r || te(this, e, t, 4, 2147483647, -2147483648), e < 0 && (e = 4294967295 + e + 1), this[t] = e >>> 24, this[t + 1] = e >>> 16, this[t + 2] = e >>> 8, this[t + 3] = e & 255, t + 4;
            }, i.prototype.writeBigInt64LE = se(function(e, t = 0) {
                return ze(this, e, t, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
            }), i.prototype.writeBigInt64BE = se(function(e, t = 0) {
                return qe(this, e, t, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
            });
            function Ve(n, e, t, r, o, l) {
                if (t + r > n.length) throw new RangeError("Index out of range");
                if (t < 0) throw new RangeError("Index out of range");
            }
            function je(n, e, t, r, o) {
                return e = +e, t = t >>> 0, o || Ve(n, e, t, 4), u.write(n, e, t, r, 23, 4), t + 4;
            }
            i.prototype.writeFloatLE = function(e, t, r) {
                return je(this, e, t, !0, r);
            }, i.prototype.writeFloatBE = function(e, t, r) {
                return je(this, e, t, !1, r);
            };
            function He(n, e, t, r, o) {
                return e = +e, t = t >>> 0, o || Ve(n, e, t, 8), u.write(n, e, t, r, 52, 8), t + 8;
            }
            i.prototype.writeDoubleLE = function(e, t, r) {
                return He(this, e, t, !0, r);
            }, i.prototype.writeDoubleBE = function(e, t, r) {
                return He(this, e, t, !1, r);
            }, i.prototype.copy = function(e, t, r, o) {
                if (!i.isBuffer(e)) throw new TypeError("argument should be a Buffer");
                if (r || (r = 0), !o && o !== 0 && (o = this.length), t >= e.length && (t = e.length), t || (t = 0), o > 0 && o < r && (o = r), o === r || e.length === 0 || this.length === 0) return 0;
                if (t < 0) throw new RangeError("targetStart out of bounds");
                if (r < 0 || r >= this.length) throw new RangeError("Index out of range");
                if (o < 0) throw new RangeError("sourceEnd out of bounds");
                o > this.length && (o = this.length), e.length - t < o - r && (o = e.length - t + r);
                const l = o - r;
                return this === e && typeof Uint8Array.prototype.copyWithin == "function" ? this.copyWithin(t, r, o) : Uint8Array.prototype.set.call(e, this.subarray(r, o), t), l;
            }, i.prototype.fill = function(e, t, r, o) {
                if (typeof e == "string") {
                    if (typeof t == "string" ? (o = t, t = 0, r = this.length) : typeof r == "string" && (o = r, r = this.length), o !== void 0 && typeof o != "string") throw new TypeError("encoding must be a string");
                    if (typeof o == "string" && !i.isEncoding(o)) throw new TypeError("Unknown encoding: " + o);
                    if (e.length === 1) {
                        const s = e.charCodeAt(0);
                        (o === "utf8" && s < 128 || o === "latin1") && (e = s);
                    }
                } else typeof e == "number" ? e = e & 255 : typeof e == "boolean" && (e = Number(e));
                if (t < 0 || this.length < t || this.length < r) throw new RangeError("Out of range index");
                if (r <= t) return this;
                t = t >>> 0, r = r === void 0 ? this.length : r >>> 0, e || (e = 0);
                let l;
                if (typeof e == "number") for(l = t; l < r; ++l)this[l] = e;
                else {
                    const s = i.isBuffer(e) ? e : i.from(e, o), M = s.length;
                    if (M === 0) throw new TypeError('The value "' + e + '" is invalid for argument "value"');
                    for(l = 0; l < r - t; ++l)this[l + t] = s[l % M];
                }
                return this;
            };
            const ce = {};
            function Fe(n, e, t) {
                ce[n] = class extends t {
                    constructor(){
                        super(), Object.defineProperty(this, "message", {
                            value: e.apply(this, arguments),
                            writable: !0,
                            configurable: !0
                        }), this.name = `${this.name} [${n}]`, this.stack, delete this.name;
                    }
                    get code() {
                        return n;
                    }
                    set code(o) {
                        Object.defineProperty(this, "code", {
                            configurable: !0,
                            enumerable: !0,
                            value: o,
                            writable: !0
                        });
                    }
                    toString() {
                        return `${this.name} [${n}]: ${this.message}`;
                    }
                };
            }
            Fe("ERR_BUFFER_OUT_OF_BOUNDS", function(n) {
                return n ? `${n} is outside of buffer bounds` : "Attempt to access memory outside buffer bounds";
            }, RangeError), Fe("ERR_INVALID_ARG_TYPE", function(n, e) {
                return `The "${n}" argument must be of type number. Received type ${typeof e}`;
            }, TypeError), Fe("ERR_OUT_OF_RANGE", function(n, e, t) {
                let r = `The value of "${n}" is out of range.`, o = t;
                return Number.isInteger(t) && Math.abs(t) > 2 ** 32 ? o = Ge(String(t)) : typeof t == "bigint" && (o = String(t), (t > BigInt(2) ** BigInt(32) || t < -(BigInt(2) ** BigInt(32))) && (o = Ge(o)), o += "n"), r += ` It must be ${e}. Received ${o}`, r;
            }, RangeError);
            function Ge(n) {
                let e = "", t = n.length;
                const r = n[0] === "-" ? 1 : 0;
                for(; t >= r + 4; t -= 3)e = `_${n.slice(t - 3, t)}${e}`;
                return `${n.slice(0, t)}${e}`;
            }
            function ut(n, e, t) {
                fe(e, "offset"), (n[e] === void 0 || n[e + t] === void 0) && he(e, n.length - (t + 1));
            }
            function Xe(n, e, t, r, o, l) {
                if (n > t || n < e) {
                    const s = typeof e == "bigint" ? "n" : "";
                    let M;
                    throw e === 0 || e === BigInt(0) ? M = `>= 0${s} and < 2${s} ** ${(l + 1) * 8}${s}` : M = `>= -(2${s} ** ${(l + 1) * 8 - 1}${s}) and < 2 ** ${(l + 1) * 8 - 1}${s}`, new ce.ERR_OUT_OF_RANGE("value", M, n);
                }
                ut(r, o, l);
            }
            function fe(n, e) {
                if (typeof n != "number") throw new ce.ERR_INVALID_ARG_TYPE(e, "number", n);
            }
            function he(n, e, t) {
                throw Math.floor(n) !== n ? (fe(n, t), new ce.ERR_OUT_OF_RANGE("offset", "an integer", n)) : e < 0 ? new ce.ERR_BUFFER_OUT_OF_BOUNDS : new ce.ERR_OUT_OF_RANGE("offset", `>= 0 and <= ${e}`, n);
            }
            const ct = /[^+/0-9A-Za-z-_]/g;
            function ft(n) {
                if (n = n.split("=")[0], n = n.trim().replace(ct, ""), n.length < 2) return "";
                for(; n.length % 4 !== 0;)n = n + "=";
                return n;
            }
            function Se(n, e) {
                e = e || 1 / 0;
                let t;
                const r = n.length;
                let o = null;
                const l = [];
                for(let s = 0; s < r; ++s){
                    if (t = n.charCodeAt(s), t > 55295 && t < 57344) {
                        if (!o) {
                            if (t > 56319) {
                                (e -= 3) > -1 && l.push(239, 191, 189);
                                continue;
                            } else if (s + 1 === r) {
                                (e -= 3) > -1 && l.push(239, 191, 189);
                                continue;
                            }
                            o = t;
                            continue;
                        }
                        if (t < 56320) {
                            (e -= 3) > -1 && l.push(239, 191, 189), o = t;
                            continue;
                        }
                        t = (o - 55296 << 10 | t - 56320) + 65536;
                    } else o && (e -= 3) > -1 && l.push(239, 191, 189);
                    if (o = null, t < 128) {
                        if ((e -= 1) < 0) break;
                        l.push(t);
                    } else if (t < 2048) {
                        if ((e -= 2) < 0) break;
                        l.push(t >> 6 | 192, t & 63 | 128);
                    } else if (t < 65536) {
                        if ((e -= 3) < 0) break;
                        l.push(t >> 12 | 224, t >> 6 & 63 | 128, t & 63 | 128);
                    } else if (t < 1114112) {
                        if ((e -= 4) < 0) break;
                        l.push(t >> 18 | 240, t >> 12 & 63 | 128, t >> 6 & 63 | 128, t & 63 | 128);
                    } else throw new Error("Invalid code point");
                }
                return l;
            }
            function pt(n) {
                const e = [];
                for(let t = 0; t < n.length; ++t)e.push(n.charCodeAt(t) & 255);
                return e;
            }
            function dt(n, e) {
                let t, r, o;
                const l = [];
                for(let s = 0; s < n.length && !((e -= 2) < 0); ++s)t = n.charCodeAt(s), r = t >> 8, o = t % 256, l.push(o), l.push(r);
                return l;
            }
            function Je(n) {
                return a.toByteArray(ft(n));
            }
            function we(n, e, t, r) {
                let o;
                for(o = 0; o < r && !(o + t >= e.length || o >= n.length); ++o)e[o + t] = n[o];
                return o;
            }
            function ie(n, e) {
                return n instanceof e || n != null && n.constructor != null && n.constructor.name != null && n.constructor.name === e.name;
            }
            function Te(n) {
                return n !== n;
            }
            const ht = (function() {
                const n = "0123456789abcdef", e = new Array(256);
                for(let t = 0; t < 16; ++t){
                    const r = t * 16;
                    for(let o = 0; o < 16; ++o)e[r + o] = n[t] + n[o];
                }
                return e;
            })();
            function se(n) {
                return typeof BigInt > "u" ? yt : n;
            }
            function yt() {
                throw new Error("BigInt not supported");
            }
        })(Me)), Me;
    }
    var tt;
    function e0() {
        return tt || (tt = 1, (function(f, a) {
            var u = Kt(), p = u.Buffer;
            function m(d, i) {
                for(var b in d)i[b] = d[b];
            }
            p.from && p.alloc && p.allocUnsafe && p.allocUnsafeSlow ? f.exports = u : (m(u, a), a.Buffer = v);
            function v(d, i, b) {
                return p(d, i, b);
            }
            v.prototype = Object.create(p.prototype), m(p, v), v.from = function(d, i, b) {
                if (typeof d == "number") throw new TypeError("Argument must not be a number");
                return p(d, i, b);
            }, v.alloc = function(d, i, b) {
                if (typeof d != "number") throw new TypeError("Argument must be a number");
                var I = p(d);
                return i !== void 0 ? typeof b == "string" ? I.fill(i, b) : I.fill(i) : I.fill(0), I;
            }, v.allocUnsafe = function(d) {
                if (typeof d != "number") throw new TypeError("Argument must be a number");
                return p(d);
            }, v.allocUnsafeSlow = function(d) {
                if (typeof d != "number") throw new TypeError("Argument must be a number");
                return u.SlowBuffer(d);
            };
        })(ve, ve.exports)), ve.exports;
    }
    var nt;
    function t0() {
        if (nt) return ge.exports;
        nt = 1, ge.exports = h, ge.exports.parse = x;
        var f = Dt().basename, a = e0().Buffer, u = /[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g, p = /%[0-9A-Fa-f]{2}/, m = /%([0-9A-Fa-f]{2})/g, v = /[^\x20-\x7e\xa0-\xff]/g, d = /\\([\u0000-\u007f])/g, i = /([\\"])/g, b = /;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g, I = /^[\x20-\x7e\x80-\xff]+$/, _ = /^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/, w = /^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/, F = /^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;
        function h(D, B) {
            var A = B || {}, g = A.type || "attachment", c = k(D, A.fallback);
            return S(new re(g, c));
        }
        function k(D, B) {
            if (D !== void 0) {
                var A = {};
                if (typeof D != "string") throw new TypeError("filename must be a string");
                if (B === void 0 && (B = !0), typeof B != "string" && typeof B != "boolean") throw new TypeError("fallback must be a string or boolean");
                if (typeof B == "string" && v.test(B)) throw new TypeError("fallback must be ISO-8859-1 string");
                var g = f(D), c = I.test(g), y = typeof B != "string" ? B && U(g) : f(B), C = typeof y == "string" && y !== g;
                return (C || !c || p.test(g)) && (A["filename*"] = g), (c || C) && (A.filename = C ? y : g), A;
            }
        }
        function S(D) {
            var B = D.parameters, A = D.type;
            if (!A || typeof A != "string" || !_.test(A)) throw new TypeError("invalid type");
            var g = String(A).toLowerCase();
            if (B && typeof B == "object") for(var c, y = Object.keys(B).sort(), C = 0; C < y.length; C++){
                c = y[C];
                var O = c.substr(-1) === "*" ? Z(B[c]) : T(B[c]);
                g += "; " + c + "=" + O;
            }
            return g;
        }
        function P(D) {
            var B = w.exec(D);
            if (!B) throw new TypeError("invalid extended field value");
            var A = B[1].toLowerCase(), g = B[2], c, y = g.replace(m, R);
            switch(A){
                case "iso-8859-1":
                    c = U(y);
                    break;
                case "utf-8":
                    c = a.from(y, "binary").toString("utf8");
                    break;
                default:
                    throw new TypeError("unsupported charset in extended field");
            }
            return c;
        }
        function U(D) {
            return String(D).replace(v, "?");
        }
        function x(D) {
            if (!D || typeof D != "string") throw new TypeError("argument string is required");
            var B = F.exec(D);
            if (!B) throw new TypeError("invalid type format");
            var A = B[0].length, g = B[1].toLowerCase(), c, y = [], C = {}, O;
            for(A = b.lastIndex = B[0].substr(-1) === ";" ? A - 1 : A; B = b.exec(D);){
                if (B.index !== A) throw new TypeError("invalid parameter format");
                if (A += B[0].length, c = B[1].toLowerCase(), O = B[2], y.indexOf(c) !== -1) throw new TypeError("invalid duplicate parameter");
                if (y.push(c), c.indexOf("*") + 1 === c.length) {
                    c = c.slice(0, -1), O = P(O), C[c] = O;
                    continue;
                }
                typeof C[c] != "string" && (O[0] === '"' && (O = O.substr(1, O.length - 2).replace(d, "$1")), C[c] = O);
            }
            if (A !== -1 && A !== D.length) throw new TypeError("invalid parameter format");
            return new re(g, C);
        }
        function R(D, B) {
            return String.fromCharCode(parseInt(B, 16));
        }
        function $(D) {
            return "%" + String(D).charCodeAt(0).toString(16).toUpperCase();
        }
        function T(D) {
            var B = String(D);
            return '"' + B.replace(i, "\\$1") + '"';
        }
        function Z(D) {
            var B = String(D), A = encodeURIComponent(B).replace(u, $);
            return "UTF-8''" + A;
        }
        function re(D, B) {
            this.type = D, this.parameters = B;
        }
        return ge.exports;
    }
    var n0 = t0();
    let at, r0, o0, i0, l0, s0, a0, u0, c0, f0, p0, d0, h0, y0;
    at = Ot(n0);
    r0 = ue({
        __name: "OpenNotebookButton",
        props: {
            severity: {
                default: "info"
            }
        },
        emits: [
            "open-file"
        ],
        setup (f, { emit: a }) {
            const u = f, p = a, m = Q("show_toast"), v = j(null), d = j(null), i = ()=>{
                v.value.click();
            }, b = async (I)=>{
                const _ = I.target.files[0];
                if (_.size) /\.ipynb$/.test(_.name) || m({
                    title: "File not ipynb.",
                    detail: "Beaker will try to load as json.",
                    severity: "warn",
                    life: 4e3
                });
                else {
                    m({
                        title: "Error",
                        detail: "File looks empty. Check file.",
                        severity: "error",
                        life: 1e4
                    });
                    return;
                }
                const w = await _.arrayBuffer(), F = new TextDecoder().decode(w);
                try {
                    const h = JSON.parse(F);
                    p("open-file", h, _.name);
                } catch (h) {
                    console.error(h), m({
                        title: "Invalid File",
                        detail: "Unable to load. Please check file contains valid ipynb json data.",
                        severity: "error",
                        life: 1e4
                    });
                }
                d.value.reset();
            };
            return (I, _)=>{
                const w = Ae("tooltip");
                return J(), K(ot, null, [
                    ne(N(E(ee), {
                        onClick: i,
                        icon: "pi pi-folder-open",
                        size: "small",
                        severity: u.severity,
                        text: ""
                    }, null, 8, [
                        "severity"
                    ]), [
                        [
                            w,
                            {
                                value: "Open ipynb file",
                                showDelay: 300
                            },
                            void 0,
                            {
                                bottom: !0
                            }
                        ]
                    ]),
                    L("form", {
                        id: "open-file-form",
                        ref_key: "fileForm",
                        ref: d
                    }, [
                        L("input", {
                            onChange: b,
                            ref_key: "fileInput",
                            ref: v,
                            type: "file",
                            style: {
                                display: "none"
                            }
                        }, null, 544)
                    ], 512)
                ], 64);
            };
        }
    });
    o0 = {
        class: "streamline-dialog"
    };
    i0 = {
        class: "streamline-name"
    };
    l0 = {
        class: "streamline-options"
    };
    s0 = {
        key: 0,
        class: "indented-option"
    };
    a0 = {
        key: 1,
        class: "indented-option"
    };
    u0 = {
        key: 0
    };
    c0 = {
        class: "streamline-buttons"
    };
    f0 = ue({
        __name: "StreamlineExportDialog",
        setup (f) {
            const a = Q("show_overlay"), u = Q("dialogRef"), p = j(!1);
            Be(p, (_)=>{
                _ || u.value.close();
            });
            const m = j(!1);
            Be(m, (_)=>{
                _ || (v.value = {
                    collapseCodeCells: !1,
                    collapseOutputs: !1
                });
            });
            const v = j({
                collapseCodeCells: !1,
                collapseOutputs: !1
            }), d = j(""), i = j();
            wt(()=>{
                d.value = u.value.data.saveAsFilename, i.value = u.value.data.notebook;
            });
            const b = ()=>{
                d.value = `Beaker-Notebook_${Oe()}.ipynb`;
            }, I = (_, w, F)=>{
                p.value = !0;
                const h = Ie.URLExt.join(Ie.PageConfig.getBaseUrl(), "export", _);
                d.value || b(), fetch(h, {
                    method: "POST",
                    body: JSON.stringify({
                        name: d.value,
                        content: i.value,
                        options: F ?? {}
                    }),
                    headers: {
                        "Content-Type": "application/json;charset=UTF-8"
                    }
                }).then(async (k)=>{
                    if (k.status === 200) {
                        const S = new Blob([
                            await k.text()
                        ]), P = k.headers.get("content-disposition"), x = at.parse(P).parameters.filename;
                        De(S, x);
                    } else {
                        const S = await k.json();
                        a(S, "Error converting notebook");
                    }
                }).catch((k)=>console.error(k)).finally(()=>{
                    p.value = !1, u.value.close();
                });
            };
            return (_, w)=>{
                const F = Ae("tooltip");
                return J(), K("div", o0, [
                    w[12] || (w[12] = L("p", null, " Streamline uses an AI agent to do a pass over the notebook for clarity, making agent interactions feel more like a comprehensive and cohesive notebook. This may take up to several minutes for longer notebooks. ", -1)),
                    L("div", i0, [
                        w[7] || (w[7] = L("label", {
                            for: "notebookname"
                        }, "Notebook Name", -1)),
                        N(E(lt), null, {
                            default: oe(()=>[
                                    N(E(it), {
                                        id: "notebookname",
                                        style: {
                                            display: "flex",
                                            margin: "auto"
                                        },
                                        autocomplete: "off",
                                        modelValue: d.value,
                                        "onUpdate:modelValue": w[0] || (w[0] = (h)=>d.value = h)
                                    }, null, 8, [
                                        "modelValue"
                                    ]),
                                    N(E(gt), null, {
                                        default: oe(()=>[
                                                ...w[6] || (w[6] = [
                                                    vt(".ipynb", -1)
                                                ])
                                            ]),
                                        _: 1
                                    })
                                ]),
                            _: 1
                        })
                    ]),
                    N(E(Ue)),
                    L("div", l0, [
                        ne((J(), K("div", null, [
                            w[8] || (w[8] = L("label", {
                                for: "additionalStreamlineOptions"
                            }, "Additional Options", -1)),
                            N(E(be), {
                                inputId: "additionalStreamlineOptions",
                                modelValue: m.value,
                                "onUpdate:modelValue": w[1] || (w[1] = (h)=>m.value = h)
                            }, null, 8, [
                                "modelValue"
                            ])
                        ])), [
                            [
                                F,
                                "Enable additional options for streamlining, like collapsing outputs and code cells by default."
                            ]
                        ]),
                        m.value ? ne((J(), K("div", s0, [
                            w[9] || (w[9] = L("label", {
                                for: "hidecode"
                            }, "Collapse Code Cells", -1)),
                            N(E(be), {
                                inputId: "hidecode",
                                modelValue: v.value.collapseCodeCells,
                                "onUpdate:modelValue": w[2] || (w[2] = (h)=>v.value.collapseCodeCells = h)
                            }, null, 8, [
                                "modelValue"
                            ])
                        ])), [
                            [
                                F,
                                "Collapse code cells by default, which may be expanded using the toggle button on the left-hand side of the Jupyter pane."
                            ]
                        ]) : ae("", !0),
                        m.value ? ne((J(), K("div", a0, [
                            w[10] || (w[10] = L("label", {
                                for: "hidecharts"
                            }, "Collapse Outputs", -1)),
                            N(E(be), {
                                inputId: "hidecharts",
                                modelValue: v.value.collapseOutputs,
                                "onUpdate:modelValue": w[3] || (w[3] = (h)=>v.value.collapseOutputs = h)
                            }, null, 8, [
                                "modelValue"
                            ])
                        ])), [
                            [
                                F,
                                "Collapse outputs by default (excluding plots and figures), which may be expanded using the toggle button on the left-hand side of the Jupyter pane."
                            ]
                        ]) : ae("", !0)
                    ]),
                    N(E(Ue)),
                    p.value ? (J(), K("div", u0, [
                        N(E(xt)),
                        w[11] || (w[11] = L("span", null, "Exporting...", -1)),
                        N(E(Ue))
                    ])) : ae("", !0),
                    L("div", c0, [
                        N(E(ee), {
                            type: "button",
                            label: "Cancel",
                            severity: "secondary",
                            onClick: w[4] || (w[4] = (h)=>E(u).close())
                        }),
                        N(E(ee), {
                            type: "button",
                            label: "Export Notebook",
                            onClick: w[5] || (w[5] = (h)=>{
                                p.value = !0, I("streamline", "application/json", v.value);
                            })
                        })
                    ])
                ]);
            };
        }
    });
    p0 = {
        class: "truncate-toggle-container"
    };
    d0 = {
        key: 0,
        class: "p-splitbutton toolbar-splitbutton"
    };
    M0 = ue({
        __name: "BeakerNotebookToolbar",
        props: {
            defaultSeverity: {
                default: "info"
            },
            saveAvailable: {
                type: Boolean,
                default: !1
            },
            saveAsFilename: {},
            truncateAgentCodeCells: {
                type: Boolean,
                default: !1
            }
        },
        emits: [
            "notebook-saved",
            "open-file",
            "update-truncate-preference"
        ],
        setup (f, { emit: a }) {
            const u = Q("session"), p = Q("notebook"), m = Q("cell-component-mapping"), v = Q("show_overlay"), d = bt(), i = Q("beakerSession"), b = f, I = a, _ = Y({
                get: ()=>b.truncateAgentCodeCells,
                set: (g)=>{
                    I("update-truncate-preference", g);
                }
            }), w = Y(()=>{
                const g = typeof m == "function" ? m(null) : m;
                return Object.entries(g).map(([c, y])=>({
                        label: `${Et(c)} Cell`,
                        icon: y.icon,
                        command: ()=>{
                            const C = new y.modelClass({
                                source: ""
                            });
                            p.insertCellAfter(p.selectedCell(), C, !0);
                        }
                    }));
            }), F = j(b.saveAsFilename), h = j(), k = j(), S = j([
                {
                    label: "Loading...",
                    disabled: !0
                }
            ]), P = async (g, c)=>{
                const y = Ie.URLExt.join(Ie.PageConfig.getBaseUrl(), "export", g), C = x(p.notebook), O = new $e;
                if (O.fromJSON(C), O.content.cells && Array.isArray(O.content.cells) && (O.content.cells = O.content.cells.map((X)=>X.cell_type === "raw" ? new pe(X) : X.cell_type === "code" ? new ke(X) : X.cell_type === "query" ? new Re(X) : X.cell_type === "markdown" ? new Ne(X) : new pe(X))), g === "full_context_notebook") {
                    const X = await u.executeAction("get_agent_history", {}).done;
                    O.content.metadata.chat_history = X.content.return;
                }
                const q = O.toIPynb();
                fetch(y, {
                    method: "POST",
                    body: JSON.stringify({
                        name: F.value,
                        content: q
                    }),
                    headers: {
                        "Content-Type": "application/json;charset=UTF-8"
                    }
                }).then(async (X)=>{
                    if (X.status === 200) {
                        const de = await X.blob(), _e = X.headers.get("content-disposition"), W = at.parse(_e).parameters.filename;
                        De(de, W);
                    } else {
                        const de = await X.json();
                        v(de, "Error converting notebook");
                    }
                }).catch((X)=>console.error(X));
            }, U = async (g, c)=>{
                if (F.value || $(), g === "streamline") {
                    const y = x(p.notebook), C = new $e;
                    C.fromJSON(y), C.content.cells && Array.isArray(C.content.cells) && (C.content.cells = C.content.cells.map((q)=>q.cell_type === "raw" ? new pe(q) : q.cell_type === "code" ? new ke(q) : q.cell_type === "query" ? new Re(q) : q.cell_type === "markdown" ? new Ne(q) : new pe(q)));
                    const O = C.toIPynb();
                    d.open(f0, {
                        data: {
                            saveAsFilename: F.value,
                            notebook: O
                        },
                        props: {
                            modal: !0,
                            header: "AI-Streamlined Notebook Export"
                        }
                    });
                } else await P(g);
            }, x = (g)=>{
                const c = JSON.parse(JSON.stringify(g));
                return c.cells && Array.isArray(c.cells) && (c.cells = c.cells.map((y)=>{
                    if (y.cell_type === "query" && y.metadata?.is_flattened === !0) {
                        const { events: C, ...O } = y;
                        return {
                            ...O,
                            metadata: {
                                ...y.metadata,
                                events: void 0
                            }
                        };
                    }
                    return y;
                })), c.content && c.content.cells && Array.isArray(c.content.cells) && (c.content.cells = c.content.cells.map((y)=>{
                    if (y.cell_type === "query" && y.metadata?.is_flattened === !0) {
                        const { events: C, ...O } = y;
                        return {
                            ...O,
                            metadata: {
                                ...y.metadata,
                                events: void 0
                            }
                        };
                    }
                    return y;
                })), c;
            }, R = async ()=>{
                const g = new Set([
                    "custom",
                    "qtpdf",
                    "qtpng",
                    "webpdf"
                ]), c = await u.services.nbconvert.getExportFormats();
                S.value = Object.entries(c).filter(([y])=>!g.has(y)).map(([y, C])=>{
                    const O = C.output_mimetype;
                    return {
                        label: {
                            streamline: "notebook (AI )",
                            full_context_notebook: "notebook (full agent context)"
                        }[y] ?? y,
                        tooltip: O,
                        command: ()=>{
                            U(y);
                        }
                    };
                }).sort((y, C)=>y.label.localeCompare(C.label));
            };
            kt(async ()=>{
                R();
            }), Be(b, (g, c)=>{
                F.value !== c.saveAsFilename && (F.value = c.saveAsFilename);
            });
            const $ = ()=>{
                F.value = `Beaker-Notebook_${Oe()}.ipynb`;
            }, T = async ()=>{
                const g = {
                    notebook_id: p.id,
                    cells: p.notebook.cells.map((y)=>({
                            cell_id: y.id,
                            content: y.source
                        }))
                };
                await u.executeAction("lint_code", g).done;
            }, Z = async ()=>{
                if (window.confirm("This will reset your entire session, clearing the notebook and removing any updates to the environment. Proceed?")) {
                    const g = {
                        context: i.activeContext?.slug,
                        language: i.activeContext?.language?.slug,
                        context_info: i?.activeContext?.config ?? {},
                        debug: i?.activeContext?.info?.debug,
                        verbose: i?.activeContext?.info?.verbose
                    };
                    At(u).reset(), await u.sessionReady, i.setContext(g), F.value = void 0, I("notebook-saved", void 0), p.cellCount <= 0 && p.selectCell(u.addCodeCell(""));
                }
            };
            function re(g, c) {
                I("open-file", g, c);
            }
            async function D() {
                const g = u.notebook.toIPynb(), c = u.services.contents;
                F.value || $();
                const y = `./${F.value}`, C = await c.save(y, {
                    type: "notebook",
                    content: g,
                    format: "text"
                });
                I("notebook-saved", C.path), F.value = C.path;
            }
            async function B() {
                await D(), h.value.hide();
            }
            function A() {
                const g = x(p.notebook), c = new $e;
                c.fromJSON(g), c.content.cells && Array.isArray(c.content.cells) && (c.content.cells = c.content.cells.map((q)=>q.cell_type === "raw" ? new pe(q) : q.cell_type === "code" ? new ke(q) : q.cell_type === "query" ? new Re(q) : q.cell_type === "markdown" ? new Ne(q) : new pe(q)));
                const y = c.toIPynb(), C = new Blob([
                    JSON.stringify(y, null, 2)
                ]), O = `Beaker-Notebook_${Oe()}.ipynb`;
                De(C, O);
            }
            return (g, c)=>{
                const y = Ae("tooltip");
                return J(), Ce(E(Bt), {
                    class: "notebook-toolbar"
                }, {
                    start: oe(()=>[
                            le(g.$slots, "start", {}, ()=>[
                                    N(E(Qe), {
                                        onClick: c[0] || (c[0] = (C)=>E(p).insertCellAfter()),
                                        class: "toolbar-splitbutton add-cell-button",
                                        icon: "pi pi-plus",
                                        size: "small",
                                        severity: b.defaultSeverity,
                                        model: w.value,
                                        text: "",
                                        pt: {
                                            pcButton: {
                                                root: {
                                                    title: "Add code cell after selection",
                                                    "aria-label": "Add code cell after selection"
                                                }
                                            }
                                        }
                                    }, null, 8, [
                                        "severity",
                                        "model"
                                    ]),
                                    N(E(ee), {
                                        onClick: c[1] || (c[1] = (C)=>E(p).removeCell()),
                                        icon: "pi pi-minus",
                                        size: "small",
                                        severity: b.defaultSeverity,
                                        text: ""
                                    }, null, 8, [
                                        "severity"
                                    ]),
                                    N(E(ee), {
                                        onClick: c[2] || (c[2] = (C)=>E(p).selectedCell().execute()),
                                        icon: "pi pi-play",
                                        size: "small",
                                        severity: b.defaultSeverity,
                                        text: ""
                                    }, null, 8, [
                                        "severity"
                                    ]),
                                    N(E(ee), {
                                        onClick: c[3] || (c[3] = (C)=>E(u).interrupt()),
                                        icon: "pi pi-stop",
                                        size: "small",
                                        severity: b.defaultSeverity,
                                        text: ""
                                    }, null, 8, [
                                        "severity"
                                    ]),
                                    ne((J(), K("div", p0, [
                                        N(E(be), {
                                            modelValue: _.value,
                                            "onUpdate:modelValue": c[4] || (c[4] = (C)=>_.value = C),
                                            inputId: "auto-truncate-toggle"
                                        }, null, 8, [
                                            "modelValue"
                                        ]),
                                        c[10] || (c[10] = L("label", {
                                            for: "auto-truncate-toggle",
                                            class: "truncate-label"
                                        }, "Collapse Agent Code", -1))
                                    ])), [
                                        [
                                            y,
                                            {
                                                value: "Collapse agent code cells by default",
                                                showDelay: 300
                                            },
                                            void 0,
                                            {
                                                bottom: !0
                                            }
                                        ]
                                    ]),
                                    le(g.$slots, "start-extra")
                                ])
                        ]),
                    end: oe(()=>[
                            le(g.$slots, "end", {}, ()=>[
                                    ne(N($t, {
                                        action: T,
                                        size: "small",
                                        severity: b.defaultSeverity,
                                        text: ""
                                    }, null, 8, [
                                        "severity"
                                    ]), [
                                        [
                                            y,
                                            {
                                                value: "Analyze Codecells",
                                                showDelay: 300
                                            },
                                            void 0,
                                            {
                                                bottom: !0
                                            }
                                        ]
                                    ]),
                                    ne(N(E(ee), {
                                        onClick: Z,
                                        icon: "pi pi-refresh",
                                        size: "small",
                                        severity: b.defaultSeverity,
                                        text: ""
                                    }, null, 8, [
                                        "severity"
                                    ]), [
                                        [
                                            y,
                                            {
                                                value: "Reset notebook",
                                                showDelay: 300
                                            },
                                            void 0,
                                            {
                                                bottom: !0
                                            }
                                        ]
                                    ]),
                                    b.saveAvailable ? (J(), K("div", d0, [
                                        ne(N(E(ee), {
                                            class: "p-splitbutton-defaultbutton",
                                            onClick: D,
                                            icon: "pi pi-save",
                                            size: "small",
                                            severity: b.defaultSeverity,
                                            text: ""
                                        }, null, 8, [
                                            "severity"
                                        ]), [
                                            [
                                                y,
                                                {
                                                    value: "Save locally as " + (F.value ? F.value : "a .ipynb file"),
                                                    showDelay: 300
                                                },
                                                void 0,
                                                {
                                                    bottom: !0
                                                }
                                            ]
                                        ]),
                                        N(E(ee), {
                                            class: "p-splitbutton-menubutton",
                                            size: "small",
                                            severity: b.defaultSeverity,
                                            text: "",
                                            onClick: c[5] || (c[5] = (C)=>{
                                                h.value.toggle(C);
                                            })
                                        }, {
                                            default: oe(()=>[
                                                    N(E(Ct))
                                                ]),
                                            _: 1
                                        }, 8, [
                                            "severity"
                                        ]),
                                        N(E(st), {
                                            class: "saveas-overlay",
                                            ref_key: "saveAsHoverMenuRef",
                                            ref: h,
                                            popup: !0,
                                            onShow: c[9] || (c[9] = (C)=>{
                                                F.value || $();
                                            })
                                        }, {
                                            default: oe(()=>[
                                                    c[11] || (c[11] = L("div", null, "Save as:", -1)),
                                                    N(E(lt), null, {
                                                        default: oe(()=>[
                                                                N(E(it), {
                                                                    class: "saveas-input",
                                                                    ref_key: "saveAsInputRef",
                                                                    ref: k,
                                                                    modelValue: F.value,
                                                                    "onUpdate:modelValue": c[6] || (c[6] = (C)=>F.value = C),
                                                                    onKeydown: c[7] || (c[7] = It((C)=>B(), [
                                                                        "enter"
                                                                    ])),
                                                                    autofocus: ""
                                                                }, null, 8, [
                                                                    "modelValue"
                                                                ]),
                                                                N(E(ee), {
                                                                    label: "Save",
                                                                    onClick: c[8] || (c[8] = (C)=>B())
                                                                })
                                                            ]),
                                                        _: 1
                                                    })
                                                ]),
                                            _: 1
                                        }, 512)
                                    ])) : ae("", !0),
                                    ne(N(E(Qe), {
                                        onClick: A,
                                        class: "toolbar-splitbutton",
                                        icon: "pi pi-download",
                                        size: "small",
                                        model: S.value,
                                        severity: b.defaultSeverity,
                                        text: ""
                                    }, null, 8, [
                                        "model",
                                        "severity"
                                    ]), [
                                        [
                                            y,
                                            {
                                                value: "Export (download) as .ipynb",
                                                showDelay: 300
                                            },
                                            void 0,
                                            {
                                                bottom: !0
                                            }
                                        ]
                                    ]),
                                    N(r0, {
                                        severity: g.$props.defaultSeverity,
                                        onOpenFile: re
                                    }, null, 8, [
                                        "severity"
                                    ]),
                                    le(g.$slots, "end-extra")
                                ])
                        ]),
                    _: 3
                });
            };
        }
    });
    h0 = {};
    y0 = {
        class: "draggable-wrapper"
    };
    function m0(f, a) {
        return J(), K("div", y0);
    }
    let w0, g0, v0, x0, b0, E0, k0, B0, C0;
    w0 = Pe(h0, [
        [
            "render",
            m0
        ],
        [
            "__scopeId",
            "data-v-6b2da513"
        ]
    ]);
    g0 = [
        "cell-id"
    ];
    v0 = {
        class: "drag-handle"
    };
    x0 = {
        class: "cell-contents"
    };
    b0 = {
        class: "menu-area",
        ref: "menuAreaRef"
    };
    E0 = {
        key: 0
    };
    k0 = {
        class: "cell-type-dropdown-item"
    };
    B0 = {
        class: "extra-area"
    };
    C0 = ue({
        __name: "BeakerCell",
        props: {
            cell: {},
            index: {},
            dragEnabled: {
                type: Boolean
            }
        },
        emits: [
            "move-cell"
        ],
        setup (f, { emit: a }) {
            const u = f, p = a, m = Q("beakerSession"), v = Q("notebook"), d = Q("cell-component-mapping"), i = (A)=>{
                A.defaultPrevented || v.selectCell(u.cell);
            }, b = j(null), I = j(null), _ = j(null), w = j(u.cell.metadata), F = Y(()=>w.value?.collapsed || !1), h = Y(()=>!F.value || !b.value ? "auto" : b.value.scrollHeight < 250 ? "3.5em" : "250px"), k = {
                code: "pi pi-code",
                markdown: "pi pi-pencil",
                query: "pi pi-sparkles",
                raw: "pi pi-question-circle"
            }, S = Y(()=>k[u.cell.cell_type]), P = Y(()=>u.cell.cell_type === "markdown" && u.cell.metadata?.beaker_cell_type === "thought"), U = Y(()=>u.cell.cell_type === "markdown" && u.cell.metadata?.beaker_cell_type === "response"), x = Y(()=>u.cell.cell_type === "markdown" && u.cell.metadata?.beaker_cell_type === "user_question"), R = Y(()=>u.cell.cell_type === "markdown" && u.cell.metadata?.beaker_cell_type === "error"), $ = Y(()=>u.cell.cell_type === "markdown" && u.cell.metadata?.beaker_cell_type === "abort"), T = Y(()=>P.value || U.value || x.value || R.value || $.value || u.cell.cell_type === "query"), Z = (A)=>{
                w.value && (w.value.collapsed = !F.value);
            }, re = ()=>{
                u.index > 0 && p("move-cell", u.index, u.index - 1);
            }, D = ()=>{
                u.index < v.cellCount - 1 && p("move-cell", u.index, u.index + 1);
            }, B = (A)=>{
                if (!(A?.target instanceof HTMLElement && A?.relatedTarget instanceof HTMLElement)) return;
                const c = [
                    `[cell-id="${u.cell.id}"] .menu-area`,
                    `[cell-id="${u.cell.id}"] .hover-menu`,
                    `.menu-overlay[cell-id="${u.cell.id}"]`
                ].join(", ");
                A.relatedTarget.closest(c) !== null || (A.type.toLowerCase().includes("enter") ? I.value.show(A, _.value.$el) : A.type.toLowerCase().includes("leave") && I.value.hide());
            };
            return (A, g)=>{
                const c = Ae("tooltip");
                return J(), K("div", {
                    class: Ee([
                        "beaker-cell",
                        {
                            collapsed: F.value
                        }
                    ]),
                    tabindex: "0",
                    onClick: i,
                    ref_key: "beakerCellRef",
                    ref: b,
                    "cell-id": A.cell.id,
                    style: _t(F.value ? {
                        "--dynamic-collapse-height": h.value
                    } : {})
                }, [
                    L("div", {
                        class: "collapse-box",
                        onClick: Ze(Z, [
                            "prevent"
                        ])
                    }),
                    L("div", v0, [
                        N(w0, {
                            draggable: u.dragEnabled
                        }, null, 8, [
                            "draggable"
                        ])
                    ]),
                    L("div", x0, [
                        le(A.$slots, "default"),
                        le(A.$slots, "child-cells")
                    ]),
                    L("div", b0, [
                        le(A.$slots, "hover-menu", {}, ()=>[
                                L("div", {
                                    class: "hover-menu",
                                    onPointerenter: B,
                                    onPointerleave: B
                                }, [
                                    N(E(ee), {
                                        ref_key: "cellMenuButton",
                                        ref: _,
                                        class: "cell-menu-button",
                                        text: "",
                                        small: "",
                                        icon: "pi pi-ellipsis-v",
                                        onClick: g[0] || (g[0] = Ze((y)=>{
                                            I.value.show(y);
                                        }, [
                                            "prevent"
                                        ]))
                                    }, null, 512),
                                    N(E(st), {
                                        class: "menu-overlay",
                                        ref_key: "hoverMenuRef",
                                        ref: I,
                                        "cell-id": A.cell.id,
                                        onPointerenter: B,
                                        onPointerleave: B
                                    }, {
                                        default: oe(()=>[
                                                T.value ? ae("", !0) : ne((J(), K("div", E0, [
                                                    N(E(Ft), {
                                                        name: `${A.cell.id}-celltype`,
                                                        class: "cell-type-selector overlay-menu-button",
                                                        "model-value": A.cell.cell_type,
                                                        "onUpdate:modelValue": g[1] || (g[1] = (y)=>{
                                                            E(v).convertCellType(A.cell, y), I.value.hide();
                                                        }),
                                                        options: Object.keys(typeof E(d) == "function" ? E(d)(null) : E(d) || {}),
                                                        "dropdown-icon": S.value,
                                                        "label-style": {
                                                            display: "none"
                                                        },
                                                        "append-to": "self"
                                                    }, {
                                                        value: oe((y)=>[
                                                                L("span", {
                                                                    class: Ee(k[y.value])
                                                                }, null, 2)
                                                            ]),
                                                        option: oe((y)=>[
                                                                L("div", k0, [
                                                                    L("span", {
                                                                        class: Ee(k[y.option])
                                                                    }, null, 2),
                                                                    L("span", null, rt(y.option), 1)
                                                                ])
                                                            ]),
                                                        _: 1
                                                    }, 8, [
                                                        "name",
                                                        "model-value",
                                                        "options",
                                                        "dropdown-icon"
                                                    ])
                                                ])), [
                                                    [
                                                        c,
                                                        "Change Cell Type",
                                                        void 0,
                                                        {
                                                            left: !0
                                                        }
                                                    ]
                                                ]),
                                                T.value ? ae("", !0) : ne((J(), Ce(E(ee), {
                                                    key: 1,
                                                    onClick: g[2] || (g[2] = (y)=>{
                                                        E(m).findNotebookCellById(A.cell.id).execute(), I.value.hide();
                                                    }),
                                                    icon: "pi pi-play",
                                                    size: "small",
                                                    text: ""
                                                }, null, 512)), [
                                                    [
                                                        c,
                                                        "Execute cell",
                                                        void 0,
                                                        {
                                                            left: !0
                                                        }
                                                    ]
                                                ]),
                                                ne(N(E(ee), {
                                                    onClick: g[3] || (g[3] = (y)=>{
                                                        E(v).removeCell(E(m).findNotebookCellById(A.cell.id)), I.value.hide();
                                                    }),
                                                    icon: "pi pi-minus",
                                                    size: "small",
                                                    text: ""
                                                }, null, 512), [
                                                    [
                                                        c,
                                                        "Remove cell",
                                                        void 0,
                                                        {
                                                            left: !0
                                                        }
                                                    ]
                                                ]),
                                                ne(N(E(ee), {
                                                    onClick: g[4] || (g[4] = (y)=>{
                                                        re(), I.value.hide();
                                                    }),
                                                    icon: "pi pi-chevron-up",
                                                    size: "small",
                                                    text: ""
                                                }, null, 512), [
                                                    [
                                                        c,
                                                        "Move cell up",
                                                        void 0,
                                                        {
                                                            left: !0
                                                        }
                                                    ]
                                                ]),
                                                ne(N(E(ee), {
                                                    onClick: g[5] || (g[5] = (y)=>{
                                                        D(), I.value.hide();
                                                    }),
                                                    icon: "pi pi-chevron-down",
                                                    size: "small",
                                                    text: ""
                                                }, null, 512), [
                                                    [
                                                        c,
                                                        "Move cell down",
                                                        void 0,
                                                        {
                                                            left: !0
                                                        }
                                                    ]
                                                ])
                                            ]),
                                        _: 1
                                    }, 8, [
                                        "cell-id"
                                    ])
                                ], 32)
                            ])
                    ], 512),
                    L("div", B0, [
                        le(A.$slots, "extra")
                    ])
                ], 14, g0);
            };
        }
    });
    D0 = ue({
        __name: "BeakerNotebookPanel",
        emits: [],
        setup (f, { expose: a, emit: u }) {
            const p = Q("session"), m = Q("cell-component-mapping"), v = Q("notebook"), d = j(null), i = j(!1), b = j(-1), I = j(-1), _ = Y(()=>p.notebook?.cells.length > 1);
            function w(x, R, $) {
                x.splice($, 0, x.splice(R, 1)[0]);
            }
            function F(x, R) {
                w(p.notebook.cells, x, R);
            }
            function h(x, R, $) {
                if (x.target instanceof HTMLElement && x.dataTransfer !== null && x.target.matches(".drag-handle *")) {
                    const T = x.target.closest(".beaker-cell");
                    x.dataTransfer.dropEffect = "move", x.dataTransfer.effectAllowed = "move", x.dataTransfer.setData("x-beaker/cell", JSON.stringify({
                        id: R.id,
                        index: $
                    })), T !== null && x.dataTransfer.setDragImage(T, 0, 0), i.value = !0, b.value = $;
                }
            }
            function k(x, R, $) {
                x?.dataTransfer?.types.includes("x-beaker/cell") && (I.value = $, x.preventDefault());
            }
            function S(x, R) {
                if (!x.target.closest(".drag-sort-enable")) return;
                const Z = JSON.parse(x.dataTransfer?.getData("x-beaker/cell") || "null"), re = Z.id, D = Z.index, B = p.notebook.cells[R].id;
                re !== B && w(p.notebook.cells, D, R);
            }
            function P() {
                i.value = !1, I.value = -1, b.value = -1;
            }
            function U(x) {
                d.value && (d.value.scrollTop = d.value.scrollHeight);
            }
            return a({
                scrollBottomCellContainer: U
            }), (x, R)=>(J(), K("div", {
                    class: "cell-container drag-sort-enable",
                    ref_key: "cellsContainerRef",
                    ref: d
                }, [
                    (J(!0), K(ot, null, St(E(p).notebook.cells, ($, T)=>(J(), Ce(C0, {
                            cell: $,
                            selected: $.id === E(v).selectedCellId,
                            index: T,
                            key: `outercell-${$.id}`,
                            class: Ee([
                                "beaker-cell",
                                {
                                    selected: $.id === E(v).selectedCellId,
                                    "drag-source": T == b.value,
                                    "drag-above": T === I.value && T < b.value,
                                    "drag-below": T === I.value && T > b.value,
                                    "drag-itself": T === I.value && T === b.value,
                                    "drag-active": i.value
                                }
                            ]),
                            "hide-cell-type-selector": $.cell_type === "query",
                            "hide-execute-button": $.cell_type === "query",
                            "drag-enabled": _.value,
                            onMoveCell: F,
                            onDragstart: (Z)=>h(Z, $, T),
                            onDrop: (Z)=>S(Z, T),
                            onDragover: (Z)=>k(Z, $, T),
                            onDragend: P
                        }, {
                            default: oe(()=>[
                                    (J(), Ce(Tt(typeof E(m) == "function" ? E(m)($) : E(m)[$.cell_type]), {
                                        cell: $
                                    }, null, 8, [
                                        "cell"
                                    ]))
                                ]),
                            _: 2
                        }, 1032, [
                            "cell",
                            "selected",
                            "index",
                            "hide-cell-type-selector",
                            "hide-execute-button",
                            "class",
                            "drag-enabled",
                            "onDragstart",
                            "onDrop",
                            "onDragover"
                        ]))), 128)),
                    L("div", {
                        class: "drop-overflow-catcher",
                        onDragover: R[0] || (R[0] = ($)=>{
                            I.value = E(p).notebook.cells.length - 1, $.preventDefault();
                        }),
                        onDrop: R[1] || (R[1] = ($)=>S($, E(p).notebook.cells.length - 1))
                    }, [
                        le(x.$slots, "notebook-background")
                    ], 32)
                ], 512));
        }
    });
});
export { R0 as B, $0 as S, M0 as _, D0 as a, U0 as b, __tla };
