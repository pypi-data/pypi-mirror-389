[project]
name = "d_back"
description = "WebSocket server project."
authors = [
    { name = "Tin Nguyen", email = "nguyen.ngoctindaniel@gmail.com" }
]
readme = "README.md"
dynamic = ["version", "requires-python", "dependencies", "optional-dependencies"]


[project.scripts]
d_back = "d_back.server:main_sync"

[build-system]
requires = ["setuptools", "wheel"]
build-backend = "setuptools.build_meta"

[tool.pytest.ini_options]
minversion = "7.0"
addopts = [
    "--strict-markers",
    "--strict-config", 
    "--verbose",
    "-ra",  # show summary of all test results
    "--timeout=60",  # global timeout of 60 seconds per test
]
testpaths = ["tests"]
python_files = ["test_*.py", "*_test.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
markers = [
    "asyncio: marks tests as async",
    "slow: marks tests as slow (deselect with '-m \"not slow\"')",
    "integration: marks tests as integration tests",
    "timeout: marks tests that may need longer timeout",
]
asyncio_mode = "auto"
log_cli = true
log_cli_level = "INFO"
log_cli_format = "%(asctime)s [%(levelname)8s] %(name)s: %(message)s"
log_cli_date_format = "%Y-%m-%d %H:%M:%S"
timeout = 60
timeout_method = "thread"

[tool.bumpversion]
current_version = "0.0.18"
commit = true
tag = true
tag_name = "v{new_version}"

[[tool.bumpversion.files]]
filename = "setup.cfg"
search = "version = {current_version}"
replace = "version = {new_version}"

[[tool.bumpversion.files]]
filename = "d_back/__init__.py"
search = "__version__ = \"{current_version}\""
replace = "__version__ = \"{new_version}\""