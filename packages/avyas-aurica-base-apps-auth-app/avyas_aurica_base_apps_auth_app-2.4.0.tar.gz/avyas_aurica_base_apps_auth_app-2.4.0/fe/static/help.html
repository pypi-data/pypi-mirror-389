<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-Device Login Help</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="alternate icon" href="/favicon.ico">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 { 
            color: #333; 
            margin-bottom: 20px;
            text-align: center;
        }
        h2 {
            color: #667eea;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 20px;
        }
        .step-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .step-box h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        ol, ul {
            margin: 15px 0 15px 25px;
            line-height: 1.8;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-top: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Cross-Device Login Help</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            How to login to desktop using your mobile device
        </p>

        <h2>‚úÖ Correct Flow (Step-by-Step)</h2>
        
        <div class="step-box">
            <h3>Step 1: Register on Mobile FIRST</h3>
            <ol>
                <li>Open your <strong>mobile browser</strong> (Safari on iOS, Chrome on Android)</li>
                <li>Visit: <code>https://811e1f2a0a66.ngrok-free.app/auth-app</code></li>
                <li>Click <strong>"Create Account"</strong></li>
                <li>Fill in your details</li>
                <li>Click <strong>"Register with Passkey"</strong></li>
                <li>Authenticate with Face ID/Touch ID/Fingerprint</li>
                <li>‚úÖ You're registered!</li>
            </ol>
        </div>

        <div class="step-box">
            <h3>Step 2: Login on Desktop Using Mobile</h3>
            <ol>
                <li>On <strong>desktop computer</strong>, visit the same URL</li>
                <li>Click <strong>"Sign In"</strong> button</li>
                <li>A dialog appears with a <strong>QR code</strong></li>
                <li>On your <strong>phone</strong>, open the <strong>Camera app</strong> (not a QR scanner app!)</li>
                <li>Point camera at the QR code on desktop screen</li>
                <li>A <strong>notification</strong> should appear: "Sign in to 811e1f2a0a66.ngrok-free.app"</li>
                <li><strong>Tap the notification</strong></li>
                <li>Your browser opens and asks for Face ID/Touch ID</li>
                <li>Authenticate on mobile</li>
                <li>‚úÖ Desktop logs in automatically!</li>
            </ol>
        </div>

        <h2>‚ùå Common Problems & Solutions</h2>

        <div class="error">
            <strong>Problem: QR scan opens Google Search</strong>
            <p style="margin-top: 10px;">This happens when the mobile doesn't recognize the FIDO URL.</p>
            <br>
            <strong>Solutions:</strong>
            <ul>
                <li><strong>Use Camera App</strong> (iOS) - Don't use third-party QR scanners</li>
                <li><strong>Use Chrome</strong> (Android) - Built-in QR scanner works best</li>
                <li>Make sure you <strong>registered on mobile first</strong></li>
                <li>Try <strong>Safari on iOS</strong> or <strong>Chrome on Android</strong></li>
                <li>Check that your phone has <strong>internet connection</strong></li>
            </ul>
        </div>

        <div class="warning">
            <strong>‚ö†Ô∏è Important Requirements:</strong>
            <ul>
                <li>Must register on mobile BEFORE trying desktop login</li>
                <li>Both devices need internet (uses cloud relay)</li>
                <li>Use modern browsers: Safari (iOS), Chrome (Android/Desktop), Edge (Desktop)</li>
                <li>Mobile must support biometric authentication</li>
            </ul>
        </div>

        <h2>üîÑ Alternative: Direct Mobile Login</h2>
        
        <div class="success">
            <p>If cross-device doesn't work, you can always:</p>
            <ul>
                <li>Login directly on mobile (visit site on mobile browser)</li>
                <li>Use the same device for both registration and login</li>
                <li>Each device can have its own passkey</li>
            </ul>
        </div>

        <h2>üõ†Ô∏è Troubleshooting Checklist</h2>
        
        <ul style="list-style-type: none;">
            <li>‚òëÔ∏è Registered on mobile browser first?</li>
            <li>‚òëÔ∏è Using Camera app (iOS) or Chrome (Android)?</li>
            <li>‚òëÔ∏è Both devices connected to internet?</li>
            <li>‚òëÔ∏è Using HTTPS (not HTTP)?</li>
            <li>‚òëÔ∏è Browser supports WebAuthn?</li>
            <li>‚òëÔ∏è Mobile has biometric setup (Face ID/Touch ID)?</li>
        </ul>

        <h2>üéØ Test Your Setup</h2>
        
        <div class="step-box">
            <h3>Quick Test (iOS)</h3>
            <ol>
                <li>Delete old passkeys: Settings ‚Üí Passwords ‚Üí Search "ngrok" ‚Üí Delete all</li>
                <li>Clear site data: Safari ‚Üí Privacy ‚Üí Clear History</li>
                <li>Register fresh on mobile</li>
                <li>Try desktop login with QR scan</li>
            </ol>
        </div>

        <div class="step-box">
            <h3>Quick Test (Android)</h3>
            <ol>
                <li>Delete old passkeys: Settings ‚Üí Google ‚Üí Autofill ‚Üí Password Manager ‚Üí Search "ngrok" ‚Üí Delete</li>
                <li>Clear Chrome data: Chrome ‚Üí Settings ‚Üí Privacy ‚Üí Clear browsing data</li>
                <li>Register fresh on mobile Chrome</li>
                <li>Try desktop login with QR scan</li>
            </ol>
        </div>

        <button onclick="window.location.href='/auth-app/static/index.html'">
            ‚Üê Back to Login
        </button>
    </div>
</body>
</html>
