import{x as ht,a8 as st,B as _t,P as pt,ba as gt,A as vt,R as mt,H as bt,bb as yt,bc as wt,e as je,bd as kt,S as at,be as Et,C as St,n as ce,bf as Rt,bg as Ct,v as ot,h as de,m as ne,r as Z,i as qe,q as me,a as fe,s as De,b as xe,g as x,d as Oe,p as xt,u as ke,l as Pe,t as et,f as Ot,j as Lt}from"./BPIoXquA.js";import{c as Tt,s as Ie,o as ut}from"./C6tn_jEF.js";import"./DsnmJJEf.js";import{p as ie,i as Ne}from"./lzapwbvy.js";import{d as Se,g as tt,u as It,e as Be,i as We}from"./BUFwSDdR.js";import{s as be}from"./BeKPjfAQ.js";import{s as Ze}from"./k6N7Jr3h.js";function lt(r,n,o=!1){if(r.multiple){if(n==null)return;if(!pt(n))return gt();for(var s of r.options)s.selected=n.includes(Ae(s));return}for(s of r.options){var d=Ae(s);if(vt(d,n)){s.selected=!0;return}}(!o||n!==void 0)&&(r.selectedIndex=-1)}function At(r){var n=new MutationObserver(()=>{lt(r,r.__value)});n.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),_t(()=>{n.disconnect()})}function Ke(r,n,o=n){var s=!0;ht(r,"change",d=>{var u=d?"[selected]":":checked",_;if(r.multiple)_=[].map.call(r.querySelectorAll(u),Ae);else{var g=r.querySelector(u)??r.querySelector("option:not([disabled])");_=g&&Ae(g)}o(_)}),st(()=>{var d=n();if(lt(r,d,s),s&&d===void 0){var u=r.querySelector(":checked");u!==null&&(d=Ae(u),o(d))}r.__value=d,s=!1}),At(r)}function Ae(r){return"__value"in r?r.__value:r.value}const Pt=()=>performance.now(),pe={tick:r=>requestAnimationFrame(r),now:()=>Pt(),tasks:new Set};function ft(){const r=pe.now();pe.tasks.forEach(n=>{n.c(r)||(pe.tasks.delete(n),n.f())}),pe.tasks.size!==0&&pe.tick(ft)}function Ft(r){let n;return pe.tasks.size===0&&pe.tick(ft),{promise:new Promise(o=>{pe.tasks.add(n={c:r,f:o})}),abort(){pe.tasks.delete(n)}}}function Fe(r,n){at(()=>{r.dispatchEvent(new CustomEvent(n))})}function jt(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const n=r.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(o=>o[0].toUpperCase()+o.slice(1)).join("")}function rt(r){const n={},o=r.split(";");for(const s of o){const[d,u]=s.split(":");if(!d||u===void 0)break;const _=jt(d.trim());n[_]=u.trim()}return n}const Dt=r=>r;function hr(r,n,o,s){var d=(r&Rt)!==0,u=(r&Ct)!==0,_=d&&u,g=(r&kt)!==0,y=_?"both":d?"in":"out",f,A=n.inert,M=n.style.overflow,W,K;function G(){return at(()=>f??=o()(n,s?.()??{},{direction:y}))}var H={is_global:g,in(){if(n.inert=A,!d){K?.abort(),K?.reset?.();return}u||W?.abort(),Fe(n,"introstart"),W=Ge(n,G(),K,1,()=>{Fe(n,"introend"),W?.abort(),W=f=void 0,n.style.overflow=M})},out($){if(!u){$?.(),f=void 0;return}n.inert=!0,Fe(n,"outrostart"),K=Ge(n,G(),W,0,()=>{Fe(n,"outroend"),$?.()})},stop:()=>{W?.abort(),K?.abort()}},D=mt;if((D.transitions??=[]).push(H),d&&Tt){var X=g;if(!X){for(var B=D.parent;B&&(B.f&bt)!==0;)for(;(B=B.parent)&&(B.f&yt)===0;);X=!B||(B.f&wt)!==0}X&&st(()=>{je(()=>H.in())})}}function Ge(r,n,o,s,d){var u=s===1;if(Et(n)){var _,g=!1;return St(()=>{if(!g){var D=n({direction:u?"in":"out"});_=Ge(r,D,o,s,d)}}),{abort:()=>{g=!0,_?.abort()},deactivate:()=>_.deactivate(),reset:()=>_.reset(),t:()=>_.t()}}if(o?.deactivate(),!n?.duration)return d(),{abort:ce,deactivate:ce,reset:ce,t:()=>s};const{delay:y=0,css:f,tick:A,easing:M=Dt}=n;var W=[];if(u&&o===void 0&&(A&&A(0,1),f)){var K=rt(f(0,1));W.push(K,K)}var G=()=>1-s,H=r.animate(W,{duration:y,fill:"forwards"});return H.onfinish=()=>{H.cancel();var D=o?.t()??1-s;o?.abort();var X=s-D,B=n.duration*Math.abs(X),$=[];if(B>0){var ge=!1;if(f)for(var he=Math.ceil(B/16.666666666666668),ee=0;ee<=he;ee+=1){var O=D+X*M(ee/he),e=rt(f(O,1-O));$.push(e),ge||=e.overflow==="hidden"}ge&&(r.style.overflow="hidden"),G=()=>{var t=H.currentTime;return D+X*M(t/B)},A&&Ft(()=>{if(H.playState!=="running")return!1;var t=G();return A(t,1-t),!0})}H=r.animate($,{duration:B,fill:"forwards"}),H.onfinish=()=>{G=()=>s,A?.(s,1-s),d()}},{abort:()=>{H&&(H.cancel(),H.effect=null,H.onfinish=ce)},deactivate:()=>{d=ce},reset:()=>{s===0&&A?.(1,0)},t:()=>G()}}function Ut(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Mt(r){return Array.from(new Set(r))}function _r(r){return r.map(n=>({value:n,label:n}))}function pr(r,n,o){return Object.entries(r).filter(([s,d])=>{const u=d.split(",");return o&&!n.includes(u[0])&&n.includes(u[1])||!o&&n.includes(u[0])&&!n.includes(u[1])}).map(([s,d])=>s)}var qt=de('<div class="row mb-2"><div class="col-sm-3"><label class="fw-medium fs-4"> </label></div> <div class="col-sm-9"><!></div></div>');function He(r,n){const o=ot();var s=qt(),d=ne(s),u=ne(d),_=ne(u,!0);Z(u),Z(d);var g=qe(d,2),y=ne(g);Ze(y,()=>n.content,()=>o),Z(g),Z(s),me(()=>{be(u,"for",o),Ie(_,n.label)}),fe(r,s)}var Ue={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var zt=Ue.exports,nt;function Nt(){return nt||(nt=1,(function(r,n){((o,s)=>{r.exports=s()})(zt,function o(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},d,u=!s.document&&!!s.postMessage,_=s.IS_PAPA_WORKER||!1,g={},y=0,f={};function A(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var i=he(t);i.chunkSize=parseInt(i.chunkSize),t.step||t.chunk||(i.chunkSize=null),this._handle=new H(i),(this._handle.streamer=this)._config=i}).call(this,e),this.parseChunk=function(t,i){var c=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<c){let k=this._config.newline;k||(l=this._config.quoteChar||'"',k=this._handle.guessLineEndings(t,l)),t=[...t.split(k).slice(c)].join(k)}this.isFirstChunk&&O(this._config.beforeFirstChunk)&&(l=this._config.beforeFirstChunk(t))!==void 0&&(t=l),this.isFirstChunk=!1,this._halted=!1;var c=this._partialLine+t,l=(this._partialLine="",this._handle.parse(c,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=l.meta.cursor,c=(this._finished||(this._partialLine=c.substring(t-this._baseIndex),this._baseIndex=t),l&&l.data&&(this._rowCount+=l.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),_)s.postMessage({results:l,workerId:f.WORKER_ID,finished:c});else if(O(this._config.chunk)&&!i){if(this._config.chunk(l,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=l=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(l.data),this._completeResults.errors=this._completeResults.errors.concat(l.errors),this._completeResults.meta=l.meta),this._completed||!c||!O(this._config.complete)||l&&l.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||l&&l.meta.paused||this._nextChunk(),l}this._halted=!0},this._sendError=function(t){O(this._config.error)?this._config.error(t):_&&this._config.error&&s.postMessage({workerId:f.WORKER_ID,error:t,finished:!1})}}function M(e){var t;(e=e||{}).chunkSize||(e.chunkSize=f.RemoteChunkSize),A.call(this,e),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),u||(t.onload=ee(this._chunkLoaded,this),t.onerror=ee(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var i,c=this._config.downloadRequestHeaders;for(i in c)t.setRequestHeader(i,c[i])}var l;this._config.chunkSize&&(l=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+l));try{t.send(this._config.downloadRequestBody)}catch(k){this._chunkError(k.message)}u&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(i=>(i=i.getResponseHeader("Content-Range"))!==null?parseInt(i.substring(i.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(i){i=t.statusText||i,this._sendError(new Error(i))}}function W(e){(e=e||{}).chunkSize||(e.chunkSize=f.LocalChunkSize),A.call(this,e);var t,i,c=typeof FileReader<"u";this.stream=function(l){this._input=l,i=l.slice||l.webkitSlice||l.mozSlice,c?((t=new FileReader).onload=ee(this._chunkLoaded,this),t.onerror=ee(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var l=this._input,k=(this._config.chunkSize&&(k=Math.min(this._start+this._config.chunkSize,this._input.size),l=i.call(l,this._start,k)),t.readAsText(l,this._config.encoding));c||this._chunkLoaded({target:{result:k}})},this._chunkLoaded=function(l){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(l.target.result)},this._chunkError=function(){this._sendError(t.error)}}function K(e){var t;A.call(this,e=e||{}),this.stream=function(i){return t=i,this._nextChunk()},this._nextChunk=function(){var i,c;if(!this._finished)return i=this._config.chunkSize,t=i?(c=t.substring(0,i),t.substring(i)):(c=t,""),this._finished=!t,this.parseChunk(c)}}function G(e){A.call(this,e=e||{});var t=[],i=!0,c=!1;this.pause=function(){A.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){A.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(l){this._input=l,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){c&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=ee(function(l){try{t.push(typeof l=="string"?l:l.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(k){this._streamError(k)}},this),this._streamError=ee(function(l){this._streamCleanUp(),this._sendError(l)},this),this._streamEnd=ee(function(){this._streamCleanUp(),c=!0,this._streamData("")},this),this._streamCleanUp=ee(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function H(e){var t,i,c,l,k=Math.pow(2,53),N=-k,te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,E=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,h=this,I=0,p=0,S=!1,m=!1,v=[],a={data:[],errors:[],meta:{}};function j(R){return e.skipEmptyLines==="greedy"?R.join("").trim()==="":R.length===1&&R[0].length===0}function T(){if(a&&c&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines&&(a.data=a.data.filter(function(b){return!j(b)})),Y()){let b=function(z,Q){O(e.transformHeader)&&(z=e.transformHeader(z,Q)),v.push(z)};if(a)if(Array.isArray(a.data[0])){for(var R=0;Y()&&R<a.data.length;R++)a.data[R].forEach(b);a.data.splice(0,1)}else a.data.forEach(b)}function L(b,z){for(var Q=e.header?{}:[],P=0;P<b.length;P++){var F=P,C=b[P],C=((ae,w)=>(U=>(e.dynamicTypingFunction&&e.dynamicTyping[U]===void 0&&(e.dynamicTyping[U]=e.dynamicTypingFunction(U)),(e.dynamicTyping[U]||e.dynamicTyping)===!0))(ae)?w==="true"||w==="TRUE"||w!=="false"&&w!=="FALSE"&&((U=>{if(te.test(U)&&(U=parseFloat(U),N<U&&U<k))return 1})(w)?parseFloat(w):E.test(w)?new Date(w):w===""?null:w):w)(F=e.header?P>=v.length?"__parsed_extra":v[P]:F,C=e.transform?e.transform(C,F):C);F==="__parsed_extra"?(Q[F]=Q[F]||[],Q[F].push(C)):Q[F]=C}return e.header&&(P>v.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+P,p+z):P<v.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+P,p+z)),Q}var q;a&&(e.header||e.dynamicTyping||e.transform)&&(q=1,!a.data.length||Array.isArray(a.data[0])?(a.data=a.data.map(L),q=a.data.length):a.data=L(a.data,0),e.header&&a.meta&&(a.meta.fields=v),p+=q)}function Y(){return e.header&&v.length===0}function se(R,L,q,b){R={type:R,code:L,message:q},b!==void 0&&(R.row=b),a.errors.push(R)}O(e.step)&&(l=e.step,e.step=function(R){a=R,Y()?T():(T(),a.data.length!==0&&(I+=R.data.length,e.preview&&I>e.preview?i.abort():(a.data=a.data[0],l(a,h))))}),this.parse=function(R,L,q){var b=e.quoteChar||'"',b=(e.newline||(e.newline=this.guessLineEndings(R,b)),c=!1,e.delimiter?O(e.delimiter)&&(e.delimiter=e.delimiter(R),a.meta.delimiter=e.delimiter):((b=((z,Q,P,F,C)=>{var ae,w,U,ve;C=C||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var ye=0;ye<C.length;ye++){for(var oe,Re=C[ye],V=0,ue=0,J=0,re=(U=void 0,new X({comments:F,delimiter:Re,newline:Q,preview:10}).parse(z)),_e=0;_e<re.data.length;_e++)P&&j(re.data[_e])?J++:(oe=re.data[_e].length,ue+=oe,U===void 0?U=oe:0<oe&&(V+=Math.abs(oe-U),U=oe));0<re.data.length&&(ue/=re.data.length-J),(w===void 0||V<=w)&&(ve===void 0||ve<ue)&&1.99<ue&&(w=V,ae=Re,ve=ue)}return{successful:!!(e.delimiter=ae),bestDelimiter:ae}})(R,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=b.bestDelimiter:(c=!0,e.delimiter=f.DefaultDelimiter),a.meta.delimiter=e.delimiter),he(e));return e.preview&&e.header&&b.preview++,t=R,i=new X(b),a=i.parse(t,L,q),T(),S?{meta:{paused:!0}}:a||{meta:{paused:!1}}},this.paused=function(){return S},this.pause=function(){S=!0,i.abort(),t=O(e.chunk)?"":t.substring(i.getCharIndex())},this.resume=function(){h.streamer._halted?(S=!1,h.streamer.parseChunk(t,!0)):setTimeout(h.resume,3)},this.aborted=function(){return m},this.abort=function(){m=!0,i.abort(),a.meta.aborted=!0,O(e.complete)&&e.complete(a),t=""},this.guessLineEndings=function(z,b){z=z.substring(0,1048576);var b=new RegExp(D(b)+"([^]*?)"+D(b),"gm"),q=(z=z.replace(b,"")).split("\r"),b=z.split(`
`),z=1<b.length&&b[0].length<q[0].length;if(q.length===1||z)return`
`;for(var Q=0,P=0;P<q.length;P++)q[P][0]===`
`&&Q++;return Q>=q.length/2?`\r
`:"\r"}}function D(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X(e){var t=(e=e||{}).delimiter,i=e.newline,c=e.comments,l=e.step,k=e.preview,N=e.fastMode,te=null,E=!1,h=e.quoteChar==null?'"':e.quoteChar,I=h;if(e.escapeChar!==void 0&&(I=e.escapeChar),(typeof t!="string"||-1<f.BAD_DELIMITERS.indexOf(t))&&(t=","),c===t)throw new Error("Comment character same as delimiter");c===!0?c="#":(typeof c!="string"||-1<f.BAD_DELIMITERS.indexOf(c))&&(c=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var p=0,S=!1;this.parse=function(m,v,a){if(typeof m!="string")throw new Error("Input must be a string");var j=m.length,T=t.length,Y=i.length,se=c.length,R=O(l),L=[],q=[],b=[],z=p=0;if(!m)return V();if(N||N!==!1&&m.indexOf(h)===-1){for(var Q=m.split(i),P=0;P<Q.length;P++){if(b=Q[P],p+=b.length,P!==Q.length-1)p+=i.length;else if(a)return V();if(!c||b.substring(0,se)!==c){if(R){if(L=[],ve(b.split(t)),ue(),S)return V()}else ve(b.split(t));if(k&&k<=P)return L=L.slice(0,k),V(!0)}}return V()}for(var F=m.indexOf(t,p),C=m.indexOf(i,p),ae=new RegExp(D(I)+D(h),"g"),w=m.indexOf(h,p);;)if(m[p]===h)for(w=p,p++;;){if((w=m.indexOf(h,w+1))===-1)return a||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:L.length,index:p}),oe();if(w===j-1)return oe(m.substring(p,w).replace(ae,h));if(h===I&&m[w+1]===I)w++;else if(h===I||w===0||m[w-1]!==I){F!==-1&&F<w+1&&(F=m.indexOf(t,w+1));var U=ye((C=C!==-1&&C<w+1?m.indexOf(i,w+1):C)===-1?F:Math.min(F,C));if(m.substr(w+1+U,T)===t){b.push(m.substring(p,w).replace(ae,h)),m[p=w+1+U+T]!==h&&(w=m.indexOf(h,p)),F=m.indexOf(t,p),C=m.indexOf(i,p);break}if(U=ye(C),m.substring(w+1+U,w+1+U+Y)===i){if(b.push(m.substring(p,w).replace(ae,h)),Re(w+1+U+Y),F=m.indexOf(t,p),w=m.indexOf(h,p),R&&(ue(),S))return V();if(k&&L.length>=k)return V(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:L.length,index:p}),w++}}else if(c&&b.length===0&&m.substring(p,p+se)===c){if(C===-1)return V();p=C+Y,C=m.indexOf(i,p),F=m.indexOf(t,p)}else if(F!==-1&&(F<C||C===-1))b.push(m.substring(p,F)),p=F+T,F=m.indexOf(t,p);else{if(C===-1)break;if(b.push(m.substring(p,C)),Re(C+Y),R&&(ue(),S))return V();if(k&&L.length>=k)return V(!0)}return oe();function ve(J){L.push(J),z=p}function ye(J){var re=0;return re=J!==-1&&(J=m.substring(w+1,J))&&J.trim()===""?J.length:re}function oe(J){return a||(J===void 0&&(J=m.substring(p)),b.push(J),p=j,ve(b),R&&ue()),V()}function Re(J){p=J,ve(b),b=[],C=m.indexOf(i,p)}function V(J){if(e.header&&!v&&L.length&&!E){var re=L[0],_e=Object.create(null),ze=new Set(re);let Ve=!1;for(let we=0;we<re.length;we++){let le=re[we];if(_e[le=O(e.transformHeader)?e.transformHeader(le,we):le]){let Ce,$e=_e[le];for(;Ce=le+"_"+$e,$e++,ze.has(Ce););ze.add(Ce),re[we]=Ce,_e[le]++,Ve=!0,(te=te===null?{}:te)[Ce]=le}else _e[le]=1,re[we]=le;ze.add(le)}Ve&&console.warn("Duplicate headers found and renamed."),E=!0}return{data:L,errors:q,meta:{delimiter:t,linebreak:i,aborted:S,truncated:!!J,cursor:z+(v||0),renamedHeaders:te}}}function ue(){l(V()),L=[],q=[]}},this.abort=function(){S=!0},this.getCharIndex=function(){return p}}function B(e){var t=e.data,i=g[t.workerId],c=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var l={abort:function(){c=!0,$(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ge,resume:ge};if(O(i.userStep)){for(var k=0;k<t.results.data.length&&(i.userStep({data:t.results.data[k],errors:t.results.errors,meta:t.results.meta},l),!c);k++);delete t.results}else O(i.userChunk)&&(i.userChunk(t.results,l,t.file),delete t.results)}t.finished&&!c&&$(t.workerId,t.results)}function $(e,t){var i=g[e];O(i.userComplete)&&i.userComplete(t),i.terminate(),delete g[e]}function ge(){throw new Error("Not implemented.")}function he(e){if(typeof e!="object"||e===null)return e;var t,i=Array.isArray(e)?[]:{};for(t in e)i[t]=he(e[t]);return i}function ee(e,t){return function(){e.apply(t,arguments)}}function O(e){return typeof e=="function"}return f.parse=function(e,t){var i=(t=t||{}).dynamicTyping||!1;if(O(i)&&(t.dynamicTypingFunction=i,i={}),t.dynamicTyping=i,t.transform=!!O(t.transform)&&t.transform,!t.worker||!f.WORKERS_SUPPORTED)return i=null,f.NODE_STREAM_INPUT,typeof e=="string"?(e=(c=>c.charCodeAt(0)!==65279?c:c.slice(1))(e),i=new(t.download?M:K)(t)):e.readable===!0&&O(e.read)&&O(e.on)?i=new G(t):(s.File&&e instanceof File||e instanceof Object)&&(i=new W(t)),i.stream(e);(i=(()=>{var c;return!!f.WORKERS_SUPPORTED&&(c=(()=>{var l=s.URL||s.webkitURL||null,k=o.toString();return f.BLOB_URL||(f.BLOB_URL=l.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",k,")();"],{type:"text/javascript"})))})(),(c=new s.Worker(c)).onmessage=B,c.id=y++,g[c.id]=c)})()).userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=O(t.step),t.chunk=O(t.chunk),t.complete=O(t.complete),t.error=O(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id})},f.unparse=function(e,t){var i=!1,c=!0,l=",",k=`\r
`,N='"',te=N+N,E=!1,h=null,I=!1,p=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||f.BAD_DELIMITERS.filter(function(v){return t.delimiter.indexOf(v)!==-1}).length||(l=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(i=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(E=t.skipEmptyLines),typeof t.newline=="string"&&(k=t.newline),typeof t.quoteChar=="string"&&(N=t.quoteChar),typeof t.header=="boolean"&&(c=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");h=t.columns}t.escapeChar!==void 0&&(te=t.escapeChar+N),t.escapeFormulae instanceof RegExp?I=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(I=/^[=+\-@\t\r].*$/)}})(),new RegExp(D(N),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return S(null,e,E);if(typeof e[0]=="object")return S(h||Object.keys(e[0]),e,E)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||h),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),S(e.fields||[],e.data||[],E);throw new Error("Unable to serialize unrecognized input");function S(v,a,j){var T="",Y=(typeof v=="string"&&(v=JSON.parse(v)),typeof a=="string"&&(a=JSON.parse(a)),Array.isArray(v)&&0<v.length),se=!Array.isArray(a[0]);if(Y&&c){for(var R=0;R<v.length;R++)0<R&&(T+=l),T+=m(v[R],R);0<a.length&&(T+=k)}for(var L=0;L<a.length;L++){var q=(Y?v:a[L]).length,b=!1,z=Y?Object.keys(a[L]).length===0:a[L].length===0;if(j&&!Y&&(b=j==="greedy"?a[L].join("").trim()==="":a[L].length===1&&a[L][0].length===0),j==="greedy"&&Y){for(var Q=[],P=0;P<q;P++){var F=se?v[P]:P;Q.push(a[L][F])}b=Q.join("").trim()===""}if(!b){for(var C=0;C<q;C++){0<C&&!z&&(T+=l);var ae=Y&&se?v[C]:C;T+=m(a[L][ae],C)}L<a.length-1&&(!j||0<q&&!z)&&(T+=k)}}return T}function m(v,a){var j,T;return v==null?"":v.constructor===Date?JSON.stringify(v).slice(1,25):(T=!1,I&&typeof v=="string"&&I.test(v)&&(v="'"+v,T=!0),j=v.toString().replace(p,te),(T=T||i===!0||typeof i=="function"&&i(v,a)||Array.isArray(i)&&i[a]||((Y,se)=>{for(var R=0;R<se.length;R++)if(-1<Y.indexOf(se[R]))return!0;return!1})(j,f.BAD_DELIMITERS)||-1<j.indexOf(l)||j.charAt(0)===" "||j.charAt(j.length-1)===" ")?N+j+N:j)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!u&&!!s.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=X,f.ParserHandle=H,f.NetworkStreamer=M,f.FileStreamer=W,f.StringStreamer=K,f.ReadableStreamStreamer=G,s.jQuery&&((d=s.jQuery).fn.parse=function(e){var t=e.config||{},i=[];return this.each(function(k){if(!(d(this).prop("tagName").toUpperCase()==="INPUT"&&d(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var N=0;N<this.files.length;N++)i.push({file:this.files[N],inputElem:this,instanceConfig:d.extend({},t)})}),c(),this;function c(){if(i.length===0)O(e.complete)&&e.complete();else{var k,N,te,E,h=i[0];if(O(e.before)){var I=e.before(h.file,h.inputElem);if(typeof I=="object"){if(I.action==="abort")return k="AbortError",N=h.file,te=h.inputElem,E=I.reason,void(O(e.error)&&e.error({name:k},N,te,E));if(I.action==="skip")return void l();typeof I.config=="object"&&(h.instanceConfig=d.extend(h.instanceConfig,I.config))}else if(I==="skip")return void l()}var p=h.instanceConfig.complete;h.instanceConfig.complete=function(S){O(p)&&p(S,h.file,h.inputElem),l()},f.parse(h.file,h.instanceConfig)}}function l(){i.splice(0,1),c()}}),_&&(s.onmessage=function(e){e=e.data,f.WORKER_ID===void 0&&e&&(f.WORKER_ID=e.workerId),typeof e.input=="string"?s.postMessage({workerId:f.WORKER_ID,results:f.parse(e.input,e.config),finished:!0}):(s.File&&e.input instanceof File||e.input instanceof Object)&&(e=f.parse(e.input,e.config))&&s.postMessage({workerId:f.WORKER_ID,results:e,finished:!0})}),(M.prototype=Object.create(A.prototype)).constructor=M,(W.prototype=Object.create(A.prototype)).constructor=W,(K.prototype=Object.create(K.prototype)).constructor=K,(G.prototype=Object.create(A.prototype)).constructor=G,f})})(Ue)),Ue.exports}var Bt=Nt();const ct=Ut(Bt);async function Wt(){let r=Se.PUBLIC_TEMPLE_URL+"solutions/list",n=await fetch(r,{cache:"no-store"});if(!n.ok)return alert("could not fetch "+r),[];let o=await n.json();return o.sort((s,d)=>s.name.localeCompare(d.name)),o}async function Kt(r){const n=Se.PUBLIC_TEMPLE_URL+`solutions/get_detail/${r}`;let o=await fetch(n,{cache:"no-store"});if(!o.ok)throw alert("Could not fetch "+n),new Error("Could not fetch "+n);return await o.json()}async function gr(r,n,o,s="",d=0,u=1){const _=new URL(Se.PUBLIC_TEMPLE_URL+"solutions/get_full_ts");_.searchParams.set("solution_name",r),_.searchParams.set("components",n.join(",")),_.searchParams.set("unit_component",s),_.searchParams.set("scenario",o),_.searchParams.set("year",d.toString()),_.searchParams.set("rolling_average_size",u.toString());const g=_.toString();let y=await fetch(g,{cache:"no-store"});if(!y.ok)throw alert("Error when fetching "+g),new Error("Error when fetching "+g);let f=await y.json();const A=Object.fromEntries(Object.entries(f).map(([M,W])=>M=="unit"||W===void 0?null:[M,dt(W)]).filter(M=>M!==null));return{unit:Xe(f.unit||""),components:A}}async function vr(r,n,o,s=""){let d=new URL(Se.PUBLIC_TEMPLE_URL+"solutions/get_total");d.searchParams.set("solution_name",r),d.searchParams.set("components",n.join(",")),d.searchParams.set("scenario",o),d.searchParams.set("unit_component",s);const u=d.toString();let _=await fetch(u,{cache:"no-store"});if(!_.ok)throw alert("Error when fetching "+u),new Error("Error when fetching "+u);let g=await _.json();for(const y in g)y=="unit"||g[y]===void 0||(g[y]=Qt(Ht(g[y])));return g.unit=Xe(g.unit||""),g}async function mr(r,n,o){let s=await(await fetch(Se.PUBLIC_TEMPLE_URL+`solutions/get_unit/${r}/${n}?scenario=${o}`,{cache:"no-store"})).json();return Xe(s)}async function br(r,n,o,s,d,u){const _=Se.PUBLIC_TEMPLE_URL+`solutions/get_energy_balance/${r}/${n}/${o}?scenario=${s}&year=${d}&rolling_average_size=${u}`;let g=await fetch(_,{cache:"no-store"});if(!g.ok)throw alert("Could not fetch "+_),new Error("Could not fetch "+_);let y=await g.json(),f=["shed_demand","demand","flow_conversion_input","flow_export","flow_import","flow_storage_charge","flow_storage_discharge","flow_transport_in","flow_transport_out","cost_shed_demand","flow_conversion_output","constraint_nodal_energy_balance"],A={};for(const M of f)y[M]!==void 0&&(A[M]=dt(y[M]));return A}function Ht(r){if(r.slice(0,r.indexOf(`
`)).split(",").length==2){let d=r.split(`
`),u="",_="";for(const g of d.slice(1,d.length)){if(g=="")continue;let y=g.split(",");u+=y[0]+",",_+=y[1]+","}r=u.substring(0,u.length-1)+`
`+_.substring(0,_.length-1)}return r.slice(-1)==`
`&&(r=r.slice(0,-1)),ct.parse(r,{delimiter:",",header:!0,newline:`
`})}function dt(r){return r.map(n=>{let{d:o,t:s,...d}=n;const[u,_]=s;let g=0;return o=o.map(y=>g+=y),o=o.map(y=>y*_+u),{index:d,data:o}})}function Xe(r){return r.slice(-1)==`
`&&(r=r.slice(0,r.length-1)),ct.parse(r,{delimiter:",",header:!0,newline:`
`})}function Qt(r){return r.data=r.data.filter(n=>Object.keys(n).some(o=>!Number.isNaN(Number(o))&&!Number.isNaN(n[o])&&Math.abs(n[o])>0)),r}let Ye=De(xe([])),Qe={},Je=!1;function Jt(){ut(async()=>{x(Ye).length>0||Je||(Je=!0,Oe(Ye,await Wt(),!0),Je=!1)})}function it(){return x(Ye)}async function Gt(r){if(Qe[r])return Qe[r];const n=await Kt(r);return n&&(Qe[r]=n),n}function Yt(r,n,o){return{solution_name:r,scenario_name:n,detail:o.scenarios[n],version:o.version}}function Zt(r){return[...Array(r.system.optimized_years).keys()].map(n=>n*r.system.interval_between_years+r.system.reference_year)}var Xt=de("<option> </option>"),Vt=de('<select class="form-select"></select>'),$t=de("<option> </option>"),er=de('<select class="form-select"></select>'),tr=de("<option> </option>"),rr=de('<select class="form-select"></select>'),nr=de("<!> <!> <!>",1);function yr(r,n){xt(n,!0),Jt();let o=ie(n,"carriers",31,()=>xe([])),s=ie(n,"nodes",31,()=>xe([])),d=ie(n,"years",31,()=>xe([])),u=ie(n,"selected_solution",15),_=ie(n,"activeFirstLevel",15,""),g=ie(n,"activeSecondLevel",15,""),y=ie(n,"activeScenario",15,""),f=ie(n,"excludeSolutions",19,()=>[]),A=ie(n,"loading",15,!1),M=ie(n,"disabled",3,!0),W=ie(n,"withoutSolution",3,!1),K=ie(n,"urlParamSolution",3,"solution"),G=ie(n,"urlParamScenario",3,"scenario"),H=Pe(()=>Mt(it().map(E=>E.name.split(".")[0]))),D=Pe(()=>{if(_()=="")return[];const E=new Set(f().map(h=>h[0]));return it().filter(h=>h.name.startsWith(_())).map(h=>h.name.split(".")[1]||null).filter(h=>h!==null&&!E.has(h))}),X=De(xe([])),B=Pe(()=>{const E=new Set(f().filter(h=>h[0]==g()).map(h=>h[1]));return x(X).filter(h=>!E.has(h))}),$=Pe(()=>x(H).length>0&&x(D).length==0?_()||null:_()&&g()?`${_()}.${g()}`:null),ge=De(!0),he=De(!0);ut(async()=>{if(K()==null||G()==null)return;const E=tt(K())?.split(".")||["",""];_(E[0]),g(E[1]),y(tt(G())||"")}),ke(()=>{x($),y(),je(ee)}),ke(()=>{u(),et().then(()=>{K()==null||G()==null||u()==null||It({[K()]:u().solution_name,[G()]:x(B).length>1?u().scenario_name:null})})}),ke(()=>{if(!u()){o([]),s([]),d([]);return}o(u().detail.system.set_carriers.slice().sort()),s(u().detail.system.set_nodes.slice().sort()),d(Zt(u().detail))}),ke(()=>{_(),je(()=>{if(x(ge)){Oe(ge,!1);return}g(x(D).length===1?x(D)[0]:""),y("")})}),ke(()=>{g(),je(()=>{if(x(he)){Oe(he,!1);return}y("")})}),ke(()=>{x(D).length===1&&g(x(D)[0])});async function ee(){if(await et(),x($)===null){u(null),Oe(X,[],!0);return}if(u()!==null&&u().solution_name===x($)&&u().scenario_name===y())return;A(!0);const E=await Gt(x($));if(Oe(X,Object.keys(E.scenarios),!0),x(B).length==1&&y(x(B)[0]),y()==""||!(y()in E.scenarios)){y(""),u(null),A(!1);return}u(Yt(x($),y(),E)),n.solutionSelected?.(u()),A(!1)}function O(){return _()==""?!1:x(D).length>1||x(B).length>1}var e={moreSolutionsExist:O},t=nr(),i=Ot(t);{var c=E=>{He(E,{label:"Solution",content:(I,p=ce)=>{var S=Vt();Be(S,21,()=>x(H),We,(m,v)=>{var a=Xt(),j=ne(a,!0);Z(a);var T={};me(()=>{Ie(j,x(v)),T!==(T=x(v))&&(a.value=(a.__value=x(v))??"")}),fe(m,a)}),Z(S),me(()=>{be(S,"id",p()),S.disabled=M()}),Ke(S,_),fe(I,S)}})};Ne(i,E=>{W()||E(c)})}var l=qe(i,2);{var k=E=>{He(E,{label:"Subsolution",content:(I,p=ce)=>{var S=er();Be(S,21,()=>x(D),We,(m,v)=>{var a=$t(),j=ne(a,!0);Z(a);var T={};me(()=>{Ie(j,x(v)),T!==(T=x(v))&&(a.value=(a.__value=x(v))??"")}),fe(m,a)}),Z(S),me(()=>{be(S,"id",p()),S.disabled=M()}),Ke(S,g),fe(I,S)}})};Ne(l,E=>{x(D).length>0&&E(k)})}var N=qe(l,2);{var te=E=>{He(E,{label:"Scenario",content:(I,p=ce)=>{var S=rr();Be(S,21,()=>x(B),We,(m,v)=>{var a=tr(),j=ne(a,!0);Z(a);var T={};me(()=>{Ie(j,x(v)),T!==(T=x(v))&&(a.value=(a.__value=x(v))??"")}),fe(m,a)}),Z(S),me(()=>{be(S,"id",p()),S.disabled=M()}),Ke(S,y),fe(I,S)}})};Ne(N,E=>{x(X).length>1&&E(te)})}return fe(r,t),Lt(e)}var ir=de('<div class="z-1 position-relative"><div class="accordion" id="accordionFilters"><!></div></div>');function wr(r,n){var o=ir(),s=ne(o),d=ne(s);Ze(d,()=>n.children??ce),Z(s),Z(o),fe(r,o)}var sr=de('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" aria-expanded="true"> </button></h2> <div class="accordion-collapse collapse show"><div class="accordion-body"><!></div></div></div>');function kr(r,n){const o=ot();var s=sr(),d=ne(s),u=ne(d),_=ne(u,!0);Z(u),Z(d);var g=qe(d,2),y=ne(g),f=ne(y);Ze(f,()=>n.children??ce),Z(y),Z(g),Z(s),me(()=>{be(u,"data-bs-target","#collapse"+o),be(u,"aria-controls","collapse"+o),Ie(_,n.title),be(g,"id","collapse"+o)}),fe(r,s)}const Ee=[["rgb(122, 157, 207)","rgb(8, 64, 126)","rgb(166, 190, 223)","rgb(33, 92, 175)","rgb(211, 222, 239)","rgb(77, 125, 191)"],["rgb(212, 134, 129)","rgb(150, 39, 45)","rgb(226, 174, 171)","rgb(183, 53, 45)","rgb(241, 215, 213)","rgb(197, 93, 87)"],["rgb(102, 175, 192)","rgb(0, 89, 109)","rgb(153, 202, 213)","rgb(0, 120, 148)","rgb(204, 228, 234)","rgb(51, 149, 171)"],["rgb(202, 108, 174)","rgb(140, 10, 89)","rgb(220, 158, 201)","rgb(167, 17, 122)","rgb(239, 208, 227)","rgb(183, 59, 146)"],["rgb(161, 171, 113)","rgb(54, 82, 19)","rgb(192, 199, 161)","rgb(98, 115, 19)","rgb(224, 227, 208)","rgb(129, 143, 66)"],["rgb(187, 164, 113)","rgb(112, 79, 18)","rgb(210, 194, 161)","rgb(142, 103, 19)","rgb(232, 225, 208)","rgb(165, 133, 66)"]];let Le=0,Te=0,Me={};function Er(){Le=0,Te=0,Me={}}function Sr(r){if(r!==void 0&&Me[r]!==void 0)return Me[r];Le>=Ee.length&&(Le=0,Te++,Te>=Ee[0].length&&(Te=0));const n=Ee[Le][Te];return Le++,r!==void 0&&(Me[r]=n),n}function Rr(r,n=.8){return r.replace("rgb","rgba").replace(")",`, ${n})`)}function Cr(){let r=[];for(let n=0;n<Ee.length;n++)for(let o=0;o<Ee[0].length;o++)r.push(Ee[o][n]);return r}export{wr as F,yr as S,mr as a,kr as b,He as c,gr as d,Mt as e,vr as f,br as g,Rr as h,Ke as i,pr as j,Zt as k,Ut as l,hr as m,Sr as n,Cr as o,Er as r,_r as t};
