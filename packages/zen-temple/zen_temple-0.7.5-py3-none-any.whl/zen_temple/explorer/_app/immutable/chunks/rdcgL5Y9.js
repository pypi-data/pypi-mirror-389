import"./DsnmJJEf.js";import{o as gt}from"./C6tn_jEF.js";import{p as _t,b as C,s as V,d as k,u as G,t as ht,g as _,c as mt,f as lt,a as Y,j as pt,h as Z,i as ut,l as ct,m as J,r as K}from"./BPIoXquA.js";import{d as wt}from"./B6F7olol.js";import{p as O,i as W,b as xt}from"./lzapwbvy.js";import{c as ft,u as yt,e as zt,i as Pt}from"./BUFwSDdR.js";import{k as St,S as Tt}from"./BG-hj6TZ.js";var H={exports:{}},bt=H.exports,dt;function kt(){return dt||(dt=1,(function(w,h){(function(l,p){w.exports=p()})(bt,(function(){var l="rgba(100, 100, 100, 0.7)",p="rgba(255, 255, 255, 0.8)",D="round",d=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},v=(function(){function n(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}})(),q=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},c=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},f=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n},g=(function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p;return d(this,n),this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._canvas.width=t,this._canvas.height=t,this._context.fillStyle=r,this._context.fillRect(0,0,this._canvas.width,this._canvas.height),this._size=t,this._patternColor=e,this}return v(n,[{key:"setStrokeProps",value:function(){this._context.strokeStyle=this._patternColor,this._context.lineWidth=this._size/10,this._context.lineJoin=D,this._context.lineCap=D}},{key:"setFillProps",value:function(){this._context.fillStyle=this._patternColor}}]),n})(),P=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawPlus(),this.drawPlus(e,e),this._context.stroke(),this._canvas}},{key:"drawPlus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/4;this._context.moveTo(i+e,0+a),this._context.lineTo(i+e,s+a),this._context.moveTo(0+e,i+a),this._context.lineTo(s+e,i+a),this._context.closePath()}}]),t})(g),j=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawCross(),this.drawCross(e,e),this._context.stroke(),this._canvas}},{key:"drawCross",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=2;this._context.moveTo(e+i,a+i),this._context.lineTo(s-i+e,s-i+a),this._context.moveTo(e+i,s-i+a),this._context.lineTo(s-i+e,a+i),this._context.closePath()}}]),t})(g),L=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawDash(),this.drawDash(e,e),this._context.stroke(),this._canvas}},{key:"drawDash",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=2;this._context.moveTo(e+i,a+i),this._context.lineTo(s-i+e,s-i+a),this._context.closePath()}}]),t})(g),$=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;this._context.beginPath(),this.setStrokeProps();var a=new j;a.drawCross.call(this);var o=new L;return o.drawDash.call(this,e,e),this._context.stroke(),this._canvas}}]),t})(g),b=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawDot(),this.drawDot(e,e),this._context.fill(),this._canvas}},{key:"drawDot",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._size/10,s=this._size,i=s/4,N=i+e,X=i+a;this._context.moveTo(N+i,X),this._context.arc(N,X,o,0,2*Math.PI),this._context.closePath()}}]),t})(g),tt=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;this._context.beginPath(),this.setStrokeProps();var a=new L;a.drawDash.call(this,e,e),this._context.closePath(),this._context.stroke(),this.setFillProps();var o=new b;return o.drawDot.call(this),this._context.fill(),this._canvas}}]),t})(g),et=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2,a=this._size/5;return this._context.beginPath(),this.setFillProps(),this.drawDot(0,0,a),this.drawDot(e,e,a),this._context.fill(),this._canvas}}]),t})(b),A=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2,a=this._size/5;return this._context.beginPath(),this.setStrokeProps(),this.drawDot(0,0,a),this.drawDot(e,e,a),this._context.stroke(),this._canvas}}]),t})(b),R=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawLine(),this.drawLine(e,e),this._context.stroke(),this._canvas}},{key:"drawLine",value:function(){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=this._size,o=a/4;this._context.moveTo(0,o+e),this._context.lineTo(this._size,o+e),this._context.closePath()}}]),t})(g),nt=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){return this._context.translate(this._size,0),this._context.rotate(90*Math.PI/180),R.prototype.drawTile.call(this),this._canvas}}]),t})(R),at=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){return this._context.beginPath(),this.setStrokeProps(),this.drawWeave(0,0),this._context.stroke(),this._canvas}},{key:"drawWeave",value:function(e,a){var o=this._size,s=o/2;this._context.moveTo(e+1,a+1),this._context.lineTo(s-1,s-1),this._context.moveTo(s+1,o-1),this._context.lineTo(o-1,s+1),this._context.closePath()}}]),t})(g),M=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){return this._context.beginPath(),this.setStrokeProps(),this.drawZigzag(),this.drawZigzag(this._size/2),this._context.stroke(),this._canvas}},{key:"drawZigzag",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=this._size,o=a/4,s=a/2,i=a/10;this._context.moveTo(0,i+e),this._context.lineTo(o,s-i+e),this._context.lineTo(s,i+e),this._context.lineTo(a-o,s-i+e),this._context.lineTo(a,i+e)}}]),t})(g),u=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){return this._context.translate(this._size,0),this._context.rotate(90*Math.PI/180),M.prototype.drawTile.call(this),this._canvas}}]),t})(M),x=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawDiagonalLine(),this.drawDiagonalLine(e,e),this._context.stroke(),this._canvas}},{key:"drawDiagonalLine",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=1;this._context.moveTo(s-i-e,i*-1+a),this._context.lineTo(o+1-e,s+1+a),this._context.closePath()}}]),t})(g),S=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){return this._context.translate(this._size,0),this._context.rotate(90*Math.PI/180),x.prototype.drawTile.call(this),this._canvas}}]),t})(x),rt=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawSquare(),this.drawSquare(e,e),this._context.fill(),this._canvas}},{key:"drawSquare",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/20;this._context.fillRect(e+i,a+i,s-i*2,s-i*2),this._context.closePath()}}]),t})(g),it=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawBox(),this.drawBox(e,e),this._context.stroke(),this._canvas}},{key:"drawBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/20;this._context.strokeRect(e+i,a+i,s-i*4,s-i*4),this._context.closePath()}}]),t})(g),T=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawTriangle(),this.drawTriangle(e,e),this._context.fill(),this._canvas}},{key:"drawTriangle",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/4;this._context.moveTo(i+e,a),this._context.lineTo(s+e,s+a),this._context.lineTo(e,s+a),this._context.closePath()}}]),t})(g),F=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size;return this._context.translate(e,e),this._context.rotate(180*Math.PI/180),T.prototype.drawTile.call(this),this._canvas}}]),t})(T),m=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawDiamond(),this.drawDiamond(e,e),this._context.fill(),this._canvas}},{key:"drawDiamond",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/4;this._context.moveTo(i+e,a),this._context.lineTo(s+e,i+a),this._context.lineTo(i+e,s+a),this._context.lineTo(e,i+a),this._context.closePath()}}]),t})(g),E=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawDiamond(),this.drawDiamond(e,e),this._context.stroke(),this._canvas}},{key:"drawDiamond",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2-1,i=o/4;this._context.moveTo(i+e,a+1),this._context.lineTo(s+e,i+a),this._context.lineTo(i+e,s+a),this._context.lineTo(e+1,i+a),this._context.closePath()}}]),t})(m),z={plus:P,cross:j,dash:L,"cross-dash":$,dot:b,"dot-dash":tt,disc:et,ring:A,line:R,"line-vertical":nt,weave:at,zigzag:M,"zigzag-vertical":u,diagonal:x,"diagonal-right-left":S,square:rt,box:it,triangle:T,"triangle-inverted":F,diamond:m,"diamond-box":E},st={circle:z.disc,"triangle-vertical":z["triangle-inverted"],"line-horizontal":z.line,"line-diagonal-lr":z.diagonal,"line-diagonal-rl":z["diagonal-right-left"],"zigzag-horizontal":z.zigzag,"diamond-outline":z["diamond-box"]},B=[];function I(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=Object.keys(z);n.forEach(function(e){t.splice(t.indexOf(e),1)});var r=Math.floor(Math.random()*t.length);return t[r]}q(B,z,st);function U(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"square",t=arguments[1],r=arguments[2],e=arguments[3],a=document.createElement("canvas"),o=a.getContext("2d"),s=e*2,i=B[n],N=new i(e,t,r),X=o.createPattern(N.drawTile(),"repeat");return a.width=s,a.height=s,X.shapeType=n,X}function ot(n){var t=void 0,r=void 0;return n.map(function(e,a,o){var s=void 0;return a===0?(s=I(),r=s,t=r):a===o.length-1?s=I([r,t]):(s=I([r]),r=s),U(s,e)})}var y={draw:U,generate:ot};return y}))})(H)),H.exports}var Ot=kt();function Dt(w,h,l,p){h().push(null),_(l).push(""),_(p).push("")}var jt=Z("<hr/>"),Lt=Z('<div class="row mt-2"><div class="offset-md-3 col-md-9"><button class="btn btn-sm btn-outline-danger">Remove solution from comparison</button></div></div>'),Ct=Z("<!> <!> <!>",1),qt=Z('<div class="row mt-3"><div class="offset-md-3 col-md-9"><button class="btn btn-sm btn-outline-primary">Add solution to compare</button></div></div>'),Rt=Z("<!> <!>",1);function Vt(w,h){_t(h,!0);let l=O(h,"solutions",31,()=>C([])),p=O(h,"loading",15,!1),D=O(h,"years",31,()=>C([])),d=O(h,"nodes",31,()=>C([]));O(h,"carriers",27,()=>C([]));let v=O(h,"disabled",3,!1),q=O(h,"urlParamSolutions",3,"solutions"),c=O(h,"urlParamScenarios",3,"scenarios"),f=V(""),g=V(C(l().map(()=>""))),P=V(C(l().map(()=>""))),j=V(!1),L=C([]),$=ct(()=>_(f)==""?!1:L.some(u=>u?.moreSolutionsExist?u.moreSolutionsExist():!0)),b=V(!1);gt(async()=>{if(q()==null||c()==null)return;const u=ft(q()),x=ft(c());if(u.length==0||u.length!=x.length){k(b,!0);return}k(f,u[0].split(".")[0],!0),k(g,u.map(S=>S.split(".")[1]||""),!0),k(P,x,!0),l(u.map(()=>null)),k(j,!0),A(),k(b,!0)}),G(()=>{l().map(u=>u==null?null:`${u.solution_name}.${u.scenario_name}`),ht().then(()=>{q()==null||c()==null||l().length==0||yt({[q()]:l().filter(u=>u!=null).map(u=>u.solution_name).join("~"),[c()]:l().filter(u=>u!=null).map(u=>u.scenario_name).join("~")})})}),G(()=>{l().length>1&&l()[0]===null&&!_(j)&&ht().then(()=>{l().splice(1),_(g).splice(1),_(P).splice(1)})}),G(()=>{_(j)&&l()[0]!==null&&k(j,!1)}),G(()=>{l().length>0&&l()[0]!==null&&(D(St(l()[0].detail)),d(l()[0].detail.system.set_nodes))});function tt(u){return l().map((x,S)=>S===u||x==null?null:[_(g)[S],_(P)[S]]).filter(x=>x!=null)}function et(u){l().splice(u,1),_(g).splice(u,1),_(P).splice(u,1)}function A(){h.onSelected?.(l())}var R=mt(),nt=lt(R);{var at=u=>{},M=u=>{var x=Rt(),S=lt(x);zt(S,17,l,Pt,(T,F,m)=>{var E=Ct(),z=lt(E);{var st=y=>{var n=jt();Y(y,n)};W(z,y=>{m>0&&y(st)})}var B=ut(z,2);{var I=y=>{{let n=ct(()=>tt(m));xt(Tt(y,{get excludeSolutions(){return _(n)},solutionSelected:A,get disabled(){return v()},withoutSolution:m>0,urlParamSolution:null,urlParamScenario:null,get selected_solution(){return l()[m]},set selected_solution(t){l(l()[m]=t,!0)},get activeFirstLevel(){return _(f)},set activeFirstLevel(t){k(f,t,!0)},get activeSecondLevel(){return _(g)[m]},set activeSecondLevel(t){_(g)[m]=t},get activeScenario(){return _(P)[m]},set activeScenario(t){_(P)[m]=t},get loading(){return p()},set loading(t){p(t)}}),(t,r)=>L[r]=t,t=>L?.[t],()=>[m])}};W(B,y=>{_(g)[m]!==void 0&&_(P)[m]!==void 0&&y(I)})}var U=ut(B,2);{var ot=y=>{var n=Lt(),t=J(n),r=J(t);r.__click=()=>et(m),K(t),K(n),Y(y,n)};W(U,y=>{m>0&&y(ot)})}Y(T,E)});var rt=ut(S,2);{var it=T=>{var F=qt(),m=J(F),E=J(m);E.__click=[Dt,l,g,P],K(m),K(F),Y(T,F)};W(rt,T=>{_($)&&!l().includes(null)&&T(it)})}Y(u,x)};W(nt,u=>{_(b)?u(M,!1):u(at)})}Y(w,R),pt()}wt(["click"]);function Wt(w){const h=[],l=new Set;return w.data.datasets.forEach((p,D)=>{l.has(p.label||"")||(l.add(p.label||""),h.push({text:p.label||"",fontColor:w.options.color,fillStyle:p.backgroundColor||"black",strokeStyle:p.borderColor||"black",lineWidth:p.borderWidth||0,hidden:!w.isDatasetVisible(D),datasetIndex:D}))}),h}function Zt(w,h){h.data.datasets.forEach((l,p)=>{l.label===w.text&&(h.setDatasetVisibility(p,!h.isDatasetVisible(p)),h.update())})}function At(w,h){let l=w.split(".").pop()||w;return h!="none"&&(l=`${l} (${h})`),l}const vt=["diagonal","diagonal-right-left","dot","diamond","dot-dash","zigzag","zigzag-vertical","line","line-vertical","plus","cross","dash","cross-dash","disc","ring","weave","square","box","triangle","triangle-inverted","diamond-box"];let Q=0;function Ut(){Q=0}function Nt(){let w=vt[Q];return Q=(Q+1)%vt.length,w}function Gt(w,h){return{text:w,fillStyle:h!==void 0?Ot.draw(h,"#aaa"):"#aaa"}}export{Vt as M,Wt as a,Gt as c,At as g,Nt as n,Zt as o,Ot as p,Ut as r};
