{
    "operation": "ResizeOp",
    "format": {
        "name": "Aidge",
        "metadata": {
            "initializer_rank": 4
        }
    },
    "base_configuration": {
        "attributes": {
            "antialias": 0,
            "axes": null,
            "coordinate_transformation_mode": "half_pixel",
            "cubic_coeff_a": -0.75,
            "exclude_outside": 0,
            "extrapolation_value": 0.0,
            "aspect_ratio": "stretch",
            "interpolation_mode": "round_prefer_floor"
        },
        "input_specs": [
            { "name": "X", "shape": [1, 3, 32, 32], "dtype": "float32" },
            { "name": "roi", "dtype": "float32" },
            {
                "name": "scales",
                "shape": [4],
                "dtype": "float32",
                "data": [1.0, 1.0, 2.0, 0.5]
            },
            { "name": "sizes", "dtype": "int64" }
        ]
    },
    "test_configurations": {
        "ok": {
            "attr": {
                "interpolation_mode": {
                    "linear": {
                        "attributes": { "interpolation_mode": "linear" },
                        "input_specs": []
                    },
                    "cubic": {
                        "attributes": { "interpolation_mode": "cubic" },
                        "input_specs": []
                    },
                    "floor": {
                        "attributes": { "interpolation_mode": "floor" },
                        "input_specs": []
                    },
                    "ceil": {
                        "attributes": { "interpolation_mode": "ceil" },
                        "input_specs": []
                    },
                    "round_prefer_floor": {
                        "attributes": { "interpolation_mode": "round_prefer_floor" },
                        "input_specs": []
                    },
                    "round_prefer_ceil": {
                        "attributes": { "interpolation_mode": "round_prefer_ceil" },
                        "input_specs": []
                    }
                },
                "coordinate_transformation_mode": {
                    "half_pixel": {
                        "attributes": {
                            "coordinate_transformation_mode": "half_pixel"
                        },
                        "input_specs": []
                    },
                    "align_corners": {
                        "attributes": {
                            "coordinate_transformation_mode": "align_corners"
                        },
                        "input_specs": []
                    },
                    "asymmetric": {
                        "attributes": {
                            "coordinate_transformation_mode": "asymmetric"
                        },
                        "input_specs": []
                    },
                    "pytorch_half_pixel": {
                        "attributes": {
                            "coordinate_transformation_mode": "pytorch_half_pixel"
                        },
                        "input_specs": []
                    },
                    "tf_crop_and_resize": {
                        "attributes": {
                            "coordinate_transformation_mode": "tf_crop_and_resize"
                        },
                        "input_specs": []
                    }
                },
                "antialias": {
                    "linear": {
                        "off": {
                            "attributes": { "antialias": 0, "interpolation_mode": "linear" },
                            "input_specs": [
                                {
                                    "name": "scales",
                                    "data": [1.0, 1.0, 0.5, 0.5]
                                }
                            ]
                        },
                        "on": {
                            "attributes": { "antialias": 1, "interpolation_mode": "linear" },
                            "input_specs": [
                                {
                                    "name": "scales",
                                    "data": [1.0, 1.0, 0.5, 0.5]
                                }
                            ]
                        }
                    }
                },
                "axes": {
                    "spatial_only": {
                        "attributes": { "axes": [2, 3] },
                        "input_specs": [
                            { "name": "scales", "data": [3.0, 0.7] }
                        ]
                    },
                    "all_dims": {
                        "attributes": { "axes": [0, 1, 2, 3] },
                        "input_specs": []
                    }
                },
                "cubic_coeff_a": {
                    "0-5": {
                        "attributes": { "cubic_coeff_a": 0.5, "interpolation_mode": "cubic" }
                    },
                    "-0-75": {
                        "attributes": {
                            "cubic_coeff_a": -0.75,
                            "interpolation_mode": "cubic"
                        }
                    }
                },
                "extrapolation_value": {
                    "true": {
                        "attributes": {
                            "extrapolation_value": true,
                            "coordinate_transformation_mode": "tf_crop_and_resize"
                        }
                    }
                },
                "aspect_ratio": {
                    "stretch": {
                        "attributes": { "aspect_ratio": "stretch" }
                    },
                    "not_larger": {
                        "attributes": {
                            "aspect_ratio": "not_larger"
                        }
                    }
                }
            },
            "shape": {
                "scales": {
                    "upscale_2x": {
                        "input_specs": [
                            {
                                "name": "scales",
                                "shape": [4],
                                "dtype": "float32",
                                "data": [1.0, 1.0, 2.0, 2.0]
                            }
                        ]
                    },
                    "downscale_half": {
                        "input_specs": [
                            {
                                "name": "scales",
                                "shape": [4],
                                "dtype": "float32",
                                "data": [1.0, 1.0, 0.5, 0.5]
                            }
                        ]
                    }
                },
                "sizes": {
                    "explicit_resize": {
                        "input_specs": [
                            { "name": "scales", "shape": null, "dtype": null },
                            {
                                "name": "sizes",
                                "shape": [4],
                                "dtype": "int64",
                                "data": [1, 3, 64, 64]
                            }
                        ]
                    },
                    "non_square": {
                        "input_specs": [
                            { "name": "scales", "shape": null, "dtype": null },
                            {
                                "name": "sizes",
                                "shape": [4],
                                "dtype": "int64",
                                "data": [1, 3, 100, 200]
                            }
                        ]
                    }
                }
            }
        },
        "error": {
            "missing_scales_and_sizes": {
                "input_specs": [
                    { "name": "scales", "shape": null, "dtype": null },
                    { "name": "sizes", "shape": null, "dtype": null }
                ]
            },
            "both_scales_and_sizes": {
                "input_specs": [
                    {
                        "name": "scales",
                        "shape": [4],
                        "dtype": "float32",
                        "data": [1.0, 1.0, 2.0, 2.0]
                    },
                    {
                        "name": "sizes",
                        "shape": [4],
                        "dtype": "int64",
                        "data": [1, 3, 128, 128]
                    }
                ]
            },
            "negative_scale": {
                "input_specs": [
                    {
                        "name": "scales",
                        "shape": [4],
                        "dtype": "float32",
                        "data": [1.0, 1.0, -2.0, 2.0]
                    }
                ]
            },
            "zero_size": {
                "input_specs": [
                    { "name": "scales", "shape": null, "dtype": null },
                    {
                        "name": "sizes",
                        "shape": [4],
                        "dtype": "int64",
                        "data": [1, 3, 0, 64]
                    }
                ]
            },
            "invalid_mode": {
                "attributes": { "interpolation_mode": "invalid_mode" },
                "input_specs": []
            },
            "invalid_nearest_mode": {
                "attributes": {
                    "interpolation_mode": "nearest",
                    "interpolation_mode": "bad_value"
                },
                "input_specs": []
            },
            "axis_out_of_range": {
                "attributes": { "axes": [4] },
                "input_specs": []
            },
            "dtype_mismatch_scales": {
                "input_specs": [
                    {
                        "name": "scales",
                        "shape": [4],
                        "dtype": "int64",
                        "data": [1, 1, 2, 2]
                    }
                ]
            },
            "dtype_mismatch_sizes": {
                "input_specs": [
                    { "name": "scales", "shape": null, "dtype": null },
                    {
                        "name": "sizes",
                        "shape": [4],
                        "dtype": "float32",
                        "data": [1.0, 3.0, 64.0, 64.0]
                    }
                ]
            },
            "zero_sized_dim": {
                "input_specs": [
                    { "name": "X", "shape": [1, 3, 0, 64], "dtype": "float32" },
                    {
                        "name": "scales",
                        "shape": [4],
                        "dtype": "float32",
                        "data": [1.0, 1.0, 2.0, 2.0]
                    }
                ]
            }
        }
    }
}
